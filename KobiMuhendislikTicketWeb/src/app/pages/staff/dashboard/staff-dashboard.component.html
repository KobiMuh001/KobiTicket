<div class="staff-dashboard">
  <div class="page-header">
    <div class="header-left">
      <h1>Dashboard</h1>
      <p class="subtitle">HoÅŸ geldiniz! Ä°ÅŸte gÃ¼ncel durumunuz.</p>
    </div>
  </div>

  <!-- Workload Cards -->
  @if (workload) {
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon processing">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ workload.assignedTickets }}</span>
          <span class="stat-label">Aktif Ticket</span>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon open">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ workload.openTickets }}</span>
          <span class="stat-label">Bekleyen</span>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon resolved">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ workload.resolvedToday }}</span>
          <span class="stat-label">BugÃ¼n Ã‡Ã¶zÃ¼len</span>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon capacity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <line x1="3" y1="9" x2="21" y2="9"/>
            <line x1="9" y1="21" x2="9" y2="9"/>
          </svg>
        </div>
        <div class="stat-info">
          <span class="stat-value">{{ getWorkloadPercentage() }}%</span>
          <span class="stat-label">Kapasite</span>
        </div>
        <div class="capacity-bar">
          <div class="capacity-fill" [style.width.%]="getWorkloadPercentage()"
               [class.high]="getWorkloadPercentage() > 80"
               [class.medium]="getWorkloadPercentage() > 50 && getWorkloadPercentage() <= 80">
          </div>
        </div>
      </div>
    </div>
  }

  <div class="dashboard-grid">
    <!-- My Tickets -->
    <div class="dashboard-card">
      <div class="card-header">
        <h2>Aktif TicketlarÄ±m</h2>
        <a routerLink="/staff/my-tickets" class="view-all">TÃ¼mÃ¼nÃ¼ GÃ¶r â†’</a>
      </div>
      <div class="card-body">
        @if (isLoading) {
          <div class="loading">YÃ¼kleniyor...</div>
        } @else if (myTickets.length === 0) {
          <div class="empty-state">
            <p>HenÃ¼z atanmÄ±ÅŸ ticket yok</p>
          </div>
        } @else {
          <div class="ticket-list">
            @for (ticket of myTickets; track ticket.id) {
              <a [routerLink]="['/staff/my-tickets', ticket.id]" class="ticket-item">
                <div class="ticket-info">
                  <span class="ticket-title">{{ ticket.title }}</span>
                  <span class="ticket-company">{{ ticket.companyName }}</span>
                </div>
                <div class="ticket-meta">
                  <span class="status" [class]="getStatusClass(ticket.status)">
                    {{ getStatusText(ticket.status) }}
                  </span>
                  <span class="priority" [class]="getPriorityClass(ticket.priority)">
                    {{ getPriorityText(ticket.priority) }}
                  </span>
                </div>
              </a>
            }
          </div>
        }
      </div>
    </div>

    <!-- Unassigned Tickets -->
    <div class="dashboard-card">
      <div class="card-header">
        <h2>AÃ§Ä±k Ticketlar</h2>
        <a routerLink="/staff/open-tickets" class="view-all">TÃ¼mÃ¼nÃ¼ GÃ¶r â†’</a>
      </div>
      <div class="card-body">
        @if (isLoading) {
          <div class="loading">YÃ¼kleniyor...</div>
        } @else if (unassignedTickets.length === 0) {
          <div class="empty-state">
            <p>Bekleyen ticket yok ðŸŽ‰</p>
          </div>
        } @else {
          <div class="ticket-list">
            @for (ticket of unassignedTickets; track ticket.id) {
              <div class="ticket-item unassigned">
                <div class="ticket-info">
                  <span class="ticket-title">{{ ticket.title }}</span>
                  <span class="ticket-company">{{ ticket.companyName }}</span>
                </div>
                <div class="ticket-actions">
                  <span class="priority" [class]="getPriorityClass(ticket.priority)">
                    {{ getPriorityText(ticket.priority) }}
                  </span>
                  <button class="claim-btn" (click)="claimTicket(ticket.id)" 
                          [disabled]="workload && !workload.isAvailable">
                    Ãœstlen
                  </button>
                </div>
              </div>
            }
          </div>
        }
      </div>
    </div>
  </div>
</div>
