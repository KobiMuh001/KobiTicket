import{a as R}from"./chunk-277NH3WL.js";import{b as I,c as W,f as K,i as N,j as Y,k as G,r as Q}from"./chunk-Z7PBHQW4.js";import{f as j,i as H}from"./chunk-MFIIAS3B.js";import{La as u,Na as h,Qb as A,Sa as x,Tb as D,Ub as B,Va as E,Wa as z,Xa as e,Ya as n,Z as T,Za as d,ab as w,bb as C,cb as m,fa as O,ga as P,ha as g,hb as o,ia as k,ib as f,jb as _,mb as M,nb as y,ob as b,qb as L,sb as V,tb as v,ub as S,ya as a,za as F}from"./chunk-3PZ5LAVE.js";var q=(r,s)=>s.id,J=r=>["/customer/tickets",r];function U(r,s){if(r&1){let t=w();e(0,"button",27),C("click",function(){O(t);let i=m();return P(i.clearFilters())}),g(),e(1,"svg",28),d(2,"line",29)(3,"line",30),n(),o(4," Temizle "),n()}}function X(r,s){r&1&&(e(0,"div",26),d(1,"div",31),e(2,"p"),o(3,"Y\xFCkleniyor..."),n()())}function Z(r,s){r&1&&(e(0,"h3"),o(1,"Hen\xFCz Talebiniz Yok"),n(),e(2,"p"),o(3,"Hen\xFCz bir destek talebi olu\u015Fturmam\u0131\u015Fs\u0131n\u0131z."),n(),e(4,"a",3),o(5,"\u0130lk Talebinizi Olu\u015Fturun"),n())}function $(r,s){if(r&1){let t=w();e(0,"h3"),o(1,"Sonu\xE7 Bulunamad\u0131"),n(),e(2,"p"),o(3,"Arama kriterlerinize uygun talep bulunamad\u0131."),n(),e(4,"button",36),C("click",function(){O(t);let i=m(2);return P(i.clearFilters())}),o(5,"Filtreleri Temizle"),n()}}function ee(r,s){if(r&1&&(e(0,"div",32),g(),e(1,"svg",33),d(2,"path",34)(3,"polyline",35),n(),u(4,Z,6,0)(5,$,6,0),n()),r&2){let t=m();a(4),x(4,t.tickets.length===0?4:5)}}function te(r,s){if(r&1&&(e(0,"span",44),g(),e(1,"svg",50),d(2,"rect",57)(3,"path",58),n(),o(4),n()),r&2){let t=m().$implicit;a(4),_(" ",t.assetName," ")}}function ne(r,s){if(r&1&&(e(0,"span"),g(),e(1,"svg",50),d(2,"circle",5)(3,"polyline",59),n(),o(4),v(5,"date"),n()),r&2){let t=m().$implicit;a(4),_(" Son G\xFCncelleme: ",S(5,1,t.updatedAt,"dd.MM.yyyy HH:mm")," ")}}function ie(r,s){if(r&1&&(e(0,"div",38)(1,"div",39)(2,"div",40)(3,"h3",41),o(4),n(),e(5,"div",42)(6,"span",43),o(7),n(),u(8,te,5,1,"span",44),n()(),e(9,"div",45)(10,"span",46),o(11),n(),e(12,"span",46),o(13),n()()(),e(14,"p",47),o(15),n(),e(16,"div",48)(17,"div",49)(18,"span"),g(),e(19,"svg",50),d(20,"rect",51)(21,"line",52)(22,"line",53)(23,"line",54),n(),o(24),v(25,"date"),n(),u(26,ne,6,4,"span"),n(),k(),e(27,"a",55),o(28," Detay "),g(),e(29,"svg",28),d(30,"polyline",56),n()()()()),r&2){let t=s.$implicit,l=m(2);a(4),f(t.title),a(3),_("#",t.id,""),a(),x(8,t.assetName?8:-1),a(2),h("ngClass",l.getStatusClass(t.status)),a(),f(t.status),a(),h("ngClass",l.getPriorityClass(t.priority)),a(),f(t.priority),a(2),f(t.description),a(9),_(" Olu\u015Fturulma: ",S(25,11,t.createdAt,"dd.MM.yyyy HH:mm")," "),a(2),x(26,t.updatedAt?26:-1),a(),h("routerLink",V(14,J,t.id))}}function oe(r,s){if(r&1&&(e(0,"div",37),E(1,ie,31,16,"div",38,q),n()),r&2){let t=m();a(),z(t.filteredTickets)}}var me=(()=>{class r{constructor(t){this.ticketService=t,this.tickets=[],this.filteredTickets=[],this.isLoading=!0,this.searchQuery="",this.statusFilter="",this.priorityFilter=""}ngOnInit(){this.loadTickets()}loadTickets(){this.isLoading=!0,this.ticketService.getMyTickets().subscribe({next:t=>{let l=t.data||t||[];this.tickets=l.map(i=>({id:i.id,title:i.title,description:i.description,status:this.getStatusText(i.status),priority:this.getPriorityText(i.priority),createdAt:i.createdDate||i.createdAt,updatedAt:i.updatedDate||i.updatedAt,assetName:i.asset?.name||i.asset?.productName||i.assetName})).sort((i,p)=>new Date(p.createdAt).getTime()-new Date(i.createdAt).getTime()),this.applyFilters(),this.isLoading=!1},error:()=>{this.isLoading=!1}})}applyFilters(){this.filteredTickets=this.tickets.filter(t=>{let l=!this.searchQuery||t.title.toLowerCase().includes(this.searchQuery.toLowerCase())||t.description?.toLowerCase().includes(this.searchQuery.toLowerCase()),i=!this.statusFilter||t.status===this.statusFilter,p=!this.priorityFilter||t.priority===this.priorityFilter;return l&&i&&p})}clearFilters(){this.searchQuery="",this.statusFilter="",this.priorityFilter="",this.applyFilters()}getStatusText(t){return{Open:"A\xE7\u0131k",Processing:"\u0130\u015Flemde",InProgress:"\u0130\u015Flemde",WaitingForCustomer:"M\xFC\u015Fteri Bekleniyor",Waiting:"M\xFC\u015Fteri Bekleniyor",Resolved:"\xC7\xF6z\xFCld\xFC",Closed:"Kapat\u0131ld\u0131",1:"A\xE7\u0131k",2:"\u0130\u015Flemde",3:"M\xFC\u015Fteri Bekleniyor",4:"\xC7\xF6z\xFCld\xFC",5:"Kapat\u0131ld\u0131"}[t]||t.toString()}getPriorityText(t){return{Low:"D\xFC\u015F\xFCk",Medium:"Orta",High:"Y\xFCksek",Critical:"Kritik",1:"D\xFC\u015F\xFCk",2:"Orta",3:"Y\xFCksek",4:"Kritik"}[t]||t.toString()}getStatusClass(t){return{A\u00E7\u0131k:"status-open",\u0130\u015Flemde:"status-progress","M\xFC\u015Fteri Bekleniyor":"status-waiting",\u00C7\u00F6z\u00FCld\u00FC:"status-resolved",Kapat\u0131ld\u0131:"status-closed"}[t]||""}getPriorityClass(t){return{D\u00FC\u015F\u00FCk:"priority-low",Orta:"priority-medium",Y\u00FCksek:"priority-high",Kritik:"priority-critical"}[t]||""}static{this.\u0275fac=function(l){return new(l||r)(F(R))}}static{this.\u0275cmp=T({type:r,selectors:[["app-customer-tickets"]],standalone:!0,features:[L],decls:48,vars:5,consts:[[1,"customer-tickets"],[1,"page-header"],[1,"header-left"],["routerLink","/customer/tickets/new",1,"btn-primary"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],[1,"filters-card"],[1,"filters-row"],[1,"search-box"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Talep ara...",3,"ngModelChange","ngModel"],[1,"filter-select"],[3,"ngModelChange","ngModel"],["value",""],["value","A\xE7\u0131k"],["value","\u0130\u015Flemde"],["value","\xC7\xF6z\xFCld\xFC"],["value","Kapat\u0131ld\u0131"],["value","D\xFC\u015F\xFCk"],["value","Orta"],["value","Y\xFCksek"],["value","Kritik"],[1,"btn-clear"],[1,"loading-container"],[1,"btn-clear",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"loading-spinner"],[1,"empty-state"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],[1,"btn-secondary",3,"click"],[1,"tickets-list"],[1,"ticket-card"],[1,"ticket-header"],[1,"ticket-info"],[1,"ticket-title"],[1,"ticket-meta"],[1,"ticket-id"],[1,"ticket-asset"],[1,"ticket-badges"],[1,"badge",3,"ngClass"],[1,"ticket-description"],[1,"ticket-footer"],[1,"ticket-dates"],["width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"btn-detail",3,"routerLink"],["points","9 18 15 12 9 6"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["points","12 6 12 12 16 14"]],template:function(l,i){l&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),o(4,"Destek Taleplerim"),n(),e(5,"p"),o(6,"T\xFCm destek taleplerinizi buradan takip edebilirsiniz."),n()(),e(7,"a",3),g(),e(8,"svg",4),d(9,"circle",5)(10,"line",6)(11,"line",7),n(),o(12," Yeni Talep "),n()(),k(),e(13,"div",8)(14,"div",9)(15,"div",10),g(),e(16,"svg",4),d(17,"circle",11)(18,"line",12),n(),k(),e(19,"input",13),b("ngModelChange",function(c){return y(i.searchQuery,c)||(i.searchQuery=c),c}),C("ngModelChange",function(){return i.applyFilters()}),n()(),e(20,"div",14)(21,"select",15),b("ngModelChange",function(c){return y(i.statusFilter,c)||(i.statusFilter=c),c}),C("ngModelChange",function(){return i.applyFilters()}),e(22,"option",16),o(23,"T\xFCm Durumlar"),n(),e(24,"option",17),o(25,"A\xE7\u0131k"),n(),e(26,"option",18),o(27,"\u0130\u015Flemde"),n(),e(28,"option",19),o(29,"\xC7\xF6z\xFCld\xFC"),n(),e(30,"option",20),o(31,"Kapat\u0131ld\u0131"),n()()(),e(32,"div",14)(33,"select",15),b("ngModelChange",function(c){return y(i.priorityFilter,c)||(i.priorityFilter=c),c}),C("ngModelChange",function(){return i.applyFilters()}),e(34,"option",16),o(35,"T\xFCm \xD6ncelikler"),n(),e(36,"option",21),o(37,"D\xFC\u015F\xFCk"),n(),e(38,"option",22),o(39,"Orta"),n(),e(40,"option",23),o(41,"Y\xFCksek"),n(),e(42,"option",24),o(43,"Kritik"),n()()(),u(44,U,5,0,"button",25),n()(),u(45,X,4,0,"div",26)(46,ee,6,1)(47,oe,3,0),n()),l&2&&(a(19),M("ngModel",i.searchQuery),a(2),M("ngModel",i.statusFilter),a(12),M("ngModel",i.priorityFilter),a(11),x(44,i.searchQuery||i.statusFilter||i.priorityFilter?44:-1),a(),x(45,i.isLoading?45:i.filteredTickets.length===0?46:47))},dependencies:[B,A,D,H,j,Q,Y,G,I,N,W,K],styles:[`.customer-tickets[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:25px;flex-wrap:wrap;gap:15px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:26px;font-weight:600;color:#1a1a2e;margin:0 0 6px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:14px;margin:0}.btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:12px 20px;background:linear-gradient(135deg,#1a365d,#2563eb);color:#fff;border:none;border-radius:10px;font-size:14px;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 15px #2563eb4d}.filters-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:25px;box-shadow:0 2px 8px #0000000f}.filters-row[_ngcontent-%COMP%]{display:flex;gap:15px;flex-wrap:wrap;align-items:center}.search-box[_ngcontent-%COMP%]{flex:1;min-width:200px;position:relative}.search-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af;stroke-linecap:round;stroke-linejoin:round}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px 10px 40px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;transition:all .2s}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 3px #2563eb1a}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.filter-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 35px 10px 12px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;background:#fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E") no-repeat right 12px center;cursor:pointer;transition:all .2s}.filter-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb}.btn-clear[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 15px;background:#f3f4f6;color:#6b7280;border:none;border-radius:8px;font-size:14px;cursor:pointer;transition:all .2s}.btn-clear[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round}.btn-clear[_ngcontent-%COMP%]:hover{background:#e5e7eb;color:#374151}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;background:#fff;border-radius:12px}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e9ecef;border-top-color:#2563eb;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#6c757d}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000f}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#dee2e6;margin-bottom:15px;stroke-linecap:round;stroke-linejoin:round}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;color:#1a1a2e;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:#f3f4f6;color:#374151;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.empty-state[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.tickets-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.ticket-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000000f;transition:all .2s;border-left:4px solid transparent}.ticket-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 15px #0000001a;border-left-color:#2563eb}.ticket-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:15px;margin-bottom:12px}.ticket-info[_ngcontent-%COMP%]{flex:1;min-width:0}.ticket-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a1a2e;margin:0 0 6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ticket-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:13px;color:#6c757d}.ticket-meta[_ngcontent-%COMP%]   .ticket-id[_ngcontent-%COMP%]{font-weight:500}.ticket-meta[_ngcontent-%COMP%]   .ticket-asset[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.ticket-meta[_ngcontent-%COMP%]   .ticket-asset[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round}.ticket-badges[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:20px;font-size:12px;font-weight:500}.status-open[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.status-progress[_ngcontent-%COMP%]{background:#f97316;color:#fff;border:1px solid #ea580c}.status-waiting[_ngcontent-%COMP%]{background:#fef9c3;color:#854d0e;border:1px solid #fef08a}.status-resolved[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.status-closed[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:1px solid #e2e8f0}.priority-low[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.priority-medium[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.priority-high[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.priority-critical[_ngcontent-%COMP%]{background:#721c24;color:#fff}.ticket-description[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;margin:0 0 15px;line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.ticket-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:15px;padding-top:15px;border-top:1px solid #f1f3f4}.ticket-dates[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px;font-size:12px;color:#9ca3af}.ticket-dates[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.ticket-dates[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round}.btn-detail[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;padding:8px 16px;background:#e0f2fe;color:#2563eb;border-radius:8px;font-size:13px;font-weight:500;text-decoration:none;transition:all .2s}.btn-detail[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke-linecap:round;stroke-linejoin:round}.btn-detail[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{text-align:center;justify-content:center}.filters-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.filter-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.ticket-header[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.ticket-badges[_ngcontent-%COMP%]{align-self:flex-start}.ticket-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.btn-detail[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px}.ticket-card[_ngcontent-%COMP%]{padding:15px}.ticket-dates[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}`]})}}return r})();export{me as CustomerTicketsComponent};
