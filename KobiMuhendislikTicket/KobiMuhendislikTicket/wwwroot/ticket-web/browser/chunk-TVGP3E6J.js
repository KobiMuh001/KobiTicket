import{a as rt}from"./chunk-MY7ZNZMQ.js";import"./chunk-IUZX7AJ5.js";import{a as at}from"./chunk-42QRHXUZ.js";import{a as st}from"./chunk-CSZMPA4G.js";import{b as q,c as U,f as J,h as Q,i as X,j as Z,k as tt,l as et,m as it,r as nt}from"./chunk-OE7SZP54.js";import{a as ot}from"./chunk-2HBRWNP7.js";import{c as R,e as H,f as $,i as Y}from"./chunk-BJ5XBHAQ.js";import{Bb as E,Fa as o,Ga as P,R as K,Sa as C,Ua as d,Va as w,Wa as N,Xa as F,ac as G,bc as W,cb as n,d as V,db as r,dc as j,ea as D,eb as h,hb as I,ib as f,j as L,jb as p,ma as y,na as k,oa as _,pa as x,qb as s,rb as u,s as z,sb as b,ub as B,vb as M,wb as O,xb as S,zb as A}from"./chunk-A5NGIQSU.js";var lt=l=>["/admin/tickets",l],ct=l=>["/admin/tickets",l,"edit"];function ut(l,g){l&1&&(n(0,"button",29),_(),n(1,"svg",15),h(2,"line",30)(3,"polyline",31),r()())}function ft(l,g){if(l&1&&(n(0,"option",32),s(1),r()),l&2){let t=g.$implicit;d("value",t.value),o(),u(t.label)}}function ht(l,g){if(l&1&&(n(0,"option",32),s(1),r()),l&2){let t=g.$implicit;d("value",t.value),o(),u(t.label)}}function _t(l,g){if(l&1&&(n(0,"option",32),s(1),r()),l&2){let t=g.$implicit;d("value",t),o(),u(t)}}function yt(l,g){if(l&1){let t=I();n(0,"button",33),f("click",function(){y(t);let e=p();return k(e.clearFilters())}),_(),n(1,"svg",34),h(2,"line",35)(3,"line",36),r(),s(4," Temizle "),r()}}function kt(l,g){l&1&&(n(0,"div",37),h(1,"div",38),n(2,"p"),s(3,"Talepler y\xFCkleniyor..."),r()())}function Ct(l,g){if(l&1&&(n(0,"div",39),_(),n(1,"svg",15),h(2,"circle",40)(3,"line",41)(4,"line",42),r(),s(5),r()),l&2){let t=p();o(5),b(" ",t.errorMessage," ")}}function vt(l,g){l&1&&(n(0,"div",43),_(),n(1,"svg",44),h(2,"path",45)(3,"polyline",46),r(),x(),n(4,"h3"),s(5,"Talep bulunamad\u0131"),r(),n(6,"p"),s(7,"Arama kriterlerinize uygun talep bulunmuyor."),r()())}function bt(l,g){if(l&1&&(n(0,"span",67),s(1),_(),n(2,"svg",68),h(3,"path",69)(4,"path",70),r()()),l&2){let t=p().$implicit,i=p(2);o(),b("",i.getTicketNotificationCount(t.id)," ")}}function xt(l,g){if(l&1){let t=I();n(0,"tr",54),f("click",function(){let e=y(t).$implicit,a=p(2);return k(a.onTicketSelect(e.id))}),n(1,"td")(2,"div",55)(3,"span",56),s(4),r(),C(5,bt,5,1,"span",57),r()(),n(6,"td")(7,"div",58)(8,"span"),s(9),r()()(),n(10,"td"),s(11),r(),n(12,"td"),s(13),r(),n(14,"td")(15,"span",59),s(16),r()(),n(17,"td")(18,"span",59),s(19),r()(),n(20,"td"),s(21),r(),n(22,"td")(23,"div",60)(24,"a",61),f("click",function(e){return y(t),k(e.stopPropagation())}),_(),n(25,"svg",9),h(26,"path",62)(27,"circle",63),r()(),x(),n(28,"a",64),f("click",function(e){return y(t),k(e.stopPropagation())}),_(),n(29,"svg",9),h(30,"path",65)(31,"path",66),r()()()()()}if(l&2){let t=g.$implicit,i=p(2);N("has-notification",i.getTicketNotificationCount(t.id)>0),o(4),u(i.formatTicketId(t.id,t.ticketCode)),o(),d("ngIf",i.getTicketNotificationCount(t.id)>0),o(4),u(t.title),o(2),u(t.tenantName||"-"),o(2),u(t.productName||t.assetName||"-"),o(2),F("badge--"+i.getStatusClass(t.status)),w("background-color",i.getStatusColor(t.status))("color",i.getStatusColor(t.status)?"#fff":null),o(),b(" ",i.getStatusText(t.status)," "),o(2),F("badge--"+i.getPriorityClass(t.priority)),w("background-color",i.getPriorityColor(t.priority))("color",i.getPriorityColor(t.priority)?"#fff":null),o(),b(" ",i.getPriorityText(t.priority)," "),o(2),u(i.formatDate(t.createdDate)),o(3),d("routerLink",E(24,lt,t.id)),o(4),d("routerLink",E(26,ct,t.id))}}function Pt(l,g){if(l&1&&(n(0,"span",67),s(1),r()),l&2){let t=p().$implicit,i=p(2);o(),u(i.getTicketNotificationCount(t.id))}}function Mt(l,g){if(l&1){let t=I();n(0,"div",71),f("click",function(){let e=y(t).$implicit,a=p(2);return k(a.onTicketSelect(e.id))}),n(1,"div",72)(2,"span",56),s(3),r(),C(4,Pt,2,1,"span",57),r(),n(5,"div",73),s(6),r(),n(7,"div",74)(8,"div",75)(9,"span",76),s(10,"M\xFC\u015Fteri"),r(),n(11,"span",77),s(12),r()(),n(13,"div",75)(14,"span",76),s(15,"Varl\u0131k"),r(),n(16,"span",77),s(17),r()(),n(18,"div",75)(19,"span",76),s(20,"Durum"),r(),n(21,"span",59),s(22),r()(),n(23,"div",75)(24,"span",76),s(25,"\xD6ncelik"),r(),n(26,"span",59),s(27),r()(),n(28,"div",75)(29,"span",76),s(30,"Tarih"),r(),n(31,"span",77),s(32),r()()(),n(33,"div",78)(34,"a",61),f("click",function(e){return y(t),k(e.stopPropagation())}),_(),n(35,"svg",9),h(36,"path",62)(37,"circle",63),r()(),x(),n(38,"a",64),f("click",function(e){return y(t),k(e.stopPropagation())}),_(),n(39,"svg",9),h(40,"path",65)(41,"path",66),r()()()()}if(l&2){let t=g.$implicit,i=p(2);N("has-notification",i.getTicketNotificationCount(t.id)>0),o(3),u(i.formatTicketId(t.id,t.ticketCode)),o(),d("ngIf",i.getTicketNotificationCount(t.id)>0),o(2),u(t.title),o(6),u(t.tenantName||"-"),o(5),u(t.productName||t.assetName||"-"),o(4),F("badge--"+i.getStatusClass(t.status)),w("background-color",i.getStatusColor(t.status))("color",i.getStatusColor(t.status)?"#fff":null),o(),b(" ",i.getStatusText(t.status)," "),o(4),F("badge--"+i.getPriorityClass(t.priority)),w("background-color",i.getPriorityColor(t.priority))("color",i.getPriorityColor(t.priority)?"#fff":null),o(),b(" ",i.getPriorityText(t.priority)," "),o(5),u(i.formatDate(t.createdDate)),o(2),d("routerLink",E(24,lt,t.id)),o(4),d("routerLink",E(26,ct,t.id))}}function Ot(l,g){if(l&1){let t=I();n(0,"div",79)(1,"button",80),f("click",function(){y(t);let e=p(2);return k(e.previousPage())}),_(),n(2,"svg",34),h(3,"polyline",81),r(),s(4," \xD6nceki "),r(),x(),n(5,"div",82)(6,"input",83),S("ngModelChange",function(e){y(t);let a=p(2);return O(a.currentPage,e)||(a.currentPage=e),k(e)}),f("change",function(){y(t);let e=p(2);return k(e.onPageChange(e.currentPage))}),r(),n(7,"span",84),s(8),r()(),n(9,"button",80),f("click",function(){y(t);let e=p(2);return k(e.nextPage())}),s(10," Sonraki "),_(),n(11,"svg",34),h(12,"polyline",85),r()()()}if(l&2){let t=p(2);o(),d("disabled",t.currentPage===1),o(5),M("ngModel",t.currentPage),d("max",t.totalPages),o(2),b("/ ",t.totalPages,""),o(),d("disabled",t.currentPage===t.totalPages)}}function St(l,g){if(l&1&&(n(0,"div",47)(1,"div",48)(2,"table",49)(3,"thead")(4,"tr")(5,"th"),s(6,"ID"),r(),n(7,"th"),s(8,"Ba\u015Fl\u0131k"),r(),n(9,"th"),s(10,"M\xFC\u015Fteri"),r(),n(11,"th"),s(12,"Varl\u0131k"),r(),n(13,"th"),s(14,"Durum"),r(),n(15,"th"),s(16,"\xD6ncelik"),r(),n(17,"th"),s(18,"Olu\u015Fturma Tarihi"),r(),n(19,"th"),s(20,"\u0130\u015Flemler"),r()()(),n(21,"tbody"),C(22,xt,32,28,"tr",50),r()()(),n(23,"div",51),C(24,Mt,42,28,"div",52),r(),C(25,Ot,13,5,"div",53),r()),l&2){let t=p();o(22),d("ngForOf",t.filteredTickets)("ngForTrackBy",t.trackByTicketId),o(2),d("ngForOf",t.filteredTickets)("ngForTrackBy",t.trackByTicketId),o(),d("ngIf",t.totalPages>1)}}var Gt=(()=>{class l{constructor(t,i,e,a,c,m){this.dashboardService=t,this.notificationService=i,this.staffService=e,this.router=a,this.route=c,this.paramSvc=m,this.tickets=[],this.filteredTickets=[],this.allTicketsCache=null,this.isLoading=!0,this.errorMessage="",this.staffId=null,this.staffName="",this.currentPage=1,this.pageSize=20,this.totalCount=0,this.totalPages=1,this.searchTerm="",this.statusFilter="",this.priorityFilter="",this.customerFilter="",this.customers=[],this.statusOptions=[],this.priorityOptions=[],this.statusKeyOrder=["Open","Processing","WaitingForCustomer","Resolved","Closed"],this.priorityKeyOrder=["Low","Medium","High","Critical"],this.notifications=[],this.ticketNotifications=new Map,this.destroy$=new L}ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.staffId=+t.id,this.loadStaffName()),this.loadTickets(),this.subscribeToNotifications(),this.loadDynamicFilters()})}loadStaffName(){this.staffId&&this.staffService.getStaffById(this.staffId).subscribe({next:t=>{t.success&&t.data&&(this.staffName=t.data.fullName)}})}fetchAllTicketsPaginated(t=200){return V(this,null,function*(){let i=[],e=1;try{for(;;){let a=yield z(this.dashboardService.getAllTicketsPage(e,t,this.staffId||void 0)),c=a&&a.success&&a.data?a.data:a,m=[];if(c==null)break;c.items&&Array.isArray(c.items)?m=c.items:Array.isArray(c)&&(m=c),m.length&&i.push(...m);let v=c&&c.totalPages?c.totalPages:Math.ceil((c.totalCount??m.length)/t||1);if(!v||e>=v)break;e++}}catch(a){throw a}return i})}loadDynamicFilters(){this.paramSvc.getByGroup("TicketStatus").subscribe({next:t=>{let i=t.data||t||[];i=i.slice().sort((e,a)=>{let c=e.sortOrder??e.numericKey??null,m=a.sortOrder??a.numericKey??null;if(c!==null&&m!==null)return c-m;if(c!==null)return-1;if(m!==null)return 1;let v=this.statusKeyOrder.indexOf(e.key??e.Key??e.value??""),T=this.statusKeyOrder.indexOf(a.key??a.Key??a.value??"");return v-T}),this.statusOptions=i.map((e,a)=>({value:e.numericKey!=null?String(e.numericKey):"",label:e.numericKey!=null?e.value||e.key||e.description:"",key:e.numericKey??e.key,numericKey:e.numericKey??(typeof e.key=="number"?e.key:Number.isFinite(Number(e.key))?Number(e.key):null),color:e.numericKey!=null?e.value2??e.color??null:null}))},error:()=>{this.statusOptions=[]}}),this.paramSvc.getByGroup("TicketPriority").subscribe({next:t=>{let i=t.data||t||[];i=i.slice().sort((e,a)=>{let c=e.sortOrder??e.numericKey??null,m=a.sortOrder??a.numericKey??null;if(c!==null&&m!==null)return c-m;if(c!==null)return-1;if(m!==null)return 1;let v=this.priorityKeyOrder.indexOf(e.key??e.Key??e.value??""),T=this.priorityKeyOrder.indexOf(a.key??a.Key??a.value??"");return v-T}),this.priorityOptions=i.map((e,a)=>({value:e.numericKey!=null?String(e.numericKey):"",label:e.numericKey!=null?e.value||e.key||e.description:"",key:e.numericKey??e.key,numericKey:e.numericKey??(typeof e.key=="number"?e.key:Number.isFinite(Number(e.key))?Number(e.key):null),color:e.numericKey!=null?e.value2??e.color??null:null}))},error:()=>{this.priorityOptions=[]}})}subscribeToNotifications(){this.notificationService.notificationsList$.pipe(K(this.destroy$)).subscribe(t=>{this.notifications=t,this.updateTicketNotificationCounts()})}updateTicketNotificationCounts(){this.ticketNotifications.clear(),this.notifications.forEach(t=>{if(t.ticketId&&!t.isRead){let i=Number(t.ticketId),e=this.ticketNotifications.get(i)||0;this.ticketNotifications.set(i,e+1)}})}getTicketNotificationCount(t){return this.ticketNotifications.get(t)||0}onTicketSelect(t){this.notifications.filter(e=>e.ticketId&&Number(e.ticketId)===t&&!e.isRead).forEach(e=>{this.notificationService.markAsRead(e.id).subscribe({next:()=>{e.isRead=!0}})}),this.updateTicketNotificationCounts(),this.router.navigate(["/admin/tickets",t])}loadTickets(){if(this.isLoading=!0,!!(this.searchTerm||this.statusFilter||this.priorityFilter||this.customerFilter)){if(this.allTicketsCache){this.tickets=this.allTicketsCache,this.applyLocalFilteringAndPagination(),this.isLoading=!1;return}this.fetchAllTicketsPaginated().then(i=>{this.tickets=i||[],this.allTicketsCache=this.tickets,this.extractCustomers(),this.applyLocalFilteringAndPagination(),this.isLoading=!1}).catch(()=>{this.errorMessage="Ticketlar y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1});return}this.allTicketsCache=null,this.dashboardService.getAllTicketsPage(this.currentPage,this.pageSize,this.staffId||void 0).subscribe({next:i=>{let e=i&&i.success&&i.data?i.data:i;e.items?(this.tickets=e.items,this.totalCount=e.totalCount,this.totalPages=e.totalPages,this.extractCustomers(),this.filteredTickets=this.tickets):Array.isArray(e)&&(this.tickets=e,this.extractCustomers(),this.filteredTickets=e,this.totalCount=e.length,this.totalPages=Math.ceil(this.totalCount/this.pageSize)),this.isLoading=!1},error:()=>{this.errorMessage="Ticketlar y\xFCklenirken hata olu\u015Ftu.",this.isLoading=!1}})}extractCustomers(){let t=new Set;this.tickets.forEach(i=>{i.tenantName&&t.add(i.tenantName)}),this.customers=Array.from(t).sort()}onPageChange(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadTickets())}nextPage(){this.currentPage<this.totalPages&&this.onPageChange(this.currentPage+1)}previousPage(){this.currentPage>1&&this.onPageChange(this.currentPage-1)}applyFilters(){this.currentPage=1,this.loadTickets()}applyLocalFilteringAndPagination(){let t=this.normalizeForSearch(this.searchTerm||""),i=(this.tickets||[]).filter(a=>{let c=String(a.id??""),m=this.normalizeForSearch(a.title||""),v=this.normalizeForSearch(a.tenantName||""),T=this.normalizeForSearch(c),dt=!t||m.includes(t)||v.includes(t)||T.includes(t),mt=!this.statusFilter||a.status.toString()===this.statusFilter,gt=!this.priorityFilter||a.priority.toString()===this.priorityFilter,pt=!this.customerFilter||a.tenantName===this.customerFilter;return dt&&mt&&gt&&pt});i.sort((a,c)=>{let m=a.status===4||a.status===5,v=c.status===4||c.status===5;return m&&!v?1:!m&&v?-1:0}),this.totalCount=i.length,this.totalPages=Math.max(1,Math.ceil(this.totalCount/this.pageSize));let e=(this.currentPage-1)*this.pageSize;this.filteredTickets=i.slice(e,e+this.pageSize)}sortTickets(){this.filteredTickets.sort((t,i)=>{let e=t.status===4||t.status===5,a=i.status===4||i.status===5;return e&&!a?1:!e&&a?-1:0})}normalizeForSearch(t){try{return(t??"").toString().toLocaleLowerCase("tr").normalize("NFD").replace(/[\u0300-\u036f]/g,"")}catch{return(t??"").toString().toLowerCase()}}clearFilters(){this.searchTerm="",this.statusFilter="",this.priorityFilter="",this.customerFilter="",this.currentPage=1,this.loadTickets()}getStatusText(t){let i=this.statusOptions.find(a=>a.value===String(t));return i?i.label:{1:"A\xE7\u0131k",2:"\u0130\u015Flemde",3:"Beklemede",4:"\xC7\xF6z\xFCld\xFC",5:"Kapal\u0131"}[t]||"Bilinmiyor"}getStatusClass(t){return{1:"open",2:"in-progress",3:"waiting",4:"resolved",5:"closed"}[t]||"open"}getPriorityText(t){let i=this.priorityOptions.find(a=>a.value===String(t));return i?i.label:{1:"D\xFC\u015F\xFCk",2:"Orta",3:"Y\xFCksek",4:"Kritik"}[t]||"Bilinmiyor"}getPriorityClass(t){return{1:"low",2:"medium",3:"high",4:"critical"}[t]||"low"}trackByTicketId(t,i){return i?.id??t}getStatusColor(t){let i=Number(t);return this.statusOptions.find(a=>Number(a.value)===i||Number(a.key)===i||Number(a.numericKey)===i||String(a.value)===String(t)||String(a.key)===String(t)||a.label===t)?.color??null}getPriorityColor(t){let i=Number(t);return this.priorityOptions.find(a=>Number(a.value)===i||Number(a.key)===i||Number(a.numericKey)===i||String(a.value)===String(t)||String(a.key)===String(t)||a.label===t)?.color??null}formatDate(t){if(!t)return"-";try{let i=new Date(t);return isNaN(i.getTime())?"-":i.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"-"}}formatTicketId(t,i){if(i)return i;if(t==null)return"-";let e=typeof t=="number"?t:Number(t);return Number.isFinite(e)?`T${e.toString().padStart(5,"0")}`:String(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||l)(P(at),P(rt),P(st),P(H),P(R),P(ot))}}static{this.\u0275cmp=D({type:l,selectors:[["app-tickets"]],standalone:!0,features:[A],decls:44,vars:18,consts:[[1,"tickets-page"],[1,"page-header"],[1,"header-left"],[1,"title-with-actions",2,"display","flex","align-items","center","gap","1rem"],["class","btn btn-outline btn-icon btn-sm","routerLink","/admin/staff","title","Personel Listesine D\xF6n","style","padding: 0.5rem; border-radius: 50%;",4,"ngIf"],[1,"page-title"],[1,"page-subtitle"],[1,"header-right"],[1,"btn","btn-primary",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","23 4 23 10 17 10"],["d","M20.49 15a9 9 0 1 1-2.12-9.36L23 10"],[1,"filters-card"],[1,"filters-row"],[1,"search-box"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","placeholder","Talep ara...",3,"ngModelChange","input","ngModel"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-outline btn-sm",3,"click",4,"ngIf"],[1,"results-info"],["class","loading-container",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","tickets-table-card",4,"ngIf"],["routerLink","/admin/staff","title","Personel Listesine D\xF6n",1,"btn","btn-outline","btn-icon","btn-sm",2,"padding","0.5rem","border-radius","50%"],["x1","19","y1","12","x2","5","y2","12"],["points","12 19 5 12 12 5"],[3,"value"],[1,"btn","btn-outline","btn-sm",3,"click"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"loading-container"],[1,"spinner"],[1,"alert","alert-error"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"empty-state"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],[1,"tickets-table-card"],[1,"table-wrapper"],[1,"table"],[3,"has-notification","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"tickets-cards"],["class","ticket-card",3,"has-notification","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-controls",4,"ngIf"],[3,"click"],[1,"ticket-id-container"],[1,"ticket-code"],["class","notification-badge",4,"ngIf"],[1,"ticket-title"],[1,"badge"],[1,"actions"],["title","G\xF6r\xFCnt\xFCle",1,"action-btn",3,"click","routerLink"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["title","D\xFCzenle",1,"action-btn",3,"click","routerLink"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"notification-badge"],["width","14","height","14","viewBox","0 0 24 24","fill","currentColor","stroke","none"],["d","M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"],["d","M13.73 21a2 2 0 0 1-3.46 0"],[1,"ticket-card",3,"click"],[1,"ticket-card-header"],[1,"ticket-card-title"],[1,"ticket-card-meta"],[1,"meta-row"],[1,"meta-label"],[1,"meta-value"],[1,"ticket-card-actions"],[1,"pagination-controls"],[1,"btn","btn-outline","btn-sm",3,"click","disabled"],["points","15 18 9 12 15 6"],[1,"pagination-input"],["type","number","min","1",1,"page-input",3,"ngModelChange","change","ngModel","max"],[1,"page-info"],["points","9 18 15 12 9 6"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C(4,ut,4,0,"button",4),n(5,"div")(6,"h1",5),s(7),r(),n(8,"p",6),s(9),r()()()(),n(10,"div",7)(11,"button",8),f("click",function(){return e.loadTickets()}),_(),n(12,"svg",9),h(13,"polyline",10)(14,"path",11),r(),s(15," Yenile "),r()()(),x(),n(16,"div",12)(17,"div",13)(18,"div",14),_(),n(19,"svg",15),h(20,"circle",16)(21,"line",17),r(),x(),n(22,"input",18),S("ngModelChange",function(c){return O(e.searchTerm,c)||(e.searchTerm=c),c}),f("input",function(){return e.applyFilters()}),r()(),n(23,"div",19)(24,"select",20),S("ngModelChange",function(c){return O(e.statusFilter,c)||(e.statusFilter=c),c}),f("change",function(){return e.applyFilters()}),n(25,"option",21),s(26,"T\xFCm Durumlar"),r(),C(27,ft,2,2,"option",22),r(),n(28,"select",20),S("ngModelChange",function(c){return O(e.priorityFilter,c)||(e.priorityFilter=c),c}),f("change",function(){return e.applyFilters()}),n(29,"option",21),s(30,"T\xFCm \xD6ncelikler"),r(),C(31,ht,2,2,"option",22),r(),n(32,"select",20),S("ngModelChange",function(c){return O(e.customerFilter,c)||(e.customerFilter=c),c}),f("change",function(){return e.applyFilters()}),n(33,"option",21),s(34,"T\xFCm M\xFC\u015Fteriler"),r(),C(35,_t,2,2,"option",22),r(),C(36,yt,5,0,"button",23),r()(),n(37,"div",24)(38,"span"),s(39),r()()(),C(40,kt,4,0,"div",25)(41,Ct,6,1,"div",26)(42,vt,8,0,"div",27)(43,St,26,5,"div",28),r()),i&2&&(o(4),d("ngIf",e.staffId),o(3),u(e.staffId?(e.staffName||"Personel")+" - Talepler":"Talepler"),o(2),u(e.staffId?"Bu personele atanan t\xFCm destek taleplerini g\xF6r\xFCnt\xFCleyin.":"T\xFCm destek taleplerini g\xF6r\xFCnt\xFCleyin ve y\xF6netin."),o(13),M("ngModel",e.searchTerm),o(2),M("ngModel",e.statusFilter),o(3),d("ngForOf",e.statusOptions),o(),M("ngModel",e.priorityFilter),o(3),d("ngForOf",e.priorityOptions),o(),M("ngModel",e.customerFilter),o(3),d("ngForOf",e.customers),o(),d("ngIf",e.searchTerm||e.statusFilter||e.priorityFilter||e.customerFilter),o(3),B("Sayfa ",e.currentPage," / ",e.totalPages," (Toplamda ",e.totalCount," Talep)"),o(),d("ngIf",e.isLoading),o(),d("ngIf",!e.isLoading&&e.errorMessage),o(),d("ngIf",!e.isLoading&&!e.errorMessage&&e.filteredTickets.length===0),o(),d("ngIf",!e.isLoading&&!e.errorMessage&&e.filteredTickets.length>0))},dependencies:[j,G,W,Y,$,nt,Z,tt,q,Q,X,U,it,et,J],styles:[`.tickets-page[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.page-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1.5rem;gap:1rem;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-primary);margin:0 0 .25rem}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.filters-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-lg);padding:1.25rem;margin-bottom:1.5rem;box-shadow:var(--shadow-sm)}.filters-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-md);flex:1;min-width:250px}.search-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-light);flex-shrink:0}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:none;font-size:.875rem;color:var(--text-primary)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-light)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.filter-select[_ngcontent-%COMP%]{padding:.5rem 2rem .5rem .75rem;font-size:.875rem;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-secondary);color:var(--text-primary);cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236c757d' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .5rem center}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.75rem}.results-info[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-light);font-size:.875rem;color:var(--text-secondary)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;background:var(--bg-secondary);border-radius:var(--radius-lg)}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;border-radius:var(--radius-md)}.alert-error[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;background:var(--bg-secondary);border-radius:var(--radius-lg);text-align:center}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--text-primary);margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.tickets-table-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);overflow:hidden}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.tickets-cards[_ngcontent-%COMP%]{display:none;padding:1rem;gap:.75rem}.ticket-card[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);padding:.875rem;transition:all var(--transition-fast)}.ticket-card[_ngcontent-%COMP%]:hover{border-color:var(--primary-color)}.ticket-card.has-notification[_ngcontent-%COMP%]{border-left:4px solid #f44336;background:#fff8f8}.ticket-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:.625rem}.ticket-card-title[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:600;color:var(--text-primary);margin-bottom:.625rem;line-height:1.35}.ticket-card-meta[_ngcontent-%COMP%]{display:grid;gap:.45rem}.meta-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.meta-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem}.meta-value[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.8125rem;font-weight:500;text-align:right}.ticket-card-actions[_ngcontent-%COMP%]{margin-top:.75rem;display:flex;align-items:center;justify-content:flex-end;gap:.5rem}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.25rem;text-align:left}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);background:var(--bg-primary);white-space:nowrap}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary);border-bottom:1px solid var(--border-light);vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background var(--transition-fast)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--bg-primary)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.has-notification[_ngcontent-%COMP%]{background:#fff3e0;border-left:4px solid #f44336}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.has-notification[_ngcontent-%COMP%]:hover{background:#ffe0b2}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.ticket-id[_ngcontent-%COMP%]{font-weight:600;color:var(--primary-color);font-family:monospace}.ticket-id-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.ticket-code[_ngcontent-%COMP%]{display:inline-block;background:transparent;color:#0ea5e9;padding:0;border-radius:0;font-size:12px;font-weight:600;white-space:nowrap}.notification-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#f44336;color:#fff;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;white-space:nowrap;animation:_ngcontent-%COMP%_blink 1s infinite;box-shadow:0 0 8px #f44336cc}.notification-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;animation:_ngcontent-%COMP%_bellRing .5s ease-in-out 0s infinite}.ticket-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.ticket-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.ticket-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.375rem .75rem;font-size:.75rem;font-weight:500;border-radius:9999px;white-space:nowrap}.badge--open[_ngcontent-%COMP%]{background:#fff7e6;color:#d97706}.badge--in-progress[_ngcontent-%COMP%]{background:var(--primary-light);color:var(--primary-color)}.badge--waiting[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge--resolved[_ngcontent-%COMP%]{background:#e6f9ed;color:#059669}.badge--closed[_ngcontent-%COMP%]{background:var(--bg-primary);color:var(--text-secondary)}.priority[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;font-size:.75rem;font-weight:500}.priority[_ngcontent-%COMP%]   .priority-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.priority--low[_ngcontent-%COMP%]{color:var(--text-secondary)}.priority--low[_ngcontent-%COMP%]   .priority-dot[_ngcontent-%COMP%]{background:var(--text-light)}.priority--medium[_ngcontent-%COMP%]{color:var(--warning-color)}.priority--medium[_ngcontent-%COMP%]   .priority-dot[_ngcontent-%COMP%]{background:var(--warning-color)}.priority--high[_ngcontent-%COMP%]{color:#ea580c}.priority--high[_ngcontent-%COMP%]   .priority-dot[_ngcontent-%COMP%]{background:#ea580c}.priority--critical[_ngcontent-%COMP%]{color:var(--danger-color)}.priority--critical[_ngcontent-%COMP%]   .priority-dot[_ngcontent-%COMP%]{background:var(--danger-color)}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.action-btn[_ngcontent-%COMP%]:hover{background:var(--primary-light);border-color:var(--primary-color);color:var(--primary-color)}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:1.5rem;border-top:1px solid var(--border-color);background:var(--bg-secondary)}.pagination-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.pagination-input[_ngcontent-%COMP%]   .page-input[_ngcontent-%COMP%]{width:60px;padding:.5rem;border:1px solid var(--border-color);border-radius:var(--radius-md);text-align:center;font-size:.875rem;font-weight:500}.pagination-input[_ngcontent-%COMP%]   .page-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #3b82f61a}.pagination-input[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{color:var(--text-light);font-size:.875rem}@keyframes _ngcontent-%COMP%_blink{0%,49%{opacity:1}50%,to{opacity:.4}}@keyframes _ngcontent-%COMP%_bellRing{0%{transform:rotate(0)}15%{transform:rotate(15deg)}30%{transform:rotate(-15deg)}45%{transform:rotate(15deg)}60%{transform:rotate(-15deg)}75%{transform:rotate(15deg)}to{transform:rotate(0)}}@media (max-width: 768px){.filters-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.filter-group[_ngcontent-%COMP%]{flex-wrap:wrap}.table-wrapper[_ngcontent-%COMP%]{display:none}.tickets-cards[_ngcontent-%COMP%]{display:grid}.pagination-controls[_ngcontent-%COMP%]{flex-wrap:wrap}}`]})}}return l})();export{Gt as TicketsComponent};
