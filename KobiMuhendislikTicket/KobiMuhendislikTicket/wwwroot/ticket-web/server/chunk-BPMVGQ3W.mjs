import './polyfills.server.mjs';
import{a as ae}from"./chunk-QEJUSSIT.mjs";import{a as ie}from"./chunk-XNMZLO5Y.mjs";import{b as R,c as U,f as Z,h as $,i as q,j as J,k as Q,l as ee,m as te,r as ne}from"./chunk-7OSF6RCL.mjs";import"./chunk-2ZDBELSD.mjs";import{j as Y,k as X,n as K}from"./chunk-JGHH2ILE.mjs";import{Ab as G,Cb as D,Fa as s,Ga as z,Ta as v,Va as S,Wa as j,Xa as A,Ya as E,_a as x,aa as B,ab as W,bb as V,cb as F,db as n,eb as i,fb as C,ia as p,ib as w,ja as _,jb as g,ka as b,kb as d,la as k,oc as H,rb as l,sb as M,tb as y,ub as I,wb as P,xb as O,yb as T}from"./chunk-5C2672OW.mjs";import"./chunk-VVCT4QZE.mjs";var oe=(o,m)=>m.id,re=o=>["/admin/staff",o,"tickets"],le=o=>["/admin/staff",o];function ce(o,m){if(o&1){let e=w();n(0,"div",25),l(1),n(2,"button",28),g("click",function(){p(e);let t=d();return _(t.errorMessage="")}),l(3,"\xD7"),i()()}if(o&2){let e=d();s(),y(" ",e.errorMessage," ")}}function de(o,m){o&1&&(n(0,"div",26),C(1,"div",29),n(2,"p"),l(3,"Personel listesi y\xFCkleniyor..."),i()())}function me(o,m){if(o&1){let e=w();n(0,"div",30),b(),n(1,"svg",31),C(2,"path",32)(3,"circle",33)(4,"line",34)(5,"line",35),i(),k(),n(6,"h3"),l(7,"Personel Bulunamad\u0131"),i(),n(8,"p"),l(9,"Hen\xFCz kay\u0131tl\u0131 personel bulunmuyor veya arama kriterlerine uygun sonu\xE7 yok."),i(),n(10,"button",12),g("click",function(){p(e);let t=d(2);return _(t.openCreateModal())}),l(11,"\u0130lk Personeli Ekle"),i()()}}function fe(o,m){o&1&&(n(0,"span",48),l(1),i()),o&2&&(s(),M(m.assignedTickets))}function pe(o,m){o&1&&(n(0,"span",48),l(1,"0"),i())}function _e(o,m){if(o&1&&(n(0,"div",62),C(1,"div",63),i(),n(2,"span",64),l(3),i()),o&2){let e=m,a=d().$implicit;s(),j("width",e.assignedTickets/a.maxConcurrentTickets*100,"%"),A("warning",e.assignedTickets>=a.maxConcurrentTickets*.8)("full",e.assignedTickets>=a.maxConcurrentTickets),s(2),I("",e.assignedTickets,"/",a.maxConcurrentTickets,"")}}function ge(o,m){if(o&1&&(n(0,"span",64),l(1),i()),o&2){let e=d().$implicit;s(),y("0/",e.maxConcurrentTickets,"")}}function ue(o,m){if(o&1&&(n(0,"span",65),l(1),i()),o&2){let e=m,a=d(4);E(a.getAvailabilityClass(e)),s(),y(" ",e.isAvailable?"M\xFCsait":"Dolu"," ")}}function Ce(o,m){o&1&&(n(0,"span",66),l(1,"M\xFCsait"),i())}function xe(o,m){if(o&1){let e=w();n(0,"tr",41),g("click",function(){let t=p(e).$implicit,r=d(3);return _(r.goToStaffTickets(t.id))}),n(1,"td")(2,"div",42)(3,"div",43),l(4),i(),n(5,"div",44)(6,"span",45),l(7),i(),n(8,"span",46),l(9),i()()()(),n(10,"td"),l(11),i(),n(12,"td")(13,"span",47),l(14),i()(),n(15,"td"),v(16,fe,2,1,"span",48)(17,pe,2,0),i(),n(18,"td"),v(19,_e,4,8)(20,ge,2,1),i(),n(21,"td"),v(22,ue,2,3,"span",49)(23,Ce,2,0),i(),n(24,"td",50)(25,"a",51),g("click",function(t){return p(e),_(t.stopPropagation())}),b(),n(26,"svg",52),C(27,"path",53)(28,"path",54)(29,"path",55),i()(),k(),n(30,"a",56),g("click",function(t){return p(e),_(t.stopPropagation())}),b(),n(31,"svg",52),C(32,"path",57)(33,"path",58),i()(),k(),n(34,"button",59),g("click",function(t){let r=p(e).$implicit,c=d(3);return t.stopPropagation(),_(c.openDeleteModal(r))}),b(),n(35,"svg",52),C(36,"polyline",60)(37,"path",61),i()()()()}if(o&2){let e,a,t,r=m.$implicit,c=d(3);s(4),y(" ",r.fullName.charAt(0).toUpperCase()," "),s(3),M(r.fullName),s(2),M(r.email),s(2),M(r.department),s(2),E(c.getStatusClass(r.isActive)),s(),y(" ",r.isActive?"Aktif":"Pasif"," "),s(2),x(16,(e=c.getWorkload(r.id))?16:17,e),s(3),x(19,(a=c.getWorkload(r.id))?19:20,a),s(3),x(22,(t=c.getWorkload(r.id))?22:23,t),s(3),S("routerLink",D(12,re,r.id)),s(5),S("routerLink",D(14,le,r.id))}}function he(o,m){o&1&&(n(0,"span",48),l(1),i()),o&2&&(s(),M(m.assignedTickets))}function be(o,m){o&1&&(n(0,"span",48),l(1,"0"),i())}function ve(o,m){if(o&1&&(n(0,"span",64),l(1),i()),o&2){let e=d().$implicit;s(),I("",m.assignedTickets,"/",e.maxConcurrentTickets,"")}}function Se(o,m){if(o&1&&(n(0,"span",64),l(1),i()),o&2){let e=d().$implicit;s(),y("0/",e.maxConcurrentTickets,"")}}function Me(o,m){if(o&1&&(n(0,"span",65),l(1),i()),o&2){let e=m,a=d(4);E(a.getAvailabilityClass(e)),s(),y(" ",e.isAvailable?"M\xFCsait":"Dolu"," ")}}function ye(o,m){o&1&&(n(0,"span",66),l(1,"M\xFCsait"),i())}function ke(o,m){if(o&1){let e=w();n(0,"div",67),g("click",function(){let t=p(e).$implicit,r=d(3);return _(r.goToStaffTickets(t.id))}),n(1,"div",68)(2,"div",42)(3,"div",43),l(4),i(),n(5,"div",44)(6,"span",45),l(7),i(),n(8,"span",46),l(9),i()()(),n(10,"span",47),l(11),i()(),n(12,"div",69)(13,"div",70)(14,"span",71),l(15,"Departman"),i(),n(16,"span",72),l(17),i()(),n(18,"div",70)(19,"span",71),l(20,"Atanan Ticket"),i(),v(21,he,2,1,"span",48)(22,be,2,0),i(),n(23,"div",70)(24,"span",71),l(25,"Kapasite"),i(),v(26,ve,2,2,"span",64)(27,Se,2,1),i(),n(28,"div",70)(29,"span",71),l(30,"M\xFCsaitlik"),i(),v(31,Me,2,3,"span",49)(32,ye,2,0),i()(),n(33,"div",73)(34,"a",51),g("click",function(t){return p(e),_(t.stopPropagation())}),b(),n(35,"svg",52),C(36,"path",53)(37,"path",54)(38,"path",55),i()(),k(),n(39,"a",56),g("click",function(t){return p(e),_(t.stopPropagation())}),b(),n(40,"svg",52),C(41,"path",57)(42,"path",58),i()(),k(),n(43,"button",59),g("click",function(t){let r=p(e).$implicit,c=d(3);return t.stopPropagation(),_(c.openDeleteModal(r))}),b(),n(44,"svg",52),C(45,"polyline",60)(46,"path",61),i()()()()}if(o&2){let e,a,t,r=m.$implicit,c=d(3);s(4),y(" ",r.fullName.charAt(0).toUpperCase()," "),s(3),M(r.fullName),s(2),M(r.email),s(),E(c.getStatusClass(r.isActive)),s(),y(" ",r.isActive?"Aktif":"Pasif"," "),s(6),M(r.department),s(4),x(21,(e=c.getWorkload(r.id))?21:22,e),s(5),x(26,(a=c.getWorkload(r.id))?26:27,a),s(5),x(31,(t=c.getWorkload(r.id))?31:32,t),s(3),S("routerLink",D(12,re,r.id)),s(5),S("routerLink",D(14,le,r.id))}}function we(o,m){if(o&1){let e=w();n(0,"button",79),g("click",function(){let t=p(e).$implicit,r=d(4);return _(r.goToPage(t))}),l(1),i()}if(o&2){let e=m.$implicit,a=d(4);A("active",e===a.currentPage),s(),y(" ",e," ")}}function Pe(o,m){if(o&1){let e=w();n(0,"div",40)(1,"button",74),g("click",function(){p(e);let t=d(3);return _(t.goToPage(t.currentPage-1))}),b(),n(2,"svg",75),C(3,"polyline",76),i()(),V(4,we,2,3,"button",77,W),k(),n(6,"button",74),g("click",function(){p(e);let t=d(3);return _(t.goToPage(t.currentPage+1))}),b(),n(7,"svg",75),C(8,"polyline",78),i()()()}if(o&2){let e=d(3);s(),S("disabled",e.currentPage===1),s(3),F(e.getPageNumbers()),s(2),S("disabled",e.currentPage===e.totalPages)}}function Oe(o,m){if(o&1&&(n(0,"div",36)(1,"table",37)(2,"thead")(3,"tr")(4,"th"),l(5,"Personel"),i(),n(6,"th"),l(7,"Departman"),i(),n(8,"th"),l(9,"Durum"),i(),n(10,"th"),l(11,"Atanan Ticket"),i(),n(12,"th"),l(13,"Kapasite"),i(),n(14,"th"),l(15,"M\xFCsaitlik"),i(),n(16,"th"),l(17,"\u0130\u015Flemler"),i()()(),n(18,"tbody"),V(19,xe,38,16,"tr",null,oe),i()()(),n(21,"div",38),V(22,ke,47,16,"div",39,oe),i(),v(24,Pe,9,2,"div",40)),o&2){let e=d(2);s(19),F(e.filteredStaff),s(3),F(e.filteredStaff),s(2),x(24,e.totalPages>1?24:-1)}}function Te(o,m){if(o&1&&v(0,me,12,0,"div",30)(1,Oe,25,1),o&2){let e=d();x(0,e.filteredStaff.length===0?0:1)}}function Ee(o,m){if(o&1&&(n(0,"option",98),l(1),i()),o&2){let e=m.$implicit;S("value",e.id),s(),M(e.label)}}function Ve(o,m){o&1&&C(0,"span",104)}function Fe(o,m){if(o&1){let e=w();n(0,"div",80),g("click",function(){p(e);let t=d();return _(t.closeCreateModal())}),n(1,"div",81),g("click",function(t){return p(e),_(t.stopPropagation())}),n(2,"div",82)(3,"h2"),l(4,"Yeni Personel Ekle"),i(),n(5,"button",83),g("click",function(){p(e);let t=d();return _(t.closeCreateModal())}),l(6,"\xD7"),i()(),n(7,"div",84)(8,"div",85)(9,"label",86),l(10,"Ad Soyad *"),i(),n(11,"input",87),T("ngModelChange",function(t){p(e);let r=d();return O(r.newStaff.fullName,t)||(r.newStaff.fullName=t),_(t)}),i()(),n(12,"div",85)(13,"label",88),l(14,"E-posta *"),i(),n(15,"input",89),T("ngModelChange",function(t){p(e);let r=d();return O(r.newStaff.email,t)||(r.newStaff.email=t),_(t)}),i()(),n(16,"div",85)(17,"label",90),l(18,"\u015Eifre *"),i(),n(19,"input",91),T("ngModelChange",function(t){p(e);let r=d();return O(r.newStaff.password,t)||(r.newStaff.password=t),_(t)}),i(),n(20,"span",92),l(21,"Personel bu \u015Fifre ile sisteme giri\u015F yapacak"),i()(),n(22,"div",93)(23,"div",85)(24,"label",94),l(25,"Telefon"),i(),n(26,"input",95),g("input",function(t){p(e);let r=d();return _(r.formatPhoneNumber(t))}),i()(),n(27,"div",85)(28,"label",96),l(29,"Departman"),i(),n(30,"select",97),T("ngModelChange",function(t){p(e);let r=d();return O(r.newStaff.departmentId,t)||(r.newStaff.departmentId=t),_(t)}),V(31,Ee,2,2,"option",98,W),i()()(),n(33,"div",85)(34,"label",99),l(35,"Maksimum E\u015Fzamanl\u0131 Ticket"),i(),n(36,"input",100),T("ngModelChange",function(t){p(e);let r=d();return O(r.newStaff.maxConcurrentTickets,t)||(r.newStaff.maxConcurrentTickets=t),_(t)}),i(),n(37,"span",92),l(38,"Bu personel ayn\u0131 anda en fazla ka\xE7 ticket'a atanabilir?"),i()()(),n(39,"div",101)(40,"button",102),g("click",function(){p(e);let t=d();return _(t.closeCreateModal())}),l(41,"\u0130ptal"),i(),n(42,"button",103),g("click",function(){p(e);let t=d();return _(t.createStaff())}),v(43,Ve,1,0,"span",104),l(44," Kaydet "),i()()()()}if(o&2){let e=d();s(11),P("ngModel",e.newStaff.fullName),s(4),P("ngModel",e.newStaff.email),s(4),P("ngModel",e.newStaff.password),s(7),S("value",e.newStaff.phone),s(4),P("ngModel",e.newStaff.departmentId),s(),F(e.departmentOptions),s(5),P("ngModel",e.newStaff.maxConcurrentTickets),s(6),S("disabled",e.isSubmitting),s(),x(43,e.isSubmitting?43:-1)}}function De(o,m){o&1&&C(0,"span",104)}function Le(o,m){if(o&1){let e=w();n(0,"div",80),g("click",function(){p(e);let t=d();return _(t.closeDeleteModal())}),n(1,"div",105),g("click",function(t){return p(e),_(t.stopPropagation())}),n(2,"div",82)(3,"h2"),l(4,"Personeli Sil"),i(),n(5,"button",83),g("click",function(){p(e);let t=d();return _(t.closeDeleteModal())}),l(6,"\xD7"),i()(),n(7,"div",84)(8,"p",106)(9,"strong"),l(10),i(),l(11," adl\u0131 personeli silmek istedi\u011Finize emin misiniz? "),i(),n(12,"p",107),l(13,"Bu i\u015Flem geri al\u0131namaz."),i()(),n(14,"div",101)(15,"button",102),g("click",function(){p(e);let t=d();return _(t.closeDeleteModal())}),l(16,"\u0130ptal"),i(),n(17,"button",108),g("click",function(){p(e);let t=d();return _(t.confirmDelete())}),v(18,De,1,0,"span",104),l(19," Sil "),i()()()()}if(o&2){let e=d();s(10),M(e.staffToDelete==null?null:e.staffToDelete.fullName),s(7),S("disabled",e.isSubmitting),s(),x(18,e.isSubmitting?18:-1)}}var He=(()=>{class o{constructor(e,a,t){this.staffService=e,this.paramSvc=a,this.router=t,this.staffList=[],this.workloads=[],this.filteredStaff=[],this.isLoading=!0,this.errorMessage="",this.searchTerm="",this.activeFilter="all",this.showCreateModal=!1,this.showDeleteModal=!1,this.staffToDelete=null,this.isSubmitting=!1,this.newStaff={fullName:"",email:"",password:"",phone:"",departmentId:1,maxConcurrentTickets:10},this.defaultMaxConcurrentTickets=10,this.departmentOptions=[{id:1,label:"Teknik Destek"},{id:2,label:"Sat\u0131\u015F"},{id:3,label:"Muhasebe"},{id:4,label:"Y\xF6netim"},{id:5,label:"Di\u011Fer"}],this.currentPage=1,this.itemsPerPage=10,this.totalPages=1}goToStaffTickets(e){let a=typeof e=="number"?e:Number(e);Number.isFinite(a)&&this.router.navigate(["/admin/staff",a,"tickets"])}ngOnInit(){this.loadStaff(),this.loadWorkloads(),this.loadDefaultMaxConcurrentTickets(),this.loadDepartments()}loadDepartments(){this.paramSvc.getByGroup("Department").subscribe({next:e=>{let a=e?.data||e||[];if(Array.isArray(a)&&a.length){this.departmentOptions=a.map(t=>({id:Number(t.id??t.key??0)||0,label:(t.value??t.description??t.key??String(t.id)).toString()}));return}this.paramSvc.getByGroup("Departments").subscribe({next:t=>{let r=t?.data||t||[];Array.isArray(r)&&r.length&&(this.departmentOptions=r.map(c=>({id:Number(c.id??c.key??0)||0,label:(c.value??c.description??c.key??String(c.id)).toString()})))},error:()=>{}})},error:()=>{}})}loadDefaultMaxConcurrentTickets(){this.paramSvc.getByGroup("General").subscribe({next:e=>{let a=e?.data?.data||e?.data||e||[],t=Array.isArray(a)?a:[],r=f=>[f.key,f.Key,f.numericKey,f.value,f.value2,f.description,f.dataType,f.group].filter(u=>u!=null).map(u=>String(u).toLowerCase()).join(" "),c=["defaultticketlimit","default_ticket_limit","maxconcurrenttickets","max_concurrent_tickets","maxconcurrent","defaultticket","defaultticketlimit"],h=null;for(let f of t){let u=r(f);if(u){for(let N of c)if(u.indexOf(N)!==-1){h=f;break}if(h)break}}if(h||(h=t.find(f=>(f.key||f.Key||f.name||"").toString().toLowerCase()==="defaultticketlimit")),h){let f=h.value??h.value2??h.description??h.key??h.Key??"",u=Number(f);if(!Number.isNaN(u)&&u>0){this.defaultMaxConcurrentTickets=u,this.showCreateModal&&this.newStaff&&(this.newStaff.maxConcurrentTickets=u);return}}let se=t.filter(f=>f.description||f.value||f.value2);for(let f of se){let u=(f.description||f.value||f.value2||"").toString().toLowerCase();if(u.indexOf("ticket")!==-1&&(u.indexOf("limit")!==-1||u.indexOf("limiti")!==-1||u.indexOf("varsay\u0131lan")!==-1)){let N=f.value??f.value2??f.description??f.key??f.Key??"",L=Number(N);if(!Number.isNaN(L)&&L>0){this.defaultMaxConcurrentTickets=L,this.showCreateModal&&this.newStaff&&(this.newStaff.maxConcurrentTickets=L);break}}}},error:()=>{}})}loadStaff(){this.isLoading=!0,this.staffService.getAllStaff().subscribe({next:e=>{this.staffList=e.data||[],this.applyFilter(),this.isLoading=!1},error:()=>{this.errorMessage="Personel listesi y\xFCklenirken bir hata olu\u015Ftu.",this.isLoading=!1}})}loadWorkloads(){this.staffService.getStaffWorkloads().subscribe({next:e=>{this.workloads=e.data||[]},error:()=>{}})}getWorkload(e){let a=typeof e=="number"?e:Number(e);return this.workloads.find(t=>Number(t.id??0)===a)}applyFilter(){let e=this.staffList;if(this.activeFilter==="active"?e=e.filter(t=>t.isActive):this.activeFilter==="inactive"&&(e=e.filter(t=>!t.isActive)),this.searchTerm){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.fullName.toLowerCase().includes(t)||r.email.toLowerCase().includes(t)||r.department.toLowerCase().includes(t))}this.totalPages=Math.ceil(e.length/this.itemsPerPage);let a=(this.currentPage-1)*this.itemsPerPage;this.filteredStaff=e.slice(a,a+this.itemsPerPage)}onSearch(){this.currentPage=1,this.applyFilter()}onFilterChange(){this.currentPage=1,this.applyFilter()}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.applyFilter())}getPageNumbers(){let e=[],t=Math.max(1,this.currentPage-Math.floor(2.5)),r=Math.min(this.totalPages,t+5-1);r-t+1<5&&(t=Math.max(1,r-5+1));for(let c=t;c<=r;c++)e.push(c);return e}openCreateModal(){this.newStaff={fullName:"",email:"",password:"",phone:"",departmentId:this.departmentOptions&&this.departmentOptions.length?this.departmentOptions[0].id:1,maxConcurrentTickets:this.defaultMaxConcurrentTickets},this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}formatPhoneNumber(e){let a=(e.target.value||"").toString().replace(/\D/g,"").slice(0,11);if(a.length===10&&a[0]!=="0"&&(a="0"+a),a.length===0){this.newStaff.phone="";return}let t=a,r="";t.length>0&&(r+=t.substring(0,1)),t.length>1&&(r+=" ("+t.substring(1,Math.min(4,t.length))),t.length>4&&(r+=") "+t.substring(4,Math.min(7,t.length))),t.length>7&&(r+=" "+t.substring(7,Math.min(9,t.length))),t.length>9&&(r+=" "+t.substring(9,Math.min(11,t.length))),this.newStaff.phone=r;try{let c=e.target;if(c){c.value=r;let h=c.value.length;typeof c.setSelectionRange=="function"&&c.setSelectionRange(h,h)}}catch{}}createStaff(){if(!this.newStaff.fullName||!this.newStaff.email||!this.newStaff.password){this.errorMessage="L\xFCtfen ad soyad, e-posta ve \u015Fifre alanlar\u0131n\u0131 doldurun.";return}if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.newStaff.email)){this.errorMessage="L\xFCtfen ge\xE7erli bir e-posta adresi girin.";return}if(this.newStaff.password.length<6){this.errorMessage="\u015Eifre en az 6 karakter olmal\u0131d\u0131r.";return}let a=(this.newStaff.phone||"").toString().replace(/\D/g,"");if(a&&a.length!==11){this.errorMessage="L\xFCtfen ge\xE7erli ve eksiksiz bir telefon numaras\u0131 girin.";return}if(a&&a.length===11){let t=a;this.newStaff.phone=t.substring(0,1)+" ("+t.substring(1,4)+") "+t.substring(4,7)+" "+t.substring(7,9)+" "+t.substring(9,11)}this.isSubmitting=!0,this.staffService.createStaff(this.newStaff).subscribe({next:()=>{this.showCreateModal=!1,this.loadStaff(),this.loadWorkloads(),this.isSubmitting=!1},error:t=>{this.errorMessage=t.error?.message||"Personel olu\u015Fturulurken bir hata olu\u015Ftu.",this.isSubmitting=!1}})}openDeleteModal(e){this.staffToDelete=e,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.staffToDelete=null}confirmDelete(){this.staffToDelete&&(this.isSubmitting=!0,this.staffService.deleteStaff(this.staffToDelete.id).subscribe({next:()=>{this.showDeleteModal=!1,this.staffToDelete=null,this.loadStaff(),this.loadWorkloads(),this.isSubmitting=!1},error:e=>{this.errorMessage=e.error?.message||"Personel silinirken bir hata olu\u015Ftu.",this.isSubmitting=!1}}))}getStatusClass(e){return e?"status-active":"status-inactive"}getAvailabilityClass(e){return e?e.isAvailable?"available":"busy":""}static{this.\u0275fac=function(a){return new(a||o)(z(ae),z(ie),z(Y))}}static{this.\u0275cmp=B({type:o,selectors:[["app-staff"]],standalone:!0,features:[G],decls:39,vars:6,consts:[[1,"staff-page"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],[1,"header-actions"],["title","Yenile",1,"btn","btn-secondary",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],[1,"btn","btn-primary",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"filters-section"],[1,"search-box"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Ad, e-posta veya departman ara...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-group"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","inactive"],[1,"alert","alert-error"],[1,"loading-container"],[1,"modal-overlay"],[1,"alert-close",3,"click"],[1,"spinner"],[1,"empty-state"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["x1","19","y1","8","x2","19","y2","14"],["x1","22","y1","11","x2","16","y2","11"],[1,"table-container"],[1,"data-table"],[1,"staff-cards"],[1,"staff-card"],[1,"pagination"],[3,"click"],[1,"staff-info"],[1,"staff-avatar"],[1,"staff-details"],[1,"staff-name"],[1,"staff-email"],[1,"status-badge"],[1,"ticket-count"],[1,"availability-badge",3,"class"],[1,"actions"],["title","Ticketlar\u0131",1,"btn-icon",3,"click","routerLink"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M22 10V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v4h20z"],["d","M2 10v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4H2z"],["d","M2 14v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4H2z"],["title","D\xFCzenle",1,"btn-icon",3,"click","routerLink"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["title","Sil",1,"btn-icon","btn-danger",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"capacity-bar"],[1,"capacity-fill"],[1,"capacity-text"],[1,"availability-badge"],[1,"availability-badge","available"],[1,"staff-card",3,"click"],[1,"staff-card-header"],[1,"staff-card-meta"],[1,"meta-row"],[1,"meta-label"],[1,"meta-value"],[1,"staff-card-actions","actions"],[1,"page-btn",3,"click","disabled"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","15 18 9 12 15 6"],[1,"page-btn",3,"active"],["points","9 18 15 12 9 6"],[1,"page-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"form-group"],["for","fullName"],["type","text","id","fullName","placeholder","\xD6r: Ahmet Y\u0131lmaz",1,"form-input",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","placeholder","\xD6r: ahmet@kobimuhendislik.com",1,"form-input",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","placeholder","Personel giri\u015F \u015Fifresi",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-hint"],[1,"form-row"],["for","phone"],["type","text","id","phone","placeholder","0 (5XX) XXX XX XX",1,"form-input",3,"input","value"],["for","department"],["id","department",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["for","maxTickets"],["type","number","id","maxTickets","min","1","max","50",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"spinner-small"],[1,"modal","modal-sm",3,"click"],[1,"confirm-message"],[1,"warning-text"],[1,"btn","btn-danger",3,"click","disabled"]],template:function(a,t){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Personel"),i(),n(5,"p",4),l(6,"Teknik destek personelini y\xF6netin"),i()(),n(7,"div",5)(8,"button",6),g("click",function(){return t.loadStaff(),t.loadWorkloads()}),b(),n(9,"svg",7),C(10,"path",8)(11,"path",9)(12,"path",10)(13,"path",11),i(),l(14," Yenile "),i(),k(),n(15,"button",12),g("click",function(){return t.openCreateModal()}),b(),n(16,"svg",7),C(17,"line",13)(18,"line",14),i(),l(19," Yeni Personel "),i()()(),k(),n(20,"div",15)(21,"div",16),b(),n(22,"svg",7),C(23,"circle",17)(24,"path",18),i(),k(),n(25,"input",19),T("ngModelChange",function(c){return O(t.searchTerm,c)||(t.searchTerm=c),c}),g("input",function(){return t.onSearch()}),i()(),n(26,"div",20)(27,"select",21),T("ngModelChange",function(c){return O(t.activeFilter,c)||(t.activeFilter=c),c}),g("change",function(){return t.onFilterChange()}),n(28,"option",22),l(29,"T\xFCm\xFC"),i(),n(30,"option",23),l(31,"Aktif"),i(),n(32,"option",24),l(33,"Pasif"),i()()()(),v(34,ce,4,1,"div",25)(35,de,4,0,"div",26)(36,Te,2,1),i(),v(37,Fe,45,8,"div",27)(38,Le,20,3,"div",27)),a&2&&(s(25),P("ngModel",t.searchTerm),s(2),P("ngModel",t.activeFilter),s(7),x(34,t.errorMessage?34:-1),s(),x(35,t.isLoading?35:36),s(2),x(37,t.showCreateModal?37:-1),s(),x(38,t.showDeleteModal?38:-1))},dependencies:[H,K,X,ne,J,Q,R,$,q,U,te,ee,Z],styles:[".staff-page[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.page-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1.5rem;gap:1rem;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-primary);margin:0 0 .25rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1.25rem;border-radius:var(--radius-md);font-weight:500;font-size:.875rem;cursor:pointer;transition:all var(--transition-fast);border:none;text-decoration:none}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-primary);color:var(--text-primary);border:1px solid var(--border-color)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.btn-danger[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#b91c1c}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.filters-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:var(--bg-secondary);border-radius:var(--radius-lg);padding:1.25rem;margin-bottom:1.5rem;box-shadow:var(--shadow-sm);flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-md);flex:1;min-width:250px}.search-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-light);flex-shrink:0}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{flex:1;border:none;background:none;font-size:.875rem;color:var(--text-primary)}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-light)}.search-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.filter-select[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);color:var(--text-primary);font-size:.875rem;cursor:pointer}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;border-radius:var(--radius-md);margin-bottom:1rem}.alert-error[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]{margin-left:auto;background:none;border:none;font-size:1.25rem;cursor:pointer;color:inherit;opacity:.7}.alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]:hover{opacity:1}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;background:var(--bg-secondary);border-radius:var(--radius-lg)}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;background:var(--bg-secondary);border-radius:var(--radius-lg);text-align:center}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--text-light);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--text-primary);margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0 0 1.5rem}.table-container[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch}.staff-cards[_ngcontent-%COMP%]{display:none;gap:.75rem;padding:1rem}.staff-card[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);padding:.875rem}.staff-card-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:.75rem;margin-bottom:.75rem}.staff-card-meta[_ngcontent-%COMP%]{display:grid;gap:.45rem}.meta-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.meta-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.75rem}.meta-value[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.8125rem;font-weight:500;text-align:right;word-break:break-word}.staff-card-actions[_ngcontent-%COMP%]{margin-top:.75rem;justify-content:flex-end}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.25rem;text-align:left}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);background:var(--bg-primary);white-space:nowrap}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary);border-bottom:1px solid var(--border-light);vertical-align:middle}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background var(--transition-fast)}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--bg-primary)}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.staff-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.staff-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--primary-light);color:var(--primary-color);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1rem;flex-shrink:0}.staff-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.staff-details[_ngcontent-%COMP%]   .staff-name[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.staff-details[_ngcontent-%COMP%]   .staff-email[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500}.status-badge.status-active[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.status-badge.status-inactive[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.ticket-count[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary)}.capacity-bar[_ngcontent-%COMP%]{width:60px;height:6px;background:var(--border-color);border-radius:3px;overflow:hidden;display:inline-block;margin-right:.5rem}.capacity-bar[_ngcontent-%COMP%]   .capacity-fill[_ngcontent-%COMP%]{height:100%;background:var(--primary-color);border-radius:3px;transition:width .3s ease}.capacity-bar[_ngcontent-%COMP%]   .capacity-fill.warning[_ngcontent-%COMP%]{background:#f59e0b}.capacity-bar[_ngcontent-%COMP%]   .capacity-fill.full[_ngcontent-%COMP%]{background:#dc2626}.capacity-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.availability-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500}.availability-badge.available[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.availability-badge.busy[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast);text-decoration:none}.btn-icon[_ngcontent-%COMP%]:hover{background:var(--primary-light);border-color:var(--primary-color);color:var(--primary-color)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#fef2f2;border-color:#dc2626;color:#dc2626}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:1rem;background:var(--bg-secondary);border-radius:0 0 var(--radius-lg) var(--radius-lg);border-top:1px solid var(--border-light)}.page-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast);font-size:.875rem}.page-btn[_ngcontent-%COMP%]:hover:not(:disabled):not(.active){background:var(--primary-light);border-color:var(--primary-color);color:var(--primary-color)}.page-btn.active[_ngcontent-%COMP%]{background:var(--primary-color);border-color:var(--primary-color);color:#fff}.page-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}.modal[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-lg);width:100%;max-width:480px;box-shadow:var(--shadow-lg);animation:_ngcontent-%COMP%_slideUp .3s ease}.modal.modal-sm[_ngcontent-%COMP%]{max-width:400px}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.25rem 1.5rem;border-bottom:1px solid var(--border-light)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:var(--text-primary)}.modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);line-height:1}.modal-header[_ngcontent-%COMP%]   .modal-close[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-body[_ngcontent-%COMP%]   .confirm-message[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary)}.modal-body[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--text-secondary)}.modal-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:.75rem;padding:1rem 1.5rem;border-top:1px solid var(--border-light)}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--text-primary);margin-bottom:.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 480px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.9375rem;color:var(--text-primary);background:var(--bg-primary);transition:border-color var(--transition-fast)}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.form-input[_ngcontent-%COMP%]::placeholder, .form-select[_ngcontent-%COMP%]::placeholder{color:var(--text-light)}.form-select[_ngcontent-%COMP%]{cursor:pointer}.form-hint[_ngcontent-%COMP%]{display:block;margin-top:.375rem;font-size:.75rem;color:var(--text-light)}.spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite;display:inline-block}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.filters-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{min-width:100%}.table-container[_ngcontent-%COMP%]{display:none}.staff-cards[_ngcontent-%COMP%]{display:grid}.staff-card[_ngcontent-%COMP%]   .staff-avatar[_ngcontent-%COMP%]{width:36px;height:36px;font-size:.875rem}}"]})}}return o})();export{He as StaffComponent};
