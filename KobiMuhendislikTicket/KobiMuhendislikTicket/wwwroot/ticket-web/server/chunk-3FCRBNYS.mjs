import './polyfills.server.mjs';
import{a as j}from"./chunk-O7OTTCDM.mjs";import{a as F,b as B,c as L,f as A,i as z,j as N,k as K,r as Y}from"./chunk-RUBJBCOG.mjs";import"./chunk-2ZDBELSD.mjs";import{$a as v,Ma as x,Oa as _,Pa as M,Qa as I,V,Ya as o,Za as r,_a as y,ab as S,ba as p,bb as m,ca as g,cb as u,cc as O,da as b,db as l,dc as W,ea as T,fc as D,ib as E,jb as s,kb as w,ob as f,pb as C,qb as h,sb as P,xb as G,ya as c,za as k}from"./chunk-Q22LFSCO.mjs";import"./chunk-VVCT4QZE.mjs";function R(n,d){if(n&1){let e=m();v(0),o(1,"button",18),u("click",function(){p(e);let t=l();return g(t.newGroupMode=!0)}),b(),o(2,"svg",7),y(3,"line",19)(4,"line",20),r(),s(5," Yeni Grup "),r(),S()}}function H(n,d){if(n&1){let e=m();v(0),o(1,"input",21),h("ngModelChange",function(t){p(e);let a=l();return C(a.newGroupName,t)||(a.newGroupName=t),g(t)}),r(),o(2,"button",22),u("click",function(){p(e);let t=l();return g(t.addGroup())}),s(3,"Ekle"),r(),o(4,"button",23),u("click",function(){p(e);let t=l();return g(t.newGroupMode=!1)}),s(5,"\u0130ptal"),r(),S()}if(n&2){let e=l();c(),f("ngModel",e.newGroupName)}}function J(n,d){if(n&1){let e=m();o(0,"div",24),u("click",function(){p(e);let t=l();return g(t.cancelDelete())}),o(1,"div",25),u("click",function(t){return p(e),g(t.stopPropagation())}),o(2,"div",26)(3,"h3"),s(4,"Silme Onay\u0131"),r(),o(5,"button",27),u("click",function(){p(e);let t=l();return g(t.cancelDelete())}),s(6,"\xD7"),r()(),o(7,"div",28)(8,"p"),s(9,"Bu \xF6\u011Feyi silmek istedi\u011Finizden emin misiniz?"),r()(),o(10,"div",29)(11,"button",23),u("click",function(){p(e);let t=l();return g(t.cancelDelete())}),s(12,"\u0130ptal"),r(),o(13,"button",30),u("click",function(){p(e);let t=l();return g(t.confirmDelete())}),s(14,"Evet, Sil"),r()()()()}}function U(n,d){if(n&1){let e=m();o(0,"li",31),u("click",function(){let t=p(e).$implicit,a=l();return g(a.selectGroup(t))}),s(1),r()}if(n&2){let e=d.$implicit,i=l();I("active",e===i.selectedGroup),c(),w(e)}}function $(n,d){n&1&&(o(0,"div",32),s(1,"Y\xFCkleniyor..."),r())}function q(n,d){n&1&&(o(0,"th"),s(1,"Value2"),r())}function Q(n,d){if(n&1&&(o(0,"td"),s(1),r()),n&2){let e=l().$implicit;c(),w(e.value)}}function X(n,d){if(n&1){let e=m();o(0,"td")(1,"input",44),h("ngModelChange",function(t){p(e);let a=l().$implicit;return C(a.value,t)||(a.value=t),g(t)}),r()()}if(n&2){let e=l().$implicit;c(),f("ngModel",e.value)}}function Z(n,d){if(n&1&&y(0,"span",52),n&2){let e=l(3).$implicit;M("background",e.value2)}}function ee(n,d){if(n&1&&(o(0,"td",50),x(1,Z,1,2,"span",51),o(2,"span"),s(3),r()()),n&2){let e=l(2).$implicit;c(),_("ngIf",e.value2&&e.value2.startsWith("#")),c(2),w(e.value2)}}function te(n,d){if(n&1){let e=m();v(0),o(1,"input",54),h("ngModelChange",function(t){p(e);let a=l(3).$implicit;return C(a.value2,t)||(a.value2=t),g(t)}),r(),S()}if(n&2){let e=l(3).$implicit;c(),f("ngModel",e.value2)}}function ne(n,d){if(n&1){let e=m();o(0,"input",44),h("ngModelChange",function(t){p(e);let a=l(3).$implicit;return C(a.value2,t)||(a.value2=t),g(t)}),r()}if(n&2){let e=l(3).$implicit;f("ngModel",e.value2)}}function ie(n,d){if(n&1&&(o(0,"td"),x(1,te,2,1,"ng-container",53)(2,ne,1,1,"ng-template",null,0,G),r()),n&2){let e=E(3),i=l(4);c(),_("ngIf",i.colorInputSupported)("ngIfElse",e)}}function oe(n,d){if(n&1&&(v(0),x(1,ee,4,2,"td",49)(2,ie,4,2,"td",10),S()),n&2){let e=l().$implicit,i=l(2);c(),_("ngIf",!i.editing[e.id]),c(),_("ngIf",i.editing[e.id])}}function re(n,d){if(n&1&&(o(0,"td"),s(1),r()),n&2){let e=l().$implicit;c(),w(e.description)}}function ae(n,d){if(n&1){let e=m();o(0,"td")(1,"input",44),h("ngModelChange",function(t){p(e);let a=l().$implicit;return C(a.description,t)||(a.description=t),g(t)}),r()()}if(n&2){let e=l().$implicit;c(),f("ngModel",e.description)}}function le(n,d){if(n&1&&(o(0,"td"),s(1),r()),n&2){let e=l().$implicit;c(),w(e.dataType)}}function ce(n,d){if(n&1){let e=m();o(0,"td")(1,"input",44),h("ngModelChange",function(t){p(e);let a=l().$implicit;return C(a.dataType,t)||(a.dataType=t),g(t)}),r()()}if(n&2){let e=l().$implicit;c(),f("ngModel",e.dataType)}}function se(n,d){if(n&1&&(o(0,"td"),s(1),r()),n&2){let e=l().$implicit;c(),w(e.isActive?"Evet":"Hay\u0131r")}}function de(n,d){if(n&1){let e=m();o(0,"td")(1,"input",55),h("ngModelChange",function(t){p(e);let a=l().$implicit;return C(a.isActive,t)||(a.isActive=t),g(t)}),r()()}if(n&2){let e=l().$implicit;c(),f("ngModel",e.isActive)}}function _e(n,d){if(n&1){let e=m();o(0,"button",23),u("click",function(){p(e);let t=l().$implicit,a=l(2);return g(a.startEdit(t.id))}),s(1,"D\xFCzenle"),r()}}function pe(n,d){if(n&1){let e=m();o(0,"button",22),u("click",function(){p(e);let t=l().$implicit,a=l(2);return g(a.saveItem(t))}),s(1,"Kaydet"),r()}}function ge(n,d){if(n&1){let e=m();o(0,"button",23),u("click",function(){p(e);let t=l().$implicit,a=l(2);return g(a.cancelEdit(t.id))}),s(1,"\u0130ptal"),r()}}function me(n,d){if(n&1){let e=m();o(0,"tr")(1,"td"),s(2),r(),x(3,Q,2,1,"td",10)(4,X,2,1,"td",10)(5,oe,3,2,"ng-container",10)(6,re,2,1,"td",10)(7,ae,2,1,"td",10)(8,le,2,1,"td",10)(9,ce,2,1,"td",10)(10,se,2,1,"td",10)(11,de,2,1,"td",10),o(12,"td",46),x(13,_e,2,0,"button",47)(14,pe,2,0,"button",48)(15,ge,2,0,"button",47),o(16,"button",30),u("click",function(){let t=p(e).$implicit,a=l(2);return g(a.deleteItem(t.id))}),s(17,"Sil"),r()()()}if(n&2){let e=d.$implicit,i=l(2);c(2),w(e.key),c(),_("ngIf",!i.editing[e.id]),c(),_("ngIf",i.editing[e.id]),c(),_("ngIf",i.selectedGroup==="TicketPriority"||i.selectedGroup==="TicketStatus"),c(),_("ngIf",!i.editing[e.id]),c(),_("ngIf",i.editing[e.id]),c(),_("ngIf",!i.editing[e.id]),c(),_("ngIf",i.editing[e.id]),c(),_("ngIf",!i.editing[e.id]),c(),_("ngIf",i.editing[e.id]),c(2),_("ngIf",!i.editing[e.id]),c(),_("ngIf",i.editing[e.id]),c(),_("ngIf",i.editing[e.id])}}function ue(n,d){if(n&1){let e=m();o(0,"input",58),h("ngModelChange",function(t){p(e);let a=l(3);return C(a.newValue2,t)||(a.newValue2=t),g(t)}),r()}if(n&2){let e=l(3);f("ngModel",e.newValue2)}}function xe(n,d){if(n&1&&y(0,"span",52),n&2){let e=l(3);M("background",e.newValue2)}}function fe(n,d){if(n&1){let e=m();o(0,"div",40)(1,"input",56),h("ngModelChange",function(t){p(e);let a=l(2);return C(a.newValue2,t)||(a.newValue2=t),g(t)}),r(),x(2,ue,1,1,"input",57)(3,xe,1,2,"span",51),r()}if(n&2){let e=l(2);c(),f("ngModel",e.newValue2),c(),_("ngIf",e.colorInputSupported),c(),_("ngIf",e.newValue2&&e.newValue2.startsWith("#"))}}function Ce(n,d){if(n&1&&(o(0,"option",59),s(1),r()),n&2){let e=d.$implicit;_("value",e),c(),w(e)}}function he(n,d){if(n&1){let e=m();o(0,"div")(1,"div",33)(2,"table",34)(3,"thead")(4,"tr")(5,"th"),s(6,"Key"),r(),o(7,"th"),s(8,"Value"),r(),x(9,q,2,0,"th",10),o(10,"th"),s(11,"Description"),r(),o(12,"th"),s(13,"DataType"),r(),o(14,"th"),s(15,"Active"),r(),o(16,"th",35),s(17,"Actions"),r()()(),o(18,"tbody"),x(19,me,18,13,"tr",36),r()()(),o(20,"div",37)(21,"h3"),s(22,"Yeni Parametre Olu\u015Ftur"),r(),o(23,"div",38)(24,"input",39),h("ngModelChange",function(t){p(e);let a=l();return C(a.newKey,t)||(a.newKey=t),g(t)}),r(),o(25,"div",40)(26,"input",41),h("ngModelChange",function(t){p(e);let a=l();return C(a.newValue,t)||(a.newValue=t),g(t)}),r()(),x(27,fe,4,3,"div",42),o(28,"input",43),h("ngModelChange",function(t){p(e);let a=l();return C(a.newDescription,t)||(a.newDescription=t),g(t)}),r(),o(29,"select",44),h("ngModelChange",function(t){p(e);let a=l();return C(a.newDataType,t)||(a.newDataType=t),g(t)}),x(30,Ce,2,2,"option",45),r(),o(31,"button",22),u("click",function(){p(e);let t=l();return g(t.createItem())}),s(32,"Olu\u015Ftur"),r()()()()}if(n&2){let e=l();c(9),_("ngIf",e.selectedGroup==="TicketPriority"||e.selectedGroup==="TicketStatus"),c(10),_("ngForOf",e.items),c(5),f("ngModel",e.newKey),c(2),f("ngModel",e.newValue),c(),_("ngIf",e.selectedGroup==="TicketPriority"||e.selectedGroup==="TicketStatus"),c(),f("ngModel",e.newDescription),c(),f("ngModel",e.newDataType),c(),_("ngForOf",e.availableDataTypes)}}var Ve=(()=>{class n{constructor(e){this.svc=e,this.groups=[],this.selectedGroup="",this.items=[],this.loading=!1,this.editing={},this.showDeleteModal=!1,this.deletingItemId=null,this.newKey="",this.newValue="",this.newValue2="",this.newDescription="",this.newGroupMode=!1,this.newGroupName="",this.availableDataTypes=["String","Int","Boolean","Json"],this.newDataType="String",this.colorInputSupported=!1}ngOnInit(){try{let e=document.createElement("input");e.setAttribute("type","color"),this.colorInputSupported=e.type==="color"}catch{this.colorInputSupported=!1}this.loadGroups()}loadGroups(){this.svc.getGroups().subscribe({next:e=>{this.groups=e.data||e||[],!this.selectedGroup&&this.groups&&this.groups.length&&(this.selectedGroup=this.groups[0]),this.selectedGroup&&this.loadGroup(this.selectedGroup)},error:()=>{this.groups=["Department","TicketPriority","TicketStatus","UserRole","General"],this.selectedGroup||(this.selectedGroup=this.groups[0]),this.loadGroup(this.selectedGroup)}})}selectGroup(e){this.selectedGroup=e,this.loadGroup(e)}loadGroup(e){this.loading=!0,this.items=[],this.svc.getByGroup(e).subscribe({next:i=>{this.items=i.data||i,this.loading=!1},error:()=>{this.loading=!1}})}startEdit(e){this.editing[e]=!0}cancelEdit(e){this.editing[e]=!1,this.loadGroup(this.selectedGroup)}saveItem(e){let i={value:e.value,description:e.description,isActive:e.isActive,dataType:e.dataType};(this.selectedGroup==="TicketPriority"||this.selectedGroup==="TicketStatus")&&(i.value2=e.value2),this.svc.update(e.id,i).subscribe({next:()=>{this.editing[e.id]=!1},error:t=>{alert(t?.error?.message||"G\xFCncelleme ba\u015Far\u0131s\u0131z")}})}deleteItem(e){this.deletingItemId=e,this.showDeleteModal=!0}confirmDelete(){if(this.deletingItemId===null)return;let e=this.deletingItemId;this.svc.delete(e).subscribe({next:()=>{this.showDeleteModal=!1,this.deletingItemId=null,this.loadGroup(this.selectedGroup)},error:()=>{this.showDeleteModal=!1,this.deletingItemId=null,alert("Silme ba\u015Far\u0131s\u0131z")}})}cancelDelete(){this.showDeleteModal=!1,this.deletingItemId=null}createItem(){if(!this.newKey.trim())return alert("Key giriniz");let i=(this.items&&this.items.length?Math.max(...this.items.map(a=>a.sortOrder??0)):0)+1,t={group:this.selectedGroup,key:this.newKey.trim(),value:this.newValue.trim(),description:this.newDescription.trim(),isActive:!0,dataType:this.newDataType,sortOrder:i};(this.selectedGroup==="TicketPriority"||this.selectedGroup==="TicketStatus")&&(t.value2=this.newValue2?.trim()),this.svc.create(t).subscribe({next:()=>{this.newKey="",this.newValue="",this.newValue2="",this.newDescription="",this.loadGroups()},error:a=>alert(a?.error?.message||"Olu\u015Fturma ba\u015Far\u0131s\u0131z")})}addGroup(){let e=this.newGroupName?.trim();if(!e){alert("Grup ad\u0131 giriniz");return}this.groups.includes(e)||(this.groups=[e,...this.groups]),this.newGroupName="",this.newGroupMode=!1,this.selectGroup(e)}static{this.\u0275fac=function(i){return new(i||n)(k(j))}}static{this.\u0275cmp=V({type:n,selectors:[["app-admin-settings"]],standalone:!0,features:[P],decls:24,vars:7,consts:[["textValue2Edit",""],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],[1,"header-actions"],["title","Yenile",1,"btn","btn-secondary",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],[4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"settings-layout"],[1,"settings-sidebar"],[3,"active","click",4,"ngFor","ngForOf"],[1,"settings-content"],[1,"section-title"],["class","loading",4,"ngIf"],["title","Yeni Grup",1,"btn","btn-primary",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["placeholder","Yeni grup ad\u0131",1,"form-input",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-danger",3,"click"],[3,"click"],[1,"loading"],[1,"table-container"],[1,"data-table"],[2,"width","200px"],[4,"ngFor","ngForOf"],[1,"create-form","card"],[1,"form-row"],["placeholder","Key",1,"form-input",3,"ngModelChange","ngModel"],[1,"value-create"],["placeholder","Value",1,"form-input",3,"ngModelChange","ngModel"],["class","value-create",4,"ngIf"],["placeholder","Description",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-input",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"actions"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","value-cell",4,"ngIf"],[1,"value-cell"],["class","swatch",3,"background",4,"ngIf"],[1,"swatch"],[4,"ngIf","ngIfElse"],["type","color",3,"ngModelChange","ngModel"],["type","checkbox",3,"ngModelChange","ngModel"],["placeholder","Value2 (Renk)",1,"form-input",3,"ngModelChange","ngModel"],["type","color","title","Renk se\xE7",3,"ngModel","ngModelChange",4,"ngIf"],["type","color","title","Renk se\xE7",3,"ngModelChange","ngModel"],[3,"value"]],template:function(i,t){i&1&&(o(0,"div",1)(1,"div",2)(2,"h1",3),s(3,"Ayarlar"),r(),o(4,"p",4),s(5,"Sistem parametrelerini ve genel ayarlar\u0131 y\xF6netin"),r()(),o(6,"div",5)(7,"button",6),u("click",function(){return t.loadGroup(t.selectedGroup)}),b(),o(8,"svg",7),y(9,"path",8)(10,"path",9),r(),s(11," Yenile "),r(),x(12,R,6,0,"ng-container",10)(13,H,6,1,"ng-container",10),r()(),x(14,J,15,0,"div",11),T(),o(15,"div",12)(16,"aside",13)(17,"ul"),x(18,U,2,3,"li",14),r()(),o(19,"section",15)(20,"h2",16),s(21),r(),x(22,$,2,0,"div",17)(23,he,33,8,"div",10),r()()),i&2&&(c(12),_("ngIf",!t.newGroupMode),c(),_("ngIf",t.newGroupMode),c(),_("ngIf",t.showDeleteModal),c(4),_("ngForOf",t.groups),c(3),w(t.selectedGroup),c(),_("ngIf",t.loading),c(),_("ngIf",!t.loading))},dependencies:[D,O,W,Y,N,K,B,F,z,L,A],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.page-title[_ngcontent-%COMP%]{margin:0;font-size:20px}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:13px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.settings-layout[_ngcontent-%COMP%]{display:flex;gap:16px}.settings-sidebar[_ngcontent-%COMP%]{width:220px;border-right:1px solid var(--border, #e8e8e8);padding-right:8px}.settings-sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.settings-sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 12px;cursor:pointer;border-radius:6px}.settings-sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#f5f7fb;font-weight:600}.settings-content[_ngcontent-%COMP%]{padding:8px 16px;flex:1}.section-title[_ngcontent-%COMP%]{margin-top:0}.table-container[_ngcontent-%COMP%]{margin-top:12px;overflow:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:12px;border-bottom:1px solid #eee;font-weight:600}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;border-bottom:1px solid #f4f4f4;vertical-align:middle}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:6px;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:inline-block}.btn-primary[_ngcontent-%COMP%]{background:#2f6cf3;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background:#f3f5f9;color:#333}.btn-danger[_ngcontent-%COMP%]{background:#e15b5b;color:#fff}.form-input[_ngcontent-%COMP%]{padding:8px 10px;border:1px solid #e1e1e1;border-radius:6px}.create-form[_ngcontent-%COMP%]{margin-top:16px;display:flex;flex-direction:column;gap:8px}.create-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.create-form[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:12px;background:#fff;border-radius:8px;box-shadow:0 1px 2px #00000008}.loading[_ngcontent-%COMP%]{color:#666}",`.modal-overlay[_ngcontent-%COMP%]{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:1200;
  }
  .modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:10px;max-width:480px;width:90%;box-shadow:0 10px 30px rgba(0,0,0,0.3);overflow:hidden}
  .modal-header[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #eee;display:flex;align-items:center;justify-content:space-between}
  .modal-body[_ngcontent-%COMP%]{padding:18px 20px}
  .modal-footer[_ngcontent-%COMP%]{padding:12px 20px;display:flex;gap:8px;justify-content:flex-end}
  .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer}`,`.swatch[_ngcontent-%COMP%] { display:inline-block; width:18px; height:18px; border:1px solid rgba(0,0,0,0.15); margin-right:8px; vertical-align:middle; }
        .value-cell[_ngcontent-%COMP%] { display:flex; align-items:center; gap:8px; }
        .value-create[_ngcontent-%COMP%] { display:flex; align-items:center; gap:8px; }`]})}}return n})();export{Ve as SettingsComponent};
