import './polyfills.server.mjs';
import{a as nt}from"./chunk-ISMFIIDA.mjs";import{b as J,c as X,f as Z,r as tt}from"./chunk-EMYJKDQA.mjs";import{a as et}from"./chunk-WVXWFGKP.mjs";import{a as q}from"./chunk-2ZDBELSD.mjs";import{g as K,j as Y,n as Q}from"./chunk-4L5IZ2U2.mjs";import{Ma as g,Oa as w,Qa as k,Sa as O,Ta as m,Ua as R,V as B,Va as D,Wa as S,Xa as T,Ya as e,Za as n,_a as _,ba as C,bb as b,ca as x,cb as f,da as h,db as l,dc as W,ea as v,fb as j,gb as G,gc as $,hb as L,ib as a,jb as s,kb as M,nb as N,oa as F,ob as A,pb as H,rb as U,ua as y,ya as r,za as P}from"./chunk-M6NPGADT.mjs";import{a as V,b as I,h as z}from"./chunk-VVCT4QZE.mjs";var it=["commentsContainer"],ot=(i,d)=>d.id;function at(i,d){if(i&1&&(e(0,"div",7)(1,"h1"),a(2),n(),e(3,"span"),a(4),n(),e(5,"span"),a(6),n()()),i&2){let t=l();r(2),M("Talep ",t.formatTicketId(t.ticket.id,t.ticket.ticketCode),""),r(),O("status-badge ",t.getStatusClass(t.ticket.status),""),r(),M(" ",t.getStatusLabel(t.ticket.status)," "),r(),O("priority-badge ",t.getPriorityClass(t.ticket.priority),""),r(),M(" ",t.getPriorityLabel(t.ticket.priority)," ")}}function rt(i,d){if(i&1){let t=b();e(0,"button",11),f("click",function(){C(t);let o=l();return x(o.goToEdit())}),h(),e(1,"svg",12),_(2,"path",13)(3,"path",14),n(),a(4," D\xFCzenle "),n()}}function ct(i,d){i&1&&(e(0,"div",9),_(1,"div",15),e(2,"p"),a(3,"Y\xFCkleniyor..."),n()())}function lt(i,d){if(i&1){let t=b();e(0,"div",16),h(),e(1,"svg",17),_(2,"circle",18)(3,"path",19),n(),v(),e(4,"p"),a(5),n(),e(6,"button",11),f("click",function(){C(t);let o=l();return x(o.goBack())}),a(7,"Geri D\xF6n"),n()()}if(i&2){let t=l();r(5),s(t.error)}}function dt(i,d){if(i&1&&(e(0,"span",28),a(1),n()),i&2){let t=l(2);r(),s(t.comments.length)}}function st(i,d){if(i&1&&(e(0,"span",28),a(1),n()),i&2){let t=l(2);r(),s(t.history.length)}}function mt(i,d){if(i&1){let t=b();e(0,"button",46),f("click",function(){let o=C(t).$implicit,p=l(4);return x(p.openImagePreview(o))}),_(1,"img",47),e(2,"div",48)(3,"span"),a(4,"Buyutmek icin tikla"),n()()()}if(i&2){let t=d.$implicit,c=l(4);r(),w("src",c.baseUrl+t,y)}}function pt(i,d){if(i&1&&(e(0,"div",38)(1,"label"),a(2,"Ek Gorseller"),n(),e(3,"div",44),S(4,mt,5,1,"button",45,D),n()()),i&2){let t=l(3);r(4),T(t.ticket.imagePaths)}}function gt(i,d){if(i&1){let t=b();e(0,"div",38)(1,"label"),a(2,"Ek Gorsel"),n(),e(3,"div",49)(4,"button",50),f("click",function(){C(t);let o=l(3);return x(o.openImagePreview(o.ticket.imagePath))}),_(5,"img",47),e(6,"div",48)(7,"span"),a(8,"Buyutmek icin tikla"),n()()()()()}if(i&2){let t=l(3);r(5),w("src",t.baseUrl+t.ticket.imagePath,y)}}function _t(i,d){if(i&1&&(e(0,"div",41)(1,"div",38)(2,"label"),a(3,"\xDCr\xFCn"),n(),e(4,"p",39),a(5),n()(),e(6,"div",38)(7,"label"),a(8,"Seri No"),n(),e(9,"p",39),a(10),n()()()),i&2){let t=l(3);r(5),s(t.ticket.assetName),r(5),s(t.ticket.assetSerialNumber||"-")}}function Ct(i,d){if(i&1&&(e(0,"div",43)(1,"div",51),a(2),n(),e(3,"span"),a(4),n()()),i&2){let t=l(3);r(2),M(" ",t.ticket.assignedPerson.charAt(0).toUpperCase()," "),r(2),s(t.ticket.assignedPerson)}}function xt(i,d){i&1&&(e(0,"p",52),a(1,"Hen\xFCz atanmad\u0131"),n())}function ft(i,d){if(i&1&&(e(0,"div",31)(1,"div",34)(2,"div",35)(3,"div",36)(4,"h2"),a(5,"Talep Bilgileri"),n()(),e(6,"div",37)(7,"div",38)(8,"label"),a(9,"Ba\u015Fl\u0131k"),n(),e(10,"p",39),a(11),n()(),e(12,"div",38)(13,"label"),a(14,"A\xE7\u0131klama"),n(),e(15,"p",40),a(16),n()(),g(17,pt,6,0,"div",38)(18,gt,9,1),e(19,"div",41)(20,"div",38)(21,"label"),a(22,"Olu\u015Fturulma"),n(),e(23,"p",39),a(24),n()(),e(25,"div",38)(26,"label"),a(27,"Son G\xFCncelleme"),n(),e(28,"p",39),a(29),n()()()()(),e(30,"div",35)(31,"div",36)(32,"h2"),a(33,"M\xFC\u015Fteri Bilgileri"),n()(),e(34,"div",37)(35,"div",38)(36,"label"),a(37,"Firma"),n(),e(38,"p",39),a(39),n()(),e(40,"div",41)(41,"div",38)(42,"label"),a(43,"E-posta"),n(),e(44,"p",39),a(45),n()(),e(46,"div",38)(47,"label"),a(48,"Telefon"),n(),e(49,"p",39),a(50),n()()(),g(51,_t,11,2,"div",41),n()()(),e(52,"div",42)(53,"div",35)(54,"div",36)(55,"h2"),a(56,"Durum"),n()(),e(57,"div",37)(58,"div"),a(59),n()()(),e(60,"div",35)(61,"div",36)(62,"h2"),a(63,"\xD6ncelik"),n()(),e(64,"div",37)(65,"div"),a(66),n()()(),e(67,"div",35)(68,"div",36)(69,"h2"),a(70,"Atanan Ki\u015Fi"),n()(),e(71,"div",37),g(72,Ct,5,2,"div",43)(73,xt,2,0),n()()()()),i&2){let t=l(2);r(11),s(t.ticket.title),r(5),s(t.ticket.description),r(),m(17,t.ticket.imagePaths!=null&&t.ticket.imagePaths.length?17:t.ticket.imagePath?18:-1),r(7),s(t.formatFullDate(t.ticket.createdDate)),r(5),s(t.ticket.updatedDate?t.formatFullDate(t.ticket.updatedDate):"Hen\xFCz g\xFCncellenmedi"),r(10),s(t.ticket.tenantName||"-"),r(6),s(t.ticket.tenantEmail||"-"),r(5),s(t.ticket.tenantPhone||"-"),r(),m(51,t.ticket.assetName?51:-1),r(7),O("status-display ",t.getStatusClass(t.ticket.status),""),r(),M(" ",t.getStatusLabel(t.ticket.status)," "),r(6),O("priority-display ",t.getPriorityClass(t.ticket.priority),""),r(),M(" ",t.getPriorityLabel(t.ticket.priority)," "),r(6),m(72,t.ticket.assignedPerson?72:73)}}function ut(i,d){i&1&&(e(0,"div",54),h(),e(1,"svg",17),_(2,"path",27),n(),v(),e(3,"p"),a(4,"Hen\xFCz yorum yok"),n()())}function ht(i,d){i&1&&(e(0,"span",63),a(1,"DESTEK"),n())}function bt(i,d){if(i&1&&(e(0,"div",60)(1,"div",61)(2,"span",62),a(3),n(),g(4,ht,2,0,"span",63),e(5,"span",64),a(6),n()(),e(7,"div",65),a(8),n()()),i&2){let t=d.$implicit,c=l(4);k("admin",t.isAdminReply&&!t.isStaff)("staff",t.isStaff),r(3),s(t.authorName),r(),m(4,t.isAdminReply?4:-1),r(2),s(c.formatDate(t.createdDate)),r(2),M(" ",t.message," ")}}function Mt(i,d){if(i&1&&S(0,bt,9,8,"div",59,ot),i&2){let t=l(3);T(t.comments)}}function vt(i,d){i&1&&_(0,"span",58)}function Pt(i,d){if(i&1){let t=b();e(0,"div",32)(1,"div",35)(2,"div",36)(3,"h2"),a(4,"Mesajlar"),n()(),e(5,"div",37)(6,"div",53,0),g(8,ut,5,0,"div",54)(9,Mt,2,0),n(),e(10,"div",55)(11,"textarea",56),H("ngModelChange",function(o){C(t);let p=l(2);return A(p.newComment,o)||(p.newComment=o),x(o)}),n(),e(12,"button",57),f("click",function(){C(t);let o=l(2);return x(o.addComment())}),g(13,vt,1,0,"span",58),a(14," Mesaj G\xF6nder "),n()()()()()}if(i&2){let t=l(2);r(8),m(8,t.comments.length===0?8:9),r(3),N("ngModel",t.newComment),r(),w("disabled",t.addingComment||!t.newComment.trim()),r(),m(13,t.addingComment?13:-1)}}function wt(i,d){i&1&&(e(0,"div",54),h(),e(1,"svg",17),_(2,"circle",18)(3,"polyline",29),n(),v(),e(4,"p"),a(5,"Ge\xE7mi\u015F kayd\u0131 yok"),n()())}function kt(i,d){if(i&1&&(e(0,"div",67),_(1,"div",68),e(2,"div",69)(3,"p",70),a(4),n(),e(5,"div",71)(6,"span",72),a(7),n(),e(8,"span",64),a(9),n()()()()),i&2){let t=d.$implicit,c=l(4);r(4),s(t.description),r(3),s(t.actionBy),r(2),s(c.formatFullDate(t.createdDate))}}function Ot(i,d){if(i&1&&(e(0,"div",66),S(1,kt,10,3,"div",67,R),n()),i&2){let t=l(3);r(),T(t.history)}}function yt(i,d){if(i&1&&(e(0,"div",33)(1,"div",35)(2,"div",36)(3,"h2"),a(4,"\u0130\u015Flem Ge\xE7mi\u015Fi"),n()(),e(5,"div",37),g(6,wt,6,0,"div",54)(7,Ot,3,0),n()()()),i&2){let t=l(2);r(6),m(6,t.history.length===0?6:7)}}function St(i,d){if(i&1){let t=b();e(0,"div",20)(1,"button",21),f("click",function(){C(t);let o=l();return x(o.activeTab="details")}),h(),e(2,"svg",12),_(3,"path",22)(4,"polyline",23)(5,"line",24)(6,"line",25)(7,"polyline",26),n(),a(8," Detaylar "),n(),v(),e(9,"button",21),f("click",function(){C(t);let o=l();return o.activeTab="comments",x(o.scrollToCommentsBottom())}),h(),e(10,"svg",12),_(11,"path",27),n(),a(12," Mesajlar "),g(13,dt,2,1,"span",28),n(),v(),e(14,"button",21),f("click",function(){C(t);let o=l();return x(o.activeTab="history")}),h(),e(15,"svg",12),_(16,"circle",18)(17,"polyline",29),n(),a(18," Ge\xE7mi\u015F "),g(19,st,2,1,"span",28),n()(),v(),e(20,"div",30),g(21,ft,74,18,"div",31)(22,Pt,15,4,"div",32)(23,yt,8,1,"div",33),n()}if(i&2){let t=l();r(),k("active",t.activeTab==="details"),r(8),k("active",t.activeTab==="comments"),r(4),m(13,t.comments.length>0?13:-1),r(),k("active",t.activeTab==="history"),r(5),m(19,t.history.length>0?19:-1),r(2),m(21,t.activeTab==="details"?21:-1),r(),m(22,t.activeTab==="comments"?22:-1),r(),m(23,t.activeTab==="history"?23:-1)}}function Tt(i,d){if(i&1){let t=b();e(0,"div",73),f("click",function(){C(t);let o=l();return x(o.showImagePreview=!1)}),e(1,"div",74),f("click",function(o){return C(t),x(o.stopPropagation())}),e(2,"button",75),f("click",function(){C(t);let o=l();return x(o.showImagePreview=!1)}),a(3,"x"),n(),_(4,"img",76),n()()}if(i&2){let t=l();r(4),w("src",t.baseUrl+t.selectedImagePath,y)}}var Ht=(()=>{class i{constructor(t,c,o,p,u){this.route=t,this.router=c,this.ticketService=o,this.signalRService=p,this.ticket=null,this.comments=[],this.history=[],this.loading=!0,this.error="",this.newComment="",this.addingComment=!1,this.activeTab="details",this.shouldScrollToBottom=!1,this.isSignalRConnected=!1,this.baseUrl=q.baseUrl,this.showImagePreview=!1,this.selectedImagePath=null,this.statusDisplayMap={Open:"A\xE7\u0131k",Processing:"\u0130\u015Flemde",InProgress:"\u0130\u015Flemde",WaitingForCustomer:"M\xFC\u015Fteri Bekleniyor",Waiting:"M\xFC\u015Fteri Bekleniyor",Resolved:"\xC7\xF6z\xFCld\xFC",Closed:"Kapat\u0131ld\u0131",1:"A\xE7\u0131k",2:"\u0130\u015Flemde",3:"M\xFC\u015Fteri Bekleniyor",4:"\xC7\xF6z\xFCld\xFC",5:"Kapat\u0131ld\u0131"},this.priorityDisplayMap={Low:"D\xFC\u015F\xFCk",Medium:"Orta",High:"Y\xFCksek",Critical:"Kritik",1:"D\xFC\u015F\xFCk",2:"Orta",3:"Y\xFCksek",4:"Kritik"},this.priorityClassMap={Low:"low",Medium:"normal",High:"high",Critical:"critical",1:"low",2:"normal",3:"high",4:"critical"},this.statusStringToNumber={Open:1,Processing:2,WaitingForCustomer:3,Waiting:3,Resolved:4,Closed:5},this.priorityStringToNumber={Low:1,Medium:2,High:3,Critical:4},this.isBrowser=$(u)}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.loadTicket(t),this.isBrowser&&this.initSignalR(t))}ngOnDestroy(){let t=this.route.snapshot.paramMap.get("id");t&&this.signalRService.leaveTicketGroup(t),this.commentSubscription?.unsubscribe()}openImagePreview(t){this.selectedImagePath=t,this.showImagePreview=!0}ngAfterViewChecked(){this.shouldScrollToBottom&&this.activeTab==="comments"&&(this.scrollToBottom(),this.shouldScrollToBottom=!1)}scrollToBottom(){try{this.commentsContainer&&(this.commentsContainer.nativeElement.scrollTop=this.commentsContainer.nativeElement.scrollHeight)}catch{}}scrollToCommentsBottom(){setTimeout(()=>this.scrollToBottom(),0)}loadTicket(t){this.loading=!0,this.ticketService.getTicketById(t).subscribe({next:c=>{let o=c?.data?.data||c?.data||c;typeof o.status=="string"&&(o.status=this.statusStringToNumber[o.status]||1),typeof o.priority=="string"&&(o.priority=this.priorityStringToNumber[o.priority]||1),this.ticket=o;let p=o.comments?.$values||o.comments||[];p=p.map(u=>u.isAdminReply&&u.authorName!=="Admin"?I(V({},u),{isStaff:!0}):u),this.comments=p,this.history=o.history?.$values||o.history||[],this.loading=!1,this.shouldScrollToBottom=!0},error:()=>{this.error="Talep y\xFCklenirken bir hata olu\u015Ftu",this.loading=!1}})}formatTicketId(t,c){if(c)return c;if(t==null)return"-";let o=typeof t=="number"?t:Number(t);return Number.isFinite(o)?`T${o.toString().padStart(5,"0")}`:String(t)}getStatusLabel(t){return this.statusDisplayMap[t]??"Bilinmiyor"}getStatusClass(t){return{Open:"open",Processing:"processing",InProgress:"processing",WaitingForCustomer:"waiting",Waiting:"waiting",Resolved:"resolved",Closed:"closed",1:"open",2:"processing",3:"waiting",4:"resolved",5:"closed"}[t]??""}getPriorityLabel(t){return this.priorityDisplayMap[t]??"Normal"}getPriorityClass(t){return this.priorityClassMap[t]??"normal"}formatDate(t){return t?new Date(t).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):"-"}formatFullDate(t){return t?new Date(t).toLocaleString("tr-TR"):"-"}goBack(){this.router.navigate(["/admin/tickets"])}goToEdit(){this.ticket&&this.router.navigate(["/admin/tickets",this.ticket.id,"edit"])}addComment(){!this.ticket||!this.newComment.trim()||(this.addingComment=!0,this.ticketService.addAdminComment(this.ticket.id,this.newComment.trim(),"Admin",!0).subscribe({next:()=>{this.newComment="",this.addingComment=!1,this.shouldScrollToBottom=!0;let t=this.ticket.id;this.ticketService.getTicketById(t).subscribe({next:c=>{let o=c?.data?.data||c?.data||c;this.history=o.history?.$values||o.history||[]}})},error:()=>{this.addingComment=!1}}))}initSignalR(t){return z(this,null,function*(){if(!this.isBrowser){console.log("SignalR: Not in browser environment");return}let c=localStorage.getItem("token")||sessionStorage.getItem("token");if(!c){console.warn("SignalR: No token found. User may not be authenticated."),this.error="Oturum s\xFCresi dolmu\u015F, l\xFCtfen sayfay\u0131 yenileyin";return}try{console.log("SignalR: Attempting to start connection with token"),yield this.signalRService.startConnection(c),console.log("SignalR: Joining ticket group",t),yield this.signalRService.joinTicketGroup(t),this.isSignalRConnected=!0,console.log("SignalR: Successfully connected and joined group"),this.commentSubscription=this.signalRService.commentReceived$.subscribe(o=>{console.log("Ticket-View: Received comment from SignalR:",o),o.ticketId===t&&(this.comments.some(u=>u.id===o.id)?console.log("Ticket-View: Comment already exists, skipping"):(console.log("Ticket-View: Adding new comment to list"),this.comments=[...this.comments,o],this.shouldScrollToBottom=!0,this.ticketService.getTicketById(t).subscribe({next:u=>{let E=u?.data?.data||u?.data||u;this.history=E.history?.$values||E.history||[]}})))})}catch(o){console.error("SignalR: Connection failed:",o),this.isSignalRConnected=!1,console.warn("SignalR: Real-time updates disabled. Comments will appear after refresh.")}})}static{this.\u0275fac=function(c){return new(c||i)(P(K),P(Y),P(nt),P(et),P(F))}}static{this.\u0275cmp=B({type:i,selectors:[["app-ticket-view"]],viewQuery:function(c,o){if(c&1&&j(it,5),c&2){let p;G(p=L())&&(o.commentsContainer=p.first)}},standalone:!0,features:[U],decls:13,vars:4,consts:[["commentsContainer",""],[1,"ticket-view-page"],[1,"page-header"],[1,"header-left"],[1,"back-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"ticket-info"],[1,"btn","btn-primary"],[1,"loading-container"],[1,"image-preview-overlay"],[1,"btn","btn-primary",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"loader"],[1,"error-container"],["width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["d","M12 8v4M12 16h.01"],[1,"tabs"],[1,"tab",3,"click"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["points","10 9 9 9 8 9"],["d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[1,"badge"],["points","12 6 12 12 16 14"],[1,"tab-content"],[1,"details-tab"],[1,"comments-tab"],[1,"history-tab"],[1,"main-content"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group"],[1,"value"],[1,"value","description"],[1,"form-row"],[1,"sidebar"],[1,"assignee-info"],[1,"image-grid"],["type","button",1,"image-tile"],["type","button",1,"image-tile",3,"click"],["alt","Ticket Image",3,"src"],[1,"image-overlay"],[1,"image-container"],["type","button",1,"image-tile","single",3,"click"],[1,"assignee-avatar"],[1,"no-assignee"],[1,"comments-list"],[1,"empty-state"],[1,"add-comment"],["placeholder","Mesaj yaz\u0131n...","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"spinner-sm"],[1,"comment",3,"admin","staff"],[1,"comment"],[1,"comment-header"],[1,"name"],[1,"admin-badge"],[1,"date"],[1,"comment-body"],[1,"timeline"],[1,"timeline-item"],[1,"timeline-dot"],[1,"timeline-content"],[1,"action"],[1,"meta"],[1,"by"],[1,"image-preview-overlay",3,"click"],[1,"preview-content",3,"click"],[1,"btn-close-preview",3,"click"],["alt","Buyuk Gorsel",3,"src"]],template:function(c,o){c&1&&(e(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),f("click",function(){return o.goBack()}),h(),e(4,"svg",5),_(5,"path",6),n(),a(6," Geri "),n(),g(7,at,7,9,"div",7),n(),g(8,rt,5,0,"button",8),n(),g(9,ct,4,0,"div",9)(10,lt,8,1)(11,St,24,11),n(),g(12,Tt,5,1,"div",10)),c&2&&(r(7),m(7,o.ticket?7:-1),r(),m(8,o.ticket?8:-1),r(),m(9,o.loading?9:o.error?10:o.ticket?11:-1),r(3),m(12,o.showImagePreview?12:-1))},dependencies:[W,Q,tt,J,X,Z],styles:['.ticket-view-page[_ngcontent-%COMP%]{padding:16px;max-width:1400px;margin:0 auto;overflow-x:hidden}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f1f5f9;border:none;border-radius:8px;color:#64748b;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#334155}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1e293b;margin:0}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}.page-header[_ngcontent-%COMP%] > .btn-primary[_ngcontent-%COMP%]{width:100%;justify-content:center}}.status-badge[_ngcontent-%COMP%], .priority-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.status-badge.open[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.status-badge.processing[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.status-badge.waiting[_ngcontent-%COMP%]{background:#e0e7ff;color:#4338ca}.status-badge.resolved[_ngcontent-%COMP%]{background:#d1fae5;color:#047857}.status-badge.closed[_ngcontent-%COMP%], .priority-badge.low[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.priority-badge.normal[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.priority-badge.high[_ngcontent-%COMP%]{background:#fed7aa;color:#c2410c}.priority-badge.critical[_ngcontent-%COMP%]{background:#fecaca;color:#b91c1c}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center;color:#64748b}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#0284c7,#0369a1);transform:translateY(-1px)}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px;border-bottom:1px solid #e2e8f0;padding-bottom:0}@media (max-width: 768px){.tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:nowrap}}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background:none;border:none;border-bottom:2px solid transparent;color:#64748b;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-bottom:-1px}@media (max-width: 768px){.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:0 0 auto;padding:10px 12px;font-size:13px}}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{color:#334155}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#0ea5e9;border-bottom-color:#0ea5e9}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#e2e8f0;color:#64748b;padding:2px 8px;border-radius:10px;font-size:12px}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#dbeafe;color:#0ea5e9}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.details-tab[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 300px;gap:16px}.details-tab[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-width:0}@media (max-width: 1024px){.details-tab[_ngcontent-%COMP%]{grid-template-columns:1fr}}.details-tab[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%], .details-tab[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a;overflow:hidden;min-width:0}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e2e8f0}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#1e293b;margin:0}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15px;color:#1e293b;margin:0;line-height:1.5}.form-group[_ngcontent-%COMP%]   .value.description[_ngcontent-%COMP%]{white-space:pre-wrap;background:#f8fafc;padding:12px 16px;border-radius:8px;border:1px solid #e2e8f0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}@media (max-width: 600px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.image-container[_ngcontent-%COMP%]   .image-tile.single[_ngcontent-%COMP%]{width:100%}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:400px;border-radius:8px;border:1px solid #e2e8f0;object-fit:contain}.image-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]{position:relative;width:100%;border:1px solid #e2e8f0;border-radius:8px;padding:0;background:#fff;overflow:hidden;cursor:zoom-in}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;display:block}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:600;background:#0009;padding:6px 12px;border-radius:20px}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.image-preview-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:2000;padding:40px;cursor:zoom-out}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{position:relative;max-width:95%;max-height:95%;display:flex;align-items:center;justify-content:center;cursor:default}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 0 30px #00000080}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .btn-close-preview[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;background:#ffffff1a;border:2px solid #fff;color:#fff;font-size:22px;width:40px;height:40px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}.status-display[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;font-size:15px;font-weight:600;text-align:center}.status-display.open[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.status-display.processing[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.status-display.waiting[_ngcontent-%COMP%]{background:#e0e7ff;color:#4338ca}.status-display.resolved[_ngcontent-%COMP%]{background:#d1fae5;color:#047857}.status-display.closed[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.priority-display[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;font-size:15px;font-weight:600;text-align:center}.priority-display.low[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.priority-display.normal[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.priority-display.high[_ngcontent-%COMP%]{background:#fed7aa;color:#c2410c}.priority-display.critical[_ngcontent-%COMP%]{background:#fecaca;color:#b91c1c}.assignee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.assignee-info[_ngcontent-%COMP%]   .assignee-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:600}.assignee-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#1e293b}.no-assignee[_ngcontent-%COMP%]{color:#94a3b8;font-size:14px;margin:0;text-align:center;padding:8px}.comments-tab[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.comments-tab[_ngcontent-%COMP%]{max-width:100%}}.comments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:350px;overflow-y:auto}.comment[_ngcontent-%COMP%]{padding:12px;background:#f8fafc;border-radius:12px;border-left:3px solid #e2e8f0;display:flex;flex-direction:column;align-self:flex-start;max-width:70%}@media (max-width: 768px){.comment[_ngcontent-%COMP%]{max-width:100%}}.comment.admin[_ngcontent-%COMP%]{background:#f0f9ff;border-left-color:#0ea5e9;align-self:flex-end}.comment.staff[_ngcontent-%COMP%]{background:#f8fafc;border-left-color:#e2e8f0;align-self:flex-start}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:12px}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .admin-badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 8px;background:#0ea5e9;color:#fff;border-radius:10px}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#94a3b8;margin-left:auto}.comment[_ngcontent-%COMP%]   .comment-body[_ngcontent-%COMP%]{color:#334155;line-height:1.6;white-space:pre-wrap}.add-comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px;padding-top:16px;border-top:1px solid #e2e8f0}.add-comment[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{align-self:flex-end}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#94a3b8}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:14px}.history-tab[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.history-tab[_ngcontent-%COMP%]{max-width:100%}}.timeline[_ngcontent-%COMP%]{position:relative;padding-left:24px;max-height:350px;overflow-y:auto}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:7px;top:0;bottom:0;width:2px;background:#e2e8f0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{position:relative;padding-bottom:16px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-dot[_ngcontent-%COMP%]{position:absolute;left:-20px;top:4px;width:12px;height:12px;border-radius:50%;background:#fff;border:3px solid #0ea5e9}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{background:#f8fafc;padding:12px 16px;border-radius:8px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{font-size:14px;color:#1e293b;margin:0 0 8px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#94a3b8}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]{font-weight:500;color:#64748b}@media (max-width: 768px){.ticket-view-page[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:12px}.form-group[_ngcontent-%COMP%]   .value.description[_ngcontent-%COMP%]{padding:10px 12px}.assignee-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{word-break:break-word}}@media (max-width: 480px){.ticket-view-page[_ngcontent-%COMP%]{padding:10px;max-width:100%}.status-badge[_ngcontent-%COMP%], .priority-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 10px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{width:100%;gap:10px}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]{width:100%;gap:8px}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px;width:100%;overflow-wrap:anywhere}.details-tab[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.details-tab[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%], .details-tab[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:100%;min-width:0}.card[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.tabs[_ngcontent-%COMP%]{white-space:normal;overflow:visible;flex-wrap:wrap;gap:6px}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1 1 calc(50% - 6px);justify-content:center;min-height:40px}.tab-content[_ngcontent-%COMP%]{min-width:0}.form-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   .value.description[_ngcontent-%COMP%], .assignee-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow-wrap:anywhere;word-break:break-word}.image-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.image-preview-overlay[_ngcontent-%COMP%]{padding:16px}}']})}}return i})();export{Ht as TicketViewComponent};
