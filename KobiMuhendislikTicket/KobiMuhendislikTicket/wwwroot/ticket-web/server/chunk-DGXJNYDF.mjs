import './polyfills.server.mjs';
import{a as st}from"./chunk-VYQK7HBG.mjs";import{a as at}from"./chunk-O7OTTCDM.mjs";import{b as Z,c as tt,f as et,j as nt,k as it,r as ot}from"./chunk-RUBJBCOG.mjs";import{a as rt}from"./chunk-LV727ALH.mjs";import{a as X}from"./chunk-2ZDBELSD.mjs";import{g as $,j as q,n as J}from"./chunk-RBKH3TAP.mjs";import{$a as w,$b as H,Ma as _,Oa as d,Pa as M,Qa as O,Ta as P,V as z,Ya as o,Za as a,_a as C,ab as S,ba as p,bb as x,bc as U,ca as u,cb as g,cc as Y,da as F,db as l,dc as W,fb as j,fc as K,gb as B,hb as L,ic as Q,jb as c,kb as f,lb as k,oa as R,ob as T,pb as D,qb as I,sb as A,ua as y,ub as G,ya as s,za as v}from"./chunk-Q22LFSCO.mjs";import{a as E,b as V,h as N}from"./chunk-VVCT4QZE.mjs";var lt=["commentsContainer"],dt=i=>({"admin-bubble":i});function mt(i,m){i&1&&(o(0,"div",10),C(1,"div",11),o(2,"p"),c(3,"Ticket y\xFCkleniyor..."),a()())}function pt(i,m){if(i&1){let t=x();o(0,"div",12),c(1),o(2,"button",13),g("click",function(){p(t);let e=l();return u(e.error=null)}),c(3,"\xD7"),a()()}if(i&2){let t=l();s(),k(" ",t.error," ")}}function ut(i,m){if(i&1){let t=x();o(0,"div",14),c(1),o(2,"button",13),g("click",function(){p(t);let e=l();return u(e.successMessage=null)}),c(3,"\xD7"),a()()}if(i&2){let t=l();s(),k(" ",t.successMessage," ")}}function gt(i,m){if(i&1){let t=x();w(0),o(1,"button",35),g("click",function(){p(t);let e=l(2);return u(e.claimTicket())}),c(2," Ticket\u0131 \xDCstlen "),a(),S()}}function _t(i,m){if(i&1&&(o(0,"option",43),c(1),a()),i&2){let t,n,e=m.$implicit,r=l(3);d("value",((t=e.sortOrder)!==null&&t!==void 0?t:e.id)+"")("selected",((n=e.sortOrder)!==null&&n!==void 0?n:e.id)+""==r.ticket.status+""||e.id+""==r.ticket.status+""||e.key+""==r.ticket.status+""),s(),k(" ",e.label," ")}}function ft(i,m){i&1&&C(0,"span",50)}function xt(i,m){if(i&1){let t=x();o(0,"div",44),g("click",function(){p(t);let e=l(3);return u(e.cancelRelease())}),o(1,"div",45),g("click",function(e){return p(t),u(e.stopPropagation())}),o(2,"div",46)(3,"h3"),c(4,"Ticket\u0131 B\u0131rak"),a(),o(5,"button",13),g("click",function(){p(t);let e=l(3);return u(e.cancelRelease())}),c(6,"\xD7"),a()(),o(7,"div",47)(8,"p"),c(9,"Bu ticket\u0131 b\u0131rakmak istedi\u011Finize emin misiniz?"),a()(),o(10,"div",48)(11,"button",42),g("click",function(){p(t);let e=l(3);return u(e.cancelRelease())}),c(12,"\u0130ptal"),a(),o(13,"button",49),g("click",function(){p(t);let e=l(3);return u(e.confirmRelease())}),_(14,ft,1,0,"span",50),c(15," Evet, B\u0131rak"),a()()()()}if(i&2){let t=l(3);s(13),d("disabled",t.releasing),s(),P(14,t.releasing?14:-1)}}function ht(i,m){if(i&1){let t=x();w(0),o(1,"label",36)(2,"div",37),C(3,"span",38),o(4,"select",39),g("change",function(e){p(t);let r=l(2);return u(r.onStatusSelect(e))}),_(5,_t,2,3,"option",40),a(),o(6,"span",41),c(7,"\u25BE"),a()()(),o(8,"button",42),g("click",function(){p(t);let e=l(2);return u(e.releaseTicket())}),c(9," Ticket\u0131 B\u0131rak "),a(),_(10,xt,16,2,"div",8),S()}if(i&2){let t=l(2);s(3),M("background-color",t.getStatusColor(t.ticket.status)),s(),d("value",t.ticket.status+""),s(),d("ngForOf",t.statusOptions),s(5),d("ngIf",t.showReleaseModal)}}function vt(i,m){if(i&1&&(o(0,"span",51),c(1),a()),i&2){let t=l(2);s(),k(" Atanan: ",t.ticket.assignedPerson," ")}}function bt(i,m){if(i&1){let t=x();o(0,"div",44),g("click",function(){p(t);let e=l(2);return u(e.cancelStatusChange())}),o(1,"div",45),g("click",function(e){return p(t),u(e.stopPropagation())}),o(2,"div",46)(3,"h3"),c(4,"Durumu De\u011Fi\u015Ftir"),a(),o(5,"button",13),g("click",function(){p(t);let e=l(2);return u(e.cancelStatusChange())}),c(6,"\xD7"),a()(),o(7,"div",47)(8,"p"),c(9,"Bu ticketin durumunu "),o(10,"strong"),c(11),a(),c(12," olarak de\u011Fi\u015Ftirmek istedi\u011Finize emin misiniz?"),a()(),o(13,"div",48)(14,"button",42),g("click",function(){p(t);let e=l(2);return u(e.cancelStatusChange())}),c(15,"\u0130ptal"),a(),o(16,"button",35),g("click",function(){p(t);let e=l(2);return u(e.confirmStatusChange())}),c(17,"Evet, De\u011Fi\u015Ftir"),a()()()()}if(i&2){let t=l(2);s(11),f(t.pendingStatusLabel)}}function Ct(i,m){if(i&1&&(o(0,"div",27)(1,"label"),c(2,"\xC7\xF6z\xFClme Tarihi:"),a(),o(3,"span"),c(4),a()()),i&2){let t=l(2);s(4),f(t.formatDate(t.ticket.resolvedDate))}}function kt(i,m){if(i&1&&(o(0,"div",27)(1,"label"),c(2,"A\xE7\u0131klama:"),a(),o(3,"span"),c(4),a()()),i&2){let t=l(3);s(4),f(t.ticket.asset.description)}}function Mt(i,m){if(i&1&&(o(0,"div",26)(1,"h3"),c(2,"Se\xE7ilen \xDCr\xFCn"),a(),o(3,"div",27)(4,"label"),c(5,"\xDCr\xFCn Ad\u0131:"),a(),o(6,"span"),c(7),a()(),_(8,kt,5,1,"div",27),a()),i&2){let t=l(2);s(7),f(t.ticket.asset.productName),s(),P(8,t.ticket.asset.description?8:-1)}}function yt(i,m){if(i&1){let t=x();o(0,"button",54),g("click",function(){let e=p(t).$implicit,r=l(3);return u(r.openImagePreview(e))}),C(1,"img",55),o(2,"div",56)(3,"span"),c(4,"B\xFCy\xFCtmek i\xE7in t\u0131kla"),a()()()}if(i&2){let t=m.$implicit,n=l(3);s(),d("src",n.baseUrl+"/"+t,y)("alt",n.ticket.title)}}function Ot(i,m){if(i&1&&(o(0,"div",26)(1,"h3"),c(2,"Eklenen Gorseller"),a(),o(3,"div",52),_(4,yt,5,2,"button",53),a()()),i&2){let t=l(2);s(4),d("ngForOf",t.ticket.imagePaths)}}function Pt(i,m){if(i&1&&(o(0,"div",26)(1,"h3"),c(2,"\xC7\xF6z\xFCm Notu"),a(),o(3,"p",57),c(4),a()()),i&2){let t=l(2);s(4),f(t.ticket.solutionNote)}}function wt(i,m){i&1&&(o(0,"div",63),c(1," Hen\xFCz mesaj yok "),a())}function St(i,m){i&1&&(o(0,"span",71),c(1,"DESTEK"),a())}function Tt(i,m){if(i&1&&(o(0,"div",64)(1,"div",65)(2,"div",66)(3,"span",67),c(4),a(),_(5,St,2,0,"span",68),o(6,"span",69),c(7),a()(),o(8,"p",70),c(9),a()()()),i&2){let t=m.$implicit,n=l(3);d("ngClass",n.isMyComment(t)?"my-message-row":"other-message-row"),s(),d("ngClass",G(6,dt,t.isAdminReply)),s(3),f(t.authorName),s(),d("ngIf",t.isAdminReply),s(2),f(n.formatTime(t.createdDate)),s(2),f(t.message)}}function Dt(i,m){if(i&1){let t=x();o(0,"div",72)(1,"div",73)(2,"textarea",74),I("ngModelChange",function(e){p(t);let r=l(3);return D(r.newComment,e)||(r.newComment=e),u(e)}),a(),o(3,"button",75),g("click",function(){p(t);let e=l(3);return u(e.addComment())}),F(),o(4,"svg",76),C(5,"line",77)(6,"polygon",78),a()()()()}if(i&2){let t=l(3);s(2),T("ngModel",t.newComment),s(),d("disabled",!t.newComment.trim())}}function It(i,m){if(i&1&&(o(0,"div",58)(1,"div",59,0),_(3,wt,2,0,"div",60)(4,Tt,10,8,"div",61),a(),_(5,Dt,7,2,"div",62),a()),i&2){let t=l(2);s(3),d("ngIf",t.comments.length===0),s(),d("ngForOf",t.comments),s(),d("ngIf",t.isMyTicket&&t.ticket.status!==4&&t.ticket.status!==5)}}function Et(i,m){i&1&&(o(0,"div",63),c(1," Hen\xFCz ge\xE7mi\u015F yok "),a())}function Vt(i,m){i&1&&(o(0,"span"),c(1,"\u{1F504}"),a())}function Nt(i,m){i&1&&(o(0,"span"),c(1,"\u{1F464}"),a())}function zt(i,m){i&1&&(o(0,"span"),c(1,"\u2795"),a())}function Ft(i,m){i&1&&(o(0,"span"),c(1,"\u2705"),a())}function Rt(i,m){if(i&1&&(o(0,"div",81)(1,"div",82),_(2,Vt,2,0,"span",22)(3,Nt,2,0,"span",22)(4,zt,2,0,"span",22)(5,Ft,2,0,"span",22),a(),o(6,"div",83)(7,"p"),c(8),a(),o(9,"span",84),c(10),a()()()),i&2){let t=m.$implicit,n=l(3);s(2),d("ngIf",t.action==="StatusChanged"),s(),d("ngIf",t.action==="Assigned"),s(),d("ngIf",t.action==="Created"),s(),d("ngIf",t.action==="Resolved"),s(3),f(t.description),s(2),f(n.formatDate(t.createdDate))}}function jt(i,m){if(i&1&&(o(0,"div",58)(1,"div",79),_(2,Et,2,0,"div",60)(3,Rt,11,6,"div",80),a()()),i&2){let t=l(2);s(2),d("ngIf",t.history.length===0),s(),d("ngForOf",t.history)}}function Bt(i,m){if(i&1){let t=x();o(0,"div",15)(1,"div",16)(2,"div",17)(3,"h1"),c(4),a(),o(5,"div",18)(6,"span",19),c(7),a(),o(8,"span",20),c(9),a(),o(10,"span",20),c(11),a()()(),o(12,"div",21),_(13,gt,3,0,"ng-container",22)(14,ht,11,5,"ng-container",22)(15,vt,2,1,"span",23),a()(),o(16,"div",24)(17,"div",25)(18,"div",26)(19,"h3"),c(20,"Ticket Detaylar\u0131"),a(),o(21,"div",27)(22,"label"),c(23,"A\xE7\u0131klama:"),a(),o(24,"p",28),c(25),a(),_(26,bt,18,1,"div",8),a(),o(27,"div",27)(28,"label"),c(29,"Olu\u015Fturan:"),a(),o(30,"span"),c(31),a()(),o(32,"div",27)(33,"label"),c(34,"Olu\u015Fturma Tarihi:"),a(),o(35,"span"),c(36),a()(),_(37,Ct,5,1,"div",29),a(),_(38,Mt,9,2,"div",30)(39,Ot,5,1,"div",30)(40,Pt,5,1,"div",30),a(),o(41,"div",31)(42,"div",32)(43,"button",33),g("click",function(){p(t);let e=l();return e.activeTab="comments",u(e.shouldScrollToBottom=!0)}),c(44),a(),o(45,"button",33),g("click",function(){p(t);let e=l();return u(e.activeTab="history")}),c(46),a()(),_(47,It,6,3,"div",34)(48,jt,4,2,"div",34),a()()()}if(i&2){let t=l();s(4),f(t.ticket.title),s(3),f(t.ticket.ticketCode||"#"+t.ticket.id),s(),M("background-color",t.getStatusColor(t.ticket.status))("color",t.getStatusColor(t.ticket.status)?"#fff":null),d("ngClass",t.getStatusClass(t.ticket.status)),s(),f(t.getStatusText(t.ticket.status)),s(),M("background-color",t.getPriorityColor(t.ticket.priority))("color",t.getPriorityColor(t.ticket.priority)?"#fff":null),d("ngClass",t.getPriorityClass(t.ticket.priority)),s(),f(t.getPriorityText(t.ticket.priority)),s(2),d("ngIf",!t.ticket.assignedPerson),s(),d("ngIf",t.isMyTicket&&t.ticket.status!==4&&t.ticket.status!==5),s(),d("ngIf",t.ticket.assignedPerson&&!t.isMyTicket),s(10),f(t.ticket.description),s(),d("ngIf",t.showConfirmStatusModal),s(5),f(t.ticket.creatorName||"Bilinmiyor"),s(5),f(t.formatDate(t.ticket.createdDate)),s(),d("ngIf",t.ticket.resolvedDate&&(t.ticket.status===4||t.ticket.status===5)),s(),d("ngIf",t.ticket.asset),s(),d("ngIf",t.ticket.imagePaths==null?null:t.ticket.imagePaths.length),s(),d("ngIf",t.ticket.solutionNote),s(3),O("active",t.activeTab==="comments"),s(),k(" Mesajlar (",t.comments.length,") "),s(),O("active",t.activeTab==="history"),s(),k(" Ge\xE7mi\u015F (",t.history.length,") "),s(),d("ngIf",t.activeTab==="comments"),s(),d("ngIf",t.activeTab==="history")}}function Lt(i,m){if(i&1){let t=x();o(0,"div",44),g("click",function(){p(t);let e=l();return u(e.showResolveModal=!1)}),o(1,"div",45),g("click",function(e){return p(t),u(e.stopPropagation())}),o(2,"div",46)(3,"h3"),c(4,"Ticket\u0131 \xC7\xF6z"),a(),o(5,"button",13),g("click",function(){p(t);let e=l();return u(e.showResolveModal=!1)}),c(6,"\xD7"),a()(),o(7,"div",47)(8,"label"),c(9,"\xC7\xF6z\xFCm Notu *"),a(),o(10,"textarea",85),I("ngModelChange",function(e){p(t);let r=l();return D(r.solutionNote,e)||(r.solutionNote=e),u(e)}),a()(),o(11,"div",48)(12,"button",42),g("click",function(){p(t);let e=l();return u(e.showResolveModal=!1)}),c(13,"\u0130ptal"),a(),o(14,"button",86),g("click",function(){p(t);let e=l();return u(e.resolveTicket())}),c(15,"\xC7\xF6z ve Kapat"),a()()()()}if(i&2){let t=l();s(10),T("ngModel",t.solutionNote)}}function At(i,m){if(i&1){let t=x();o(0,"div",87),g("click",function(){p(t);let e=l();return u(e.showImagePreview=!1)}),o(1,"div",88),g("click",function(e){return p(t),u(e.stopPropagation())}),o(2,"button",89),g("click",function(){p(t);let e=l();return u(e.showImagePreview=!1)}),c(3,"\xD7"),a(),C(4,"img",90),a()()}if(i&2){let t=l();s(4),d("src",t.baseUrl+"/"+t.selectedImagePath,y)}}var ie=(()=>{class i{constructor(t,n,e,r,h,b,ct){this.route=t,this.router=n,this.staffService=e,this.paramSvc=r,this.signalRService=h,this.location=b,this.baseUrl=X.baseUrl,this.ticketId="",this.ticket=null,this.comments=[],this.history=[],this.isLoading=!0,this.error=null,this.successMessage=null,this.staffProfile=null,this.isMyTicket=!1,this.newComment="",this.solutionNote="",this.showResolveModal=!1,this.showImagePreview=!1,this.selectedImagePath=null,this.showConfirmStatusModal=!1,this.pendingStatus=null,this.pendingStatusLabel=null,this.showReleaseModal=!1,this.releasing=!1,this.activeTab="comments",this.isSignalRConnected=!1,this.shouldScrollToBottom=!1,this.statusOptions=[],this.priorityOptions=[],this.isBrowser=Q(ct)}ngOnInit(){this.ticketId=this.route.snapshot.paramMap.get("id")||"",this.loadStaffProfile(),this.loadTicket(),this.loadComments(),this.loadHistory(),this.loadLookups(),this.isBrowser&&this.initSignalR(),this.refreshInterval=setInterval(()=>{console.log("Staff Ticket-Detail: Periodic comments refresh triggered"),this.loadComments()},2e3)}loadLookups(){this.paramSvc.getByGroup("TicketStatus").subscribe({next:t=>{let n=t?.data?.data||t?.data||t||[];this.statusOptions=(Array.isArray(n)?n:[]).map((e,r)=>({id:e.id,key:e.key,label:e.value,sortOrder:e.sortOrder??r+1,color:e.value2??e.color??null}))},error:()=>{this.statusOptions=[]}}),this.paramSvc.getByGroup("TicketPriority").subscribe({next:t=>{let n=t?.data?.data||t?.data||t||[];this.priorityOptions=(Array.isArray(n)?n:[]).map((e,r)=>({id:e.id,key:e.key,label:e.value,sortOrder:e.sortOrder??r+1,color:e.value2??e.color??null}))},error:()=>{this.priorityOptions=[]}})}getStatusColor(t){let n=Number(t);return this.statusOptions.find(r=>Number(r.sortOrder??r.id)===n||String(r.id)===String(t)||String(r.key)===String(t)||r.label===t)?.color??null}getPriorityColor(t){let n=Number(t);return this.priorityOptions.find(r=>Number(r.sortOrder??r.id)===n||String(r.id)===String(t)||String(r.key)===String(t)||r.label===t)?.color??null}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval),this.ticketId&&this.signalRService.leaveTicketGroup(this.ticketId),this.commentSubscription?.unsubscribe()}ngAfterViewChecked(){this.shouldScrollToBottom&&(this.scrollToBottom(),this.shouldScrollToBottom=!1)}scrollToBottom(){setTimeout(()=>{try{if(this.commentsContainer){let t=this.commentsContainer.nativeElement;t.scrollTop=t.scrollHeight}}catch{}},100)}initSignalR(){return N(this,null,function*(){if(!this.isBrowser){console.log("SignalR: Not in browser environment");return}let t=localStorage.getItem("token")||sessionStorage.getItem("token");if(!t){console.warn("SignalR: No token found. User may not be authenticated.");return}try{console.log("SignalR: Staff - Attempting to start connection"),yield this.signalRService.startConnection(t),console.log("SignalR: Staff - Joining ticket group",this.ticketId),yield this.signalRService.joinTicketGroup(this.ticketId),this.isSignalRConnected=!0,console.log("SignalR: Staff - Successfully connected and joined group"),this.commentSubscription=this.signalRService.commentReceived$.subscribe(n=>{console.log("Staff-Detail: Received comment from SignalR:",n),n.ticketId===this.ticketId&&(this.comments.some(r=>r.id===n.id)?console.log("Staff-Detail: Comment already exists, skipping"):(console.log("Staff-Detail: Adding new comment to list"),this.comments.push(n),this.shouldScrollToBottom=!0,this.loadHistory()))})}catch(n){console.error("SignalR: Connection failed:",n),this.isSignalRConnected=!1,console.warn("SignalR: Real-time updates disabled for staff")}})}openImagePreview(t){this.selectedImagePath=t,this.showImagePreview=!0}loadStaffProfile(){this.staffService.getMyProfile().subscribe({next:t=>{t.success&&(this.staffProfile=t.data,this.checkOwnership())}})}checkOwnership(){if(this.ticket&&this.staffProfile){let t=(this.ticket.assignedPerson||"").toString().trim().toLocaleLowerCase("tr-TR"),n=(this.staffProfile.fullName||"").toString().trim().toLocaleLowerCase("tr-TR");this.isMyTicket=t.length>0&&t===n}}loadTicket(){this.staffService.getTicketDetail(this.ticketId).subscribe({next:t=>{t.success&&(this.ticket=t.data,this.checkOwnership()),this.isLoading=!1},error:t=>{this.error="Ticket y\xFCklenirken hata olu\u015Ftu",this.isLoading=!1}})}claimTicket(){this.staffService.claimTicket(this.ticketId).subscribe({next:t=>{t.success&&(this.successMessage="Ticket \xFCstlenildi!",this.loadTicket(),this.loadStaffProfile(),setTimeout(()=>this.successMessage=null,3e3))},error:t=>{this.error=t.error?.message||"Ticket \xFCstlenilirken hata olu\u015Ftu"}})}loadComments(){this.staffService.getTicketComments(this.ticketId).subscribe({next:t=>{if(t.success){let n=t.data||[];n=n.map(e=>e.isAdminReply&&e.authorName!=="Admin"?V(E({},e),{isStaff:!0}):e),this.comments=n,this.shouldScrollToBottom=!0}}})}loadHistory(){this.staffService.getTicketHistory(this.ticketId).subscribe({next:t=>{t.success&&(this.history=t.data)}})}addComment(){if(!this.isMyTicket){this.error="Ticket\u0131 \xFCstlenmeden mesaj g\xF6nderemezsiniz";return}this.newComment.trim()&&this.staffService.addComment(this.ticketId,this.newComment).subscribe({next:t=>{t.success&&(this.newComment="",this.loadComments(),this.loadHistory(),this.successMessage="Yorum eklendi",setTimeout(()=>this.successMessage=null,3e3))},error:t=>{this.error=t.error?.message||"Yorum eklenirken hata olu\u015Ftu"}})}updateStatus(t){this.staffService.updateTicketStatus(this.ticketId,t).subscribe({next:n=>{n.success&&(this.loadTicket(),this.loadHistory(),this.successMessage="Durum g\xFCncellendi",setTimeout(()=>this.successMessage=null,3e3))},error:n=>{this.error=n.error?.message||"Durum g\xFCncellenirken hata olu\u015Ftu"}})}resolveTicket(){if(!this.solutionNote.trim()){this.error="\xC7\xF6z\xFCm notu gerekli";return}this.staffService.resolveTicket(this.ticketId,this.solutionNote).subscribe({next:t=>{t.success&&(this.showResolveModal=!1,this.solutionNote="",this.loadTicket(),this.loadHistory(),this.successMessage="Ticket ba\u015Far\u0131yla \xE7\xF6z\xFCld\xFC!",setTimeout(()=>this.successMessage=null,3e3))},error:t=>{this.error=t.error?.message||"Ticket \xE7\xF6z\xFCl\xFCrken hata olu\u015Ftu"}})}onStatusSelect(t){let n=t.target,e=n?.value;if(e==null)return;let r=this.statusOptions.find(b=>String(b.sortOrder??b.id)===String(e)||String(b.id)===String(e)||String(b.key)===String(e));if(!r){this.error="Ge\xE7ersiz durum de\u011Feri",n&&(n.value=(this.ticket?.status??"")+""),console.debug("Status select - selected not found. statusOptions=",this.statusOptions,"value=",e);return}let h=null;if(r.key!==void 0&&r.key!==null&&!isNaN(Number(r.key))?h=Number(r.key):r.sortOrder!==void 0&&r.sortOrder!==null&&!isNaN(Number(r.sortOrder))?h=Number(r.sortOrder):r.id!==void 0&&r.id!==null&&!isNaN(Number(r.id))&&(h=Number(r.id)),h===null){this.error="Ge\xE7ersiz durum de\u011Feri",n&&(n.value=(this.ticket?.status??"")+""),console.debug("Status select - resolved selected but no numeric sendValue. selected=",r);return}this.pendingStatus=h,this.pendingStatusLabel=r.label||String(h),this.showConfirmStatusModal=!0;try{n&&(n.value=(this.ticket?.status??"")+"")}catch{}}changeTicketStatus(t,n){console.debug("Attempting status change",{ticketId:t,newStatus:n}),this.staffService.updateTicketStatus(String(t),n).subscribe({next:e=>{if(console.debug("Status change response",e),e&&e.success){let r=this.ticket;r&&r.id===t&&(r.status=Number(n),this.loadTicket()),this.successMessage="Ticket durumu ba\u015Far\u0131yla g\xFCncellendi",setTimeout(()=>this.successMessage=null,3e3)}else e&&e.message&&(this.error=e.message)},error:e=>{console.debug("Status change error",e),this.error=e.error?.message||"Ticket durumu g\xFCncellenirken hata olu\u015Ftu"}})}confirmStatusChange(){if(this.pendingStatus===null)return;let t=this.pendingStatus;this.showConfirmStatusModal=!1,this.pendingStatus=null,this.pendingStatusLabel=null,this.updateStatus(t)}cancelStatusChange(){this.showConfirmStatusModal=!1,this.pendingStatus=null,this.pendingStatusLabel=null}releaseTicket(){this.showReleaseModal=!0}confirmRelease(){this.releasing=!0,this.staffService.releaseTicket(this.ticketId).subscribe({next:t=>{this.releasing=!1,this.showReleaseModal=!1,t.success?this.router.navigate(["/staff/my-tickets"]):this.error=t.message||"Ticket b\u0131rak\u0131l\u0131rken hata olu\u015Ftu"},error:t=>{this.releasing=!1,this.showReleaseModal=!1,this.error=t.error?.message||"Ticket b\u0131rak\u0131l\u0131rken hata olu\u015Ftu"}})}cancelRelease(){this.showReleaseModal=!1}getStatusText(t){let n=Number(t),e=this.statusOptions.find(r=>Number(r.sortOrder??r.id)===n||String(r.id)===String(t)||String(r.key)===String(t)||r.label===t);if(e)return e.label||"Bilinmiyor";switch(t){case 1:return"A\xE7\u0131k";case 2:return"\u0130\u015Flemde";case 3:return"M\xFC\u015Fteri Bekliyor";case 4:return"\xC7\xF6z\xFCld\xFC";case 5:return"Kapal\u0131";default:return"Bilinmiyor"}}getStatusClass(t){let n=Number(t),e=this.statusOptions.find(r=>Number(r.sortOrder??r.id)===n||String(r.id)===String(t)||String(r.key)===String(t)||r.label===t);if(e)switch(Number(e.sortOrder??e.id)){case 1:return"status-open";case 2:return"status-processing";case 3:return"status-waiting";case 4:return"status-resolved";case 5:return"status-closed";default:return""}switch(t){case 1:return"status-open";case 2:return"status-processing";case 3:return"status-waiting";case 4:return"status-resolved";case 5:return"status-closed";default:return""}}getPriorityText(t){let n=Number(t),e=this.priorityOptions.find(r=>Number(r.sortOrder??r.id)===n||String(r.id)===String(t)||String(r.key)===String(t)||r.label===t);if(e)return e.label||"Normal";switch(t){case 1:return"D\xFC\u015F\xFCk";case 2:return"Normal";case 3:return"Y\xFCksek";case 4:return"Kritik";default:return"Normal"}}getPriorityClass(t){let n=Number(t),e=this.priorityOptions.find(r=>Number(r.sortOrder??r.id)===n||String(r.id)===String(t)||String(r.key)===String(t)||r.label===t);if(e)switch(Number(e.sortOrder??e.id)){case 1:return"priority-low";case 2:return"priority-normal";case 3:return"priority-high";case 4:return"priority-critical";default:return"priority-normal"}switch(t){case 1:return"priority-low";case 2:return"priority-normal";case 3:return"priority-high";case 4:return"priority-critical";default:return"priority-normal"}}formatDate(t){return new Date(t).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}formatTime(t){return new Date(t).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}isMyComment(t){return!this.staffProfile||!t?!1:t.authorName===this.staffProfile.fullName}static{this.\u0275fac=function(n){return new(n||i)(v($),v(q),v(st),v(at),v(rt),v(H),v(R))}}static{this.\u0275cmp=z({type:i,selectors:[["app-ticket-detail"]],viewQuery:function(n,e){if(n&1&&j(lt,5),n&2){let r;B(r=L())&&(e.commentsContainer=r.first)}},standalone:!0,features:[A],decls:10,vars:6,consts:[["commentsContainer",""],[1,"ticket-detail-container"],[1,"back-nav"],[1,"back-link",3,"click"],["class","loading-state",4,"ngIf"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","ticket-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","image-preview-overlay",3,"click",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"error-message"],[1,"close-btn",3,"click"],[1,"success-message"],[1,"ticket-content"],[1,"ticket-header"],[1,"header-left"],[1,"ticket-meta"],[1,"ticket-id"],[1,"badge",3,"ngClass"],[1,"header-actions"],[4,"ngIf"],["class","assigned-info",4,"ngIf"],[1,"content-grid"],[1,"detail-section"],[1,"detail-card"],[1,"detail-row"],[1,"description"],["class","detail-row",4,"ngIf"],["class","detail-card",4,"ngIf"],[1,"activity-section"],[1,"tabs"],[1,"tab",3,"click"],["class","tab-content",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"status-select-label"],[1,"status-select-wrap"],[1,"status-pill"],[1,"status-dropdown",3,"change","value"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"status-caret"],[1,"btn","btn-secondary",3,"click"],[3,"value","selected"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click","disabled"],[1,"spinner-sm"],[1,"assigned-info"],[1,"ticket-image-grid"],["class","ticket-image-tile","type","button",3,"click",4,"ngFor","ngForOf"],["type","button",1,"ticket-image-tile",3,"click"],[1,"ticket-image",3,"src","alt"],[1,"image-overlay"],[1,"solution-note"],[1,"tab-content"],[1,"comments-list-v2"],["class","empty-state",4,"ngIf"],["class","comment-item-v3",3,"ngClass",4,"ngFor","ngForOf"],["class","add-comment-v2",4,"ngIf"],[1,"empty-state"],[1,"comment-item-v3",3,"ngClass"],[1,"comment-bubble-v2",3,"ngClass"],[1,"bubble-header"],[1,"sender-name"],["class","support-badge",4,"ngIf"],[1,"message-time"],[1,"message-content-v2"],[1,"support-badge"],[1,"add-comment-v2"],[1,"input-wrapper"],["placeholder","Mesaj\u0131n\u0131z\u0131 yaz\u0131n...","rows","2",3,"ngModelChange","ngModel"],[1,"btn-send-v2",3,"click","disabled"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","22","y1","2","x2","11","y2","13"],["points","22 2 15 22 11 13 2 9 22 2"],[1,"history-list"],["class","history-item",4,"ngFor","ngForOf"],[1,"history-item"],[1,"history-icon"],[1,"history-content"],[1,"history-date"],["placeholder","Yap\u0131lan i\u015Flem ve \xE7\xF6z\xFCm\xFC a\xE7\u0131klay\u0131n...","rows","5",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"image-preview-overlay",3,"click"],[1,"preview-content",3,"click"],[1,"btn-close-preview",3,"click"],["alt","B\xFCy\xFCk G\xF6rsel",3,"src"]],template:function(n,e){n&1&&(o(0,"div",1)(1,"div",2)(2,"button",3),g("click",function(){return e.location.back()}),c(3," \u2190 Geri D\xF6n "),a()(),_(4,mt,4,0,"div",4)(5,pt,4,1,"div",5)(6,ut,4,1,"div",6)(7,Bt,49,33,"div",7),a(),_(8,Lt,16,1,"div",8)(9,At,5,1,"div",9)),n&2&&(s(4),d("ngIf",e.isLoading),s(),d("ngIf",e.error),s(),d("ngIf",e.successMessage),s(),d("ngIf",!e.isLoading&&e.ticket),s(),d("ngIf",e.showResolveModal),s(),d("ngIf",e.showImagePreview))},dependencies:[K,U,Y,W,J,ot,nt,it,Z,tt,et],styles:[".ticket-detail-container[_ngcontent-%COMP%]{padding:16px;max-width:1400px;margin:0 auto}.back-nav[_ngcontent-%COMP%]{margin-bottom:16px}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#065f46;text-decoration:none;font-weight:500;display:inline-flex;align-items:center;gap:8px;background:none;border:none;padding:0;font-size:14px;cursor:pointer}.back-nav[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e5e7eb;border-top-color:#059669;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{padding:12px 16px;border-radius:8px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center}.error-message[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626;border:1px solid #fecaca}.success-message[_ngcontent-%COMP%]{background:#d1fae5;color:#059669;border:1px solid #a7f3d0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;color:inherit;opacity:.7}.close-btn[_ngcontent-%COMP%]:hover{opacity:1}.ticket-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid #e5e7eb}.ticket-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1f2937;margin-bottom:12px}.ticket-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .ticket-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.ticket-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .ticket-meta[_ngcontent-%COMP%]   .ticket-id[_ngcontent-%COMP%]{color:#6b7280;font-weight:500}.ticket-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.ticket-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .assigned-info[_ngcontent-%COMP%]{padding:8px 16px;background:#f3f4f6;border-radius:8px;font-size:14px;color:#6b7280}@media (max-width: 768px){.ticket-detail-container[_ngcontent-%COMP%]{padding:12px}.ticket-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.ticket-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{width:100%}.ticket-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .ticket-meta[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}.ticket-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;flex-wrap:wrap;justify-content:flex-start}}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.status-open[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.status-processing[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.status-resolved[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.priority-low[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.priority-normal[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.priority-high[_ngcontent-%COMP%]{background:#fed7aa;color:#ea580c}.priority-critical[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.status-select-label[_ngcontent-%COMP%]{display:inline-block}.status-select-wrap[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;position:relative}.status-pill[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;display:inline-block;flex:0 0 10px;box-shadow:0 1px 2px #0000001f;border:1px solid rgba(0,0,0,.06)}.status-dropdown[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;color:#111827;border:1px solid #e5e7eb;padding:8px 28px 8px 10px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;min-width:140px}.status-caret[_ngcontent-%COMP%]{position:absolute;right:10px;pointer-events:none;color:#6b7280;font-size:12px}@media (max-width: 480px){.status-dropdown[_ngcontent-%COMP%]{min-width:110px}}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af,#3b82f6);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff}.btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media (max-width: 1024px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.detail-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;box-shadow:0 1px 3px #0000001a}.detail-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1f2937;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #e5e7eb}.detail-card[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{margin-bottom:12px}.detail-card[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-card[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#6b7280;text-transform:uppercase;margin-bottom:4px}.detail-card[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .detail-card[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1f2937;font-size:14px}.detail-card[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{line-height:1.6;white-space:pre-wrap}.detail-card[_ngcontent-%COMP%]   .solution-note[_ngcontent-%COMP%]{background:#eff6ff;padding:12px;border-radius:8px;border-left:3px solid #3b82f6;font-size:14px;line-height:1.6;color:#1f2937}.ticket-image-grid[_ngcontent-%COMP%]{margin-top:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}.ticket-image-tile[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:8px;padding:0;background:#fff;overflow:hidden;position:relative;cursor:zoom-in}.ticket-image-tile[_ngcontent-%COMP%]   .ticket-image[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;display:block;transition:transform .2s}.ticket-image-tile[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s}.ticket-image-tile[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:600;background:#0009;padding:6px 12px;border-radius:20px}.ticket-image-tile[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.ticket-image-tile[_ngcontent-%COMP%]:hover   .ticket-image[_ngcontent-%COMP%]{transform:scale(1.02)}.image-preview-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:2000;padding:40px;cursor:zoom-out}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{position:relative;max-width:95%;max-height:95%;display:flex;align-items:center;justify-content:center;cursor:default}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 0 30px #00000080}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .btn-close-preview[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;background:#ffffff1a;border:2px solid #fff;color:#fff;font-size:30px;cursor:pointer;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s;padding:0;line-height:1}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .btn-close-preview[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.activity-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a;overflow:hidden;align-self:start;position:sticky;top:20px}.tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e5e7eb}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1;padding:10px 16px;background:none;border:none;font-size:14px;font-weight:600;color:#6b7280;cursor:pointer;border-bottom:2px solid transparent;transition:all .2s}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{color:#3b82f6;background:#eff6ff}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#3b82f6;border-bottom-color:#3b82f6}.tab-content[_ngcontent-%COMP%]{padding:16px}.comments-list-v2[_ngcontent-%COMP%]{max-height:500px;overflow-y:auto;display:flex;flex-direction:column;gap:16px;padding:15px;background:#fff}.comments-list-v2[_ngcontent-%COMP%]   .comment-item-v3[_ngcontent-%COMP%]{display:flex;width:100%}.comments-list-v2[_ngcontent-%COMP%]   .comment-item-v3.my-message-row[_ngcontent-%COMP%]{justify-content:flex-end}.comments-list-v2[_ngcontent-%COMP%]   .comment-item-v3.my-message-row[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]{background:#eff6ff;border:1px solid #dbeafe;border-right:4px solid #3b82f6;border-radius:16px 16px 0;box-shadow:0 4px 6px -1px #0000001a}.comments-list-v2[_ngcontent-%COMP%]   .comment-item-v3.other-message-row[_ngcontent-%COMP%]{justify-content:flex-start}.comments-list-v2[_ngcontent-%COMP%]   .comment-item-v3.other-message-row[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]{background:#f9fafb;border:1px solid #f3f4f6;border-left:4px solid #9ca3af;border-radius:16px 16px 16px 0;box-shadow:0 4px 6px -1px #0000000d}.comments-list-v2[_ngcontent-%COMP%]   .comment-item-v3.other-message-row[_ngcontent-%COMP%]   .comment-bubble-v2.admin-bubble[_ngcontent-%COMP%]{background:#f3f4f6;border-left:4px solid #3b82f6}.comments-list-v2[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]{max-width:80%;padding:12px 16px;position:relative}.comments-list-v2[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]   .bubble-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:6px}.comments-list-v2[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]   .bubble-header[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{font-weight:700;font-size:13px;color:#1f2937}.comments-list-v2[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]   .bubble-header[_ngcontent-%COMP%]   .support-badge[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;font-size:9px;font-weight:800;padding:2px 6px;border-radius:4px;text-transform:uppercase}.comments-list-v2[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]   .bubble-header[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;margin-left:auto}.comments-list-v2[_ngcontent-%COMP%]   .comment-bubble-v2[_ngcontent-%COMP%]   .message-content-v2[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#4b5563;line-height:1.5;white-space:pre-wrap}.add-comment-v2[_ngcontent-%COMP%]{margin-top:15px;padding:15px;background:#fff;border-top:1px solid #f3f4f6}.add-comment-v2[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.add-comment-v2[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;padding:12px;border:1px solid #e5e7eb;border-radius:12px;font-size:14px;resize:none;font-family:inherit;background:#f9fafb;transition:all .2s}.add-comment-v2[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;background:#fff;box-shadow:0 0 0 3px #3b82f61a}.add-comment-v2[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-send-v2[_ngcontent-%COMP%]{width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:#3b82f6;color:#fff;border:none;border-radius:10px;cursor:pointer;transition:all .2s}.add-comment-v2[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-send-v2[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;transform:translateY(-2px)}.add-comment-v2[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-send-v2[_ngcontent-%COMP%]:disabled{background:#d1d5db;cursor:not-allowed}.add-comment-v2[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .btn-send-v2[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:rotate(45deg);margin-left:-4px;margin-top:4px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#9ca3af}.history-list[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}.history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px 0;border-bottom:1px solid #f3f4f6}.history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-icon[_ngcontent-%COMP%]{width:36px;height:36px;background:#f3f4f6;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]{flex:1}.history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;color:#1f2937;font-size:14px}.history-list[_ngcontent-%COMP%]   .history-item[_ngcontent-%COMP%]   .history-content[_ngcontent-%COMP%]   .history-date[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:500px;margin:20px;box-shadow:0 20px 40px #0003}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e5e7eb}.modal-content[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#1f2937}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:20px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#374151;margin-bottom:8px}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;resize:vertical;font-family:inherit}.modal-content[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#059669;box-shadow:0 0 0 3px #0596691a}.modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end;gap:12px}"]})}}return i})();export{ie as TicketDetailComponent};
