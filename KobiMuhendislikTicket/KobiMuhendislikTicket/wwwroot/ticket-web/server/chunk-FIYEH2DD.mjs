import './polyfills.server.mjs';
import{a as L}from"./chunk-EBWQNXRC.mjs";import{b as D,c as z,f as I,r as W}from"./chunk-EMYJKDQA.mjs";import"./chunk-2ZDBELSD.mjs";import{j as T,n as F}from"./chunk-4L5IZ2U2.mjs";import{Ma as C,Oa as M,Ta as p,V as w,Wa as y,Xa as k,Ya as n,Za as i,_a as S,ba as l,bb as b,ca as c,cb as u,db as d,dc as V,ib as r,jb as f,kb as O,nb as x,ob as h,pb as P,rb as E,ya as s,za as v}from"./chunk-M6NPGADT.mjs";import"./chunk-VVCT4QZE.mjs";var A=(o,_)=>_.id;function j(o,_){if(o&1){let t=b();n(0,"div",11),r(1),n(2,"button",14),u("click",function(){l(t);let e=d();return c(e.errorMessage="")}),r(3,"\xD7"),i()()}if(o&2){let t=d();s(),O(" ",t.errorMessage," ")}}function N(o,_){o&1&&(n(0,"div",12),S(1,"div",15),n(2,"p"),r(3,"\xDCr\xFCnler y\xFCkleniyor..."),i()())}function B(o,_){o&1&&(n(0,"div",16)(1,"h3"),r(2,"\xDCr\xFCn bulunamad\u0131"),i(),n(3,"p"),r(4,"Araman\u0131za uygun \xFCr\xFCn yok."),i()())}function Y(o,_){if(o&1){let t=b();n(0,"tr",19),u("click",function(){let e=l(t).$implicit,m=d(3);return c(m.openProduct(e.id))}),n(1,"td",20),r(2),i(),n(3,"td"),r(4),i(),n(5,"td"),r(6),i(),n(7,"td",21)(8,"button",22),u("click",function(e){let m=l(t).$implicit,g=d(3);return c(g.openEditModal(m,e))}),r(9,"D\xFCzenle"),i(),n(10,"button",23),u("click",function(e){let m=l(t).$implicit,g=d(3);return c(g.openDeleteModal(m,e))}),r(11,"Sil"),i()()()}if(o&2){let t=_.$implicit;s(2),f(t.name),s(2),f(t.description||"-"),s(2),f(t.tenantCount)}}function K(o,_){if(o&1&&(n(0,"div",17)(1,"table",18)(2,"thead")(3,"tr")(4,"th"),r(5,"\xDCr\xFCn Ad\u0131"),i(),n(6,"th"),r(7,"A\xE7\u0131klama"),i(),n(8,"th"),r(9,"Firma Say\u0131s\u0131"),i(),n(10,"th"),r(11,"\u0130\u015Flem"),i()()(),n(12,"tbody"),y(13,Y,12,3,"tr",null,A),i()()()),o&2){let t=d(2);s(13),k(t.filteredProducts)}}function R(o,_){if(o&1&&C(0,B,5,0,"div",16)(1,K,15,0),o&2){let t=d();p(0,t.filteredProducts.length===0?0:1)}}function G(o,_){o&1&&r(0," Kaydediliyor... ")}function q(o,_){o&1&&r(0," Kaydet ")}function H(o,_){if(o&1){let t=b();n(0,"div",24),u("click",function(){l(t);let e=d();return c(e.closeCreateModal())}),n(1,"div",25),u("click",function(e){return l(t),c(e.stopPropagation())}),n(2,"div",26)(3,"h2"),r(4,"Yeni \xDCr\xFCn Ekle"),i(),n(5,"button",27),u("click",function(){l(t);let e=d();return c(e.closeCreateModal())}),r(6,"\xD7"),i()(),n(7,"div",28)(8,"div",29)(9,"label",30),r(10,"\xDCr\xFCn Ad\u0131 *"),i(),n(11,"input",31),P("ngModelChange",function(e){l(t);let m=d();return h(m.newProduct.name,e)||(m.newProduct.name=e),c(e)}),i()(),n(12,"div",29)(13,"label",32),r(14,"A\xE7\u0131klama"),i(),n(15,"textarea",33),P("ngModelChange",function(e){l(t);let m=d();return h(m.newProduct.description,e)||(m.newProduct.description=e),c(e)}),i()()(),n(16,"div",34)(17,"button",7),u("click",function(){l(t);let e=d();return c(e.closeCreateModal())}),r(18,"\u0130ptal"),i(),n(19,"button",35),u("click",function(){l(t);let e=d();return c(e.createProduct())}),C(20,G,1,0)(21,q,1,0),i()()()()}if(o&2){let t=d();s(11),x("ngModel",t.newProduct.name),s(4),x("ngModel",t.newProduct.description),s(4),M("disabled",t.isSubmitting),s(),p(20,t.isSubmitting?20:21)}}function J(o,_){o&1&&r(0," Kaydediliyor... ")}function Q(o,_){o&1&&r(0," G\xFCncelle ")}function U(o,_){if(o&1){let t=b();n(0,"div",24),u("click",function(){l(t);let e=d();return c(e.closeEditModal())}),n(1,"div",25),u("click",function(e){return l(t),c(e.stopPropagation())}),n(2,"div",26)(3,"h2"),r(4,"\xDCr\xFCn D\xFCzenle"),i(),n(5,"button",27),u("click",function(){l(t);let e=d();return c(e.closeEditModal())}),r(6,"\xD7"),i()(),n(7,"div",28)(8,"div",29)(9,"label",36),r(10,"\xDCr\xFCn Ad\u0131 *"),i(),n(11,"input",37),P("ngModelChange",function(e){l(t);let m=d();return h(m.editProduct.name,e)||(m.editProduct.name=e),c(e)}),i()(),n(12,"div",29)(13,"label",38),r(14,"A\xE7\u0131klama"),i(),n(15,"textarea",39),P("ngModelChange",function(e){l(t);let m=d();return h(m.editProduct.description,e)||(m.editProduct.description=e),c(e)}),i()()(),n(16,"div",34)(17,"button",7),u("click",function(){l(t);let e=d();return c(e.closeEditModal())}),r(18,"\u0130ptal"),i(),n(19,"button",35),u("click",function(){l(t);let e=d();return c(e.updateProduct())}),C(20,J,1,0)(21,Q,1,0),i()()()()}if(o&2){let t=d();s(11),x("ngModel",t.editProduct.name),s(4),x("ngModel",t.editProduct.description),s(4),M("disabled",t.isSubmitting),s(),p(20,t.isSubmitting?20:21)}}function X(o,_){o&1&&r(0," Siliniyor... ")}function Z(o,_){o&1&&r(0," Sil ")}function $(o,_){if(o&1){let t=b();n(0,"div",24),u("click",function(){l(t);let e=d();return c(e.closeDeleteModal())}),n(1,"div",40),u("click",function(e){return l(t),c(e.stopPropagation())}),n(2,"div",26)(3,"h2"),r(4,"\xDCr\xFCn Sil"),i(),n(5,"button",27),u("click",function(){l(t);let e=d();return c(e.closeDeleteModal())}),r(6,"\xD7"),i()(),n(7,"div",28)(8,"p")(9,"strong"),r(10),i(),r(11," \xFCr\xFCn\xFCn\xFC silmek istedi\u011Finize emin misiniz? "),i()(),n(12,"div",34)(13,"button",7),u("click",function(){l(t);let e=d();return c(e.closeDeleteModal())}),r(14,"\u0130ptal"),i(),n(15,"button",41),u("click",function(){l(t);let e=d();return c(e.deleteProduct())}),C(16,X,1,0)(17,Z,1,0),i()()()()}if(o&2){let t=d();s(10),f(t.editProduct.name),s(5),M("disabled",t.isSubmitting),s(),p(16,t.isSubmitting?16:17)}}var dt=(()=>{class o{constructor(t,a){this.productService=t,this.router=a,this.products=[],this.filteredProducts=[],this.isLoading=!0,this.errorMessage="",this.searchTerm="",this.showCreateModal=!1,this.showEditModal=!1,this.showDeleteModal=!1,this.isSubmitting=!1,this.selectedProductId=null,this.newProduct={name:"",description:""},this.editProduct={name:"",description:""}}ngOnInit(){this.loadProducts()}loadProducts(){this.isLoading=!0,this.productService.getProducts().subscribe({next:t=>{this.products=t?.data||[],this.applyFilter(),this.isLoading=!1},error:()=>{this.errorMessage="\xDCr\xFCnler y\xFCklenirken bir hata olu\u015Ftu.",this.isLoading=!1}})}applyFilter(){let t=this.searchTerm.trim().toLowerCase();if(!t){this.filteredProducts=[...this.products];return}this.filteredProducts=this.products.filter(a=>a.name.toLowerCase().includes(t)||(a.description||"").toLowerCase().includes(t))}onSearch(){this.applyFilter()}openProduct(t){this.router.navigate(["/admin/products",t])}openEditModal(t,a){a?.stopPropagation(),this.selectedProductId=t.id,this.editProduct={name:t.name,description:t.description||""},this.errorMessage="",this.showEditModal=!0}closeEditModal(){this.showEditModal=!1,this.selectedProductId=null}updateProduct(){if(this.selectedProductId){if(!this.editProduct.name?.trim()){this.errorMessage="\xDCr\xFCn ad\u0131 zorunludur.";return}this.isSubmitting=!0,this.errorMessage="",this.productService.updateProduct(this.selectedProductId,this.editProduct).subscribe({next:()=>{this.isSubmitting=!1,this.closeEditModal(),this.loadProducts()},error:t=>{this.isSubmitting=!1,this.errorMessage=t?.error?.message||"\xDCr\xFCn g\xFCncellenirken bir hata olu\u015Ftu."}})}}openDeleteModal(t,a){a?.stopPropagation(),this.selectedProductId=t.id,this.editProduct={name:t.name,description:t.description||""},this.errorMessage="",this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.selectedProductId=null}deleteProduct(){this.selectedProductId&&(this.isSubmitting=!0,this.errorMessage="",this.productService.deleteProduct(this.selectedProductId).subscribe({next:()=>{this.isSubmitting=!1,this.closeDeleteModal(),this.loadProducts()},error:t=>{this.isSubmitting=!1,this.errorMessage=t?.error?.message||"\xDCr\xFCn silinirken bir hata olu\u015Ftu."}}))}openCreateModal(){this.newProduct={name:"",description:""},this.errorMessage="",this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}createProduct(){if(!this.newProduct.name?.trim()){this.errorMessage="\xDCr\xFCn ad\u0131 zorunludur.";return}this.isSubmitting=!0,this.errorMessage="",this.productService.createProduct(this.newProduct).subscribe({next:()=>{this.isSubmitting=!1,this.showCreateModal=!1,this.loadProducts()},error:t=>{this.isSubmitting=!1,this.errorMessage=t?.error?.message||"\xDCr\xFCn eklenirken bir hata olu\u015Ftu."}})}static{this.\u0275fac=function(a){return new(a||o)(v(L),v(T))}}static{this.\u0275cmp=w({type:o,selectors:[["app-products"]],standalone:!0,features:[E],decls:21,vars:6,consts:[[1,"products-page"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"filters-section"],[1,"search-box"],["type","text","placeholder","\xDCr\xFCn ad\u0131 veya a\xE7\u0131klama ara...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"alert","alert-error"],[1,"loading-container"],[1,"modal-overlay"],[1,"alert-close",3,"click"],[1,"spinner"],[1,"empty-state"],[1,"table-container"],[1,"data-table"],[3,"click"],[1,"product-name"],[1,"actions"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"form-group"],["for","productName"],["id","productName","type","text","placeholder","\xD6r: izRP Finans Mod\xFCl\xFC",1,"form-input",3,"ngModelChange","ngModel"],["for","productDescription"],["id","productDescription","rows","3","placeholder","\xDCr\xFCn a\xE7\u0131klamas\u0131",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click","disabled"],["for","editProductName"],["id","editProductName","type","text",1,"form-input",3,"ngModelChange","ngModel"],["for","editProductDescription"],["id","editProductDescription","rows","3",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal","modal-sm",3,"click"],[1,"btn","btn-danger",3,"click","disabled"]],template:function(a,e){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4,"\xDCr\xFCnler"),i(),n(5,"p",4),r(6,"Global \xFCr\xFCnleri ve ba\u011Fl\u0131 firma say\u0131lar\u0131n\u0131 g\xF6r\xFCnt\xFCleyin"),i()(),n(7,"div",5)(8,"button",6),u("click",function(){return e.openCreateModal()}),r(9,"Yeni \xDCr\xFCn"),i(),n(10,"button",7),u("click",function(){return e.loadProducts()}),r(11,"Yenile"),i()()(),n(12,"div",8)(13,"div",9)(14,"input",10),P("ngModelChange",function(g){return h(e.searchTerm,g)||(e.searchTerm=g),g}),u("input",function(){return e.onSearch()}),i()()(),C(15,j,4,1,"div",11)(16,N,4,0,"div",12)(17,R,2,1),i(),C(18,H,22,4,"div",13)(19,U,22,4,"div",13)(20,$,18,3,"div",13)),a&2&&(s(14),x("ngModel",e.searchTerm),s(),p(15,e.errorMessage?15:-1),s(),p(16,e.isLoading?16:17),s(2),p(18,e.showCreateModal?18:-1),s(),p(19,e.showEditModal?19:-1),s(),p(20,e.showDeleteModal?20:-1))},dependencies:[V,W,D,z,I,F],styles:[".products-page[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.page-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:1.5rem;gap:1rem;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--text-primary);margin:0 0 .25rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1.25rem;border-radius:var(--radius-md);font-weight:500;font-size:.875rem;cursor:pointer;transition:all var(--transition-fast);border:none}.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-primary);color:var(--text-primary);border:1px solid var(--border-color)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--bg-secondary)}.btn-primary[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-danger[_ngcontent-%COMP%]{background:#dc2626;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#b91c1c}.filters-section[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-lg);padding:1.25rem;margin-bottom:1.5rem;box-shadow:var(--shadow-sm)}.search-box[_ngcontent-%COMP%]{max-width:420px}.search-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--border-color);background:var(--bg-primary);border-radius:var(--radius-md);padding:.625rem .875rem;font-size:.875rem;color:var(--text-primary)}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-light)}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;border-radius:var(--radius-md);margin-bottom:1rem}.alert-error[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]{margin-left:auto;background:none;border:none;font-size:1.25rem;cursor:pointer;color:inherit;opacity:.7}.loading-container[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1.5rem;background:var(--bg-secondary);border-radius:var(--radius-lg)}.spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:3px solid var(--border-color);border-top-color:var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.table-container[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.25rem;text-align:left}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);background:var(--bg-primary)}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-primary);border-bottom:1px solid var(--border-light)}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;transition:background var(--transition-fast)}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--bg-primary)}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.data-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600}.data-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;white-space:nowrap}.btn-sm[_ngcontent-%COMP%]{padding:.35rem .65rem;font-size:.75rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.modal[_ngcontent-%COMP%]{width:100%;max-width:500px;background:var(--bg-secondary);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg)}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-bottom:1px solid var(--border-light)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;color:var(--text-primary)}.modal-close[_ngcontent-%COMP%]{border:none;background:none;font-size:1.25rem;cursor:pointer;color:var(--text-secondary)}.modal-body[_ngcontent-%COMP%]{padding:1.25rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1rem 1.25rem;border-top:1px solid var(--border-light)}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.4rem;font-size:.875rem;color:var(--text-primary)}.form-input[_ngcontent-%COMP%]{width:100%;border:1px solid var(--border-color);border-radius:var(--radius-md);padding:.625rem .75rem;font-size:.875rem;color:var(--text-primary);background:var(--bg-primary)}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}"]})}}return o})();export{dt as ProductsComponent};
