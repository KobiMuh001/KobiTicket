import './polyfills.server.mjs';
import{a as mt}from"./chunk-RINBVYQ6.mjs";import{a as dt}from"./chunk-SS4WB2BF.mjs";import{a as ct}from"./chunk-DXIUKFP5.mjs";import{b as et,c as nt,f as it,i as ot,j as at,k as rt,r as lt}from"./chunk-7OSF6RCL.mjs";import{a as st}from"./chunk-2E456LMH.mjs";import{a as tt}from"./chunk-TW7WQT2I.mjs";import{g as J,j as X,n as Z}from"./chunk-JGHH2ILE.mjs";import{$a as K,Ab as Y,Ba as N,Fa as s,Ga as P,Ta as C,Va as b,Wa as R,Xa as T,Za as j,_a as p,aa as A,ab as W,bb as w,cb as S,db as i,eb as a,fb as x,ia as u,ib as v,ja as f,jb as h,ka as M,kb as m,la as k,nb as H,ob as $,oc as Q,pb as U,rb as l,rc as q,sb as g,tb as O,va as G,wb as E,xb as I,yb as V}from"./chunk-5C2672OW.mjs";import{a as z,b as D,h as L}from"./chunk-VVCT4QZE.mjs";var _t=["commentsContainer"],pt=(n,d)=>d.value,gt=(n,d)=>d.id;function ut(n,d){if(n&1&&(i(0,"div",7)(1,"h1"),l(2),a(),i(3,"span"),l(4),a(),i(5,"span"),l(6),a()()),n&2){let t=m();s(2),O("Talep ",t.formatTicketId(t.ticket.id,t.ticket.ticketCode),""),s(),j("status-badge ",t.getStatusClass(t.ticket.status),""),R("background-color",t.getStatusColor(t.ticket.status))("color",t.getStatusColor(t.ticket.status)?"#fff":null),s(),O(" ",t.getStatusLabel(t.ticket.status)," "),s(),j("priority-badge ",t.getPriorityClass(t.ticket.priority),""),R("background-color",t.getPriorityColor(t.ticket.priority))("color",t.getPriorityColor(t.ticket.priority)?"#fff":null),s(),O(" ",t.getPriorityLabel(t.ticket.priority)," ")}}function ft(n,d){n&1&&(i(0,"div",8),x(1,"span",10),l(2," Kaydediliyor... "),a())}function Ct(n,d){n&1&&(i(0,"div",9),x(1,"div",11),i(2,"p"),l(3,"Y\xFCkleniyor..."),a()())}function xt(n,d){if(n&1){let t=v();i(0,"div",12),M(),i(1,"svg",13),x(2,"circle",14)(3,"path",15),a(),k(),i(4,"p"),l(5),a(),i(6,"button",16),h("click",function(){u(t);let e=m();return f(e.goBack())}),l(7,"Geri D\xF6n"),a()()}if(n&2){let t=m();s(5),g(t.error)}}function ht(n,d){if(n&1&&(i(0,"span",26),l(1),a()),n&2){let t=m(2);s(),g(t.comments.length)}}function bt(n,d){if(n&1&&(i(0,"span",26),l(1),a()),n&2){let t=m(2);s(),g(t.history.length)}}function vt(n,d){if(n&1){let t=v();i(0,"button",53),h("click",function(){let e=u(t).$implicit,r=m(4);return f(r.openImagePreview(e))}),x(1,"img",54),i(2,"div",55)(3,"span"),l(4,"Buyutmek icin tikla"),a()()()}if(n&2){let t=d.$implicit,o=m(4);s(),b("src",o.baseUrl+t,N)}}function Mt(n,d){if(n&1&&(i(0,"div",36)(1,"label"),l(2,"Ek Gorseller"),a(),i(3,"div",51),w(4,vt,5,1,"button",52,W),a()()),n&2){let t=m(3);s(4),S(t.ticket.imagePaths)}}function Pt(n,d){if(n&1){let t=v();i(0,"div",36)(1,"label"),l(2,"Ek Gorsel"),a(),i(3,"div",56)(4,"button",57),h("click",function(){u(t);let e=m(3);return f(e.openImagePreview(e.ticket.imagePath))}),x(5,"img",54),i(6,"div",55)(7,"span"),l(8,"Buyutmek icin tikla"),a()()()()()}if(n&2){let t=m(3);s(5),b("src",t.baseUrl+t.ticket.imagePath,N)}}function Ot(n,d){if(n&1&&(i(0,"div",39)(1,"div",36)(2,"label"),l(3,"\xDCr\xFCn"),a(),i(4,"p",37),l(5),a()()()),n&2){let t=m(3);s(5),g(t.ticket.assetName)}}function yt(n,d){if(n&1){let t=v();i(0,"div",58),h("click",function(){u(t);let e=m(3);return f(e.showImagePreview=!1)}),i(1,"div",59),h("click",function(e){return u(t),f(e.stopPropagation())}),i(2,"button",60),h("click",function(){u(t);let e=m(3);return f(e.showImagePreview=!1)}),l(3,"x"),a(),x(4,"img",61),a()()}if(n&2){let t=m(3);s(4),b("src",t.baseUrl+t.selectedImagePath,N)}}function kt(n,d){if(n&1&&(i(0,"div",42)(1,"label"),l(2,"\u015Eu an atanan"),a(),i(3,"div",62)(4,"div",63),l(5),a(),i(6,"span"),l(7),a()()()),n&2){let t=m(3);s(5),O(" ",t.ticket.assignedPerson.charAt(0).toUpperCase()," "),s(2),g(t.ticket.assignedPerson)}}function wt(n,d){n&1&&(i(0,"div",43),x(1,"span",45),l(2," Personeller y\xFCkleniyor... "),a())}function St(n,d){n&1&&(i(0,"p",64),l(1,"Aktif personel bulunamad\u0131"),a())}function Tt(n,d){if(n&1&&l(0),n&2){let t=m().$implicit;O(" (",t.department,") ")}}function Et(n,d){if(n&1&&(i(0,"option",49),l(1),C(2,Tt,1,1),a()),n&2){let t=d.$implicit;b("value",t.id),s(),O(" ",t.fullName," "),s(),p(2,t.department?2:-1)}}function It(n,d){if(n&1){let t=v();i(0,"select",65),V("ngModelChange",function(e){u(t);let r=m(3);return I(r.selectedStaffId,e)||(r.selectedStaffId=e),f(e)}),i(1,"option",48),l(2,"-- Personel Se\xE7in --"),a(),w(3,Et,3,3,"option",49,gt),a()}if(n&2){let t=m(3);E("ngModel",t.selectedStaffId),s(3),S(t.staffList)}}function Vt(n,d){n&1&&x(0,"span",45)}function Nt(n,d){if(n&1&&(i(0,"option",49),l(1),a()),n&2){let t=d.$implicit;b("value",t.value),s(),g(t.label)}}function Ft(n,d){if(n&1&&(i(0,"option",49),l(1),a()),n&2){let t=d.$implicit;b("value",t.value),s(),g(t.label)}}function Bt(n,d){if(n&1){let t=v();i(0,"div",29)(1,"div",32)(2,"div",33)(3,"div",34)(4,"h2"),l(5,"Talep Bilgileri"),a()(),i(6,"div",35)(7,"div",36)(8,"label"),l(9,"Ba\u015Fl\u0131k"),a(),i(10,"p",37),l(11),a()(),i(12,"div",36)(13,"label"),l(14,"A\xE7\u0131klama"),a(),i(15,"p",38),l(16),a()(),C(17,Mt,6,0,"div",36)(18,Pt,9,1),i(19,"div",39)(20,"div",36)(21,"label"),l(22,"Olu\u015Fturulma"),a(),i(23,"p",37),l(24),a()(),i(25,"div",36)(26,"label"),l(27,"Son G\xFCncelleme"),a(),i(28,"p",37),l(29),a()()()()(),i(30,"div",33)(31,"div",34)(32,"h2"),l(33,"M\xFC\u015Fteri Bilgileri"),a()(),i(34,"div",35)(35,"div",36)(36,"label"),l(37,"Firma"),a(),i(38,"p",37),l(39),a()(),i(40,"div",39)(41,"div",36)(42,"label"),l(43,"E-posta"),a(),i(44,"p",37),l(45),a()(),i(46,"div",36)(47,"label"),l(48,"Telefon"),a(),i(49,"p",37),l(50),a()()(),C(51,Ot,6,1,"div",39),a(),C(52,yt,5,1,"div",40),a()(),i(53,"div",41)(54,"div",33)(55,"div",34)(56,"h2"),l(57,"Atama"),a()(),i(58,"div",35),C(59,kt,8,2,"div",42),i(60,"div",36)(61,"label"),l(62,"Personel Se\xE7"),a(),C(63,wt,3,0,"div",43)(64,St,2,0)(65,It,5,1),a(),i(66,"button",44),h("click",function(){u(t);let e=m(2);return f(e.assignTicket())}),C(67,Vt,1,0,"span",45),l(68," Ata "),a()()(),i(69,"div",33)(70,"div",34)(71,"h2"),l(72,"Durum De\u011Fi\u015Ftir"),a()(),i(73,"div",35)(74,"div",46)(75,"select",47),V("ngModelChange",function(e){u(t);let r=m(2);return I(r.ticket.status,e)||(r.ticket.status=e),f(e)}),h("ngModelChange",function(e){u(t);let r=m(2);return f(r.updateStatus(e))}),i(76,"option",48),l(77,"-- Durum Se\xE7in --"),a(),w(78,Nt,2,2,"option",49,pt),a()()()(),i(80,"div",33)(81,"div",34)(82,"h2"),l(83,"\xD6ncelik De\u011Fi\u015Ftir"),a()(),i(84,"div",35)(85,"div",50)(86,"select",47),V("ngModelChange",function(e){u(t);let r=m(2);return I(r.ticket.priority,e)||(r.ticket.priority=e),f(e)}),h("ngModelChange",function(e){u(t);let r=m(2);return f(r.updatePriority(e))}),i(87,"option",48),l(88,"-- \xD6ncelik Se\xE7in --"),a(),w(89,Ft,2,2,"option",49,pt),a()()()()()()}if(n&2){let t=m(2);s(11),g(t.ticket.title),s(5),g(t.ticket.description),s(),p(17,t.ticket.imagePaths!=null&&t.ticket.imagePaths.length?17:t.ticket.imagePath?18:-1),s(7),g(t.formatFullDate(t.ticket.createdDate)),s(5),g(t.ticket.updatedDate?t.formatFullDate(t.ticket.updatedDate):"Hen\xFCz g\xFCncellenmedi"),s(10),g(t.ticket.tenantName||"-"),s(6),g(t.ticket.tenantEmail||"-"),s(5),g(t.ticket.tenantPhone||"-"),s(),p(51,t.ticket.assetName?51:-1),s(),p(52,t.showImagePreview?52:-1),s(7),p(59,t.ticket.assignedPerson?59:-1),s(4),p(63,t.loadingStaff?63:t.staffList.length===0?64:65),s(3),b("disabled",t.assigning||!t.selectedStaffId||t.loadingStaff),s(),p(67,t.assigning?67:-1),s(8),E("ngModel",t.ticket.status),b("disabled",t.saving),s(3),S(t.statusOptions),s(8),E("ngModel",t.ticket.priority),b("disabled",t.saving),s(3),S(t.priorityOptions)}}function zt(n,d){n&1&&(i(0,"div",67),M(),i(1,"svg",13),x(2,"path",25),a(),k(),i(3,"p"),l(4,"Hen\xFCz yorum yok"),a()())}function Dt(n,d){n&1&&(i(0,"span",75),l(1,"DESTEK"),a())}function Rt(n,d){if(n&1&&(i(0,"div",72)(1,"div",73)(2,"span",74),l(3),a(),C(4,Dt,2,0,"span",75),i(5,"span",76),l(6),a()(),i(7,"div",77),l(8),a()()),n&2){let t=d.$implicit,o=m(4);T("admin",t.isAdminReply&&!t.isStaff)("staff",t.isStaff),s(3),g(t.authorName),s(),p(4,t.isAdminReply?4:-1),s(2),g(o.formatDate(t.createdDate)),s(2),O(" ",t.message," ")}}function jt(n,d){if(n&1&&w(0,Rt,9,8,"div",71,gt),n&2){let t=m(3);S(t.comments)}}function Lt(n,d){n&1&&x(0,"span",45)}function At(n,d){if(n&1){let t=v();i(0,"div",30)(1,"div",33)(2,"div",34)(3,"h2"),l(4,"Mesajlar"),a()(),i(5,"div",35)(6,"div",66,0),C(8,zt,5,0,"div",67)(9,jt,2,0),a(),i(10,"div",68)(11,"textarea",69),V("ngModelChange",function(e){u(t);let r=m(2);return I(r.newComment,e)||(r.newComment=e),f(e)}),a(),i(12,"button",70),h("click",function(){u(t);let e=m(2);return f(e.addComment())}),C(13,Lt,1,0,"span",45),l(14," Mesaj G\xF6nder "),a()()()()()}if(n&2){let t=m(2);s(8),p(8,t.comments.length===0?8:9),s(3),E("ngModel",t.newComment),s(),b("disabled",t.addingComment||!t.newComment.trim()),s(),p(13,t.addingComment?13:-1)}}function Gt(n,d){n&1&&(i(0,"div",67),M(),i(1,"svg",13),x(2,"circle",14)(3,"polyline",27),a(),k(),i(4,"p"),l(5,"Ge\xE7mi\u015F kayd\u0131 yok"),a()())}function Kt(n,d){if(n&1&&(i(0,"div",79),x(1,"div",80),i(2,"div",81)(3,"p",82),l(4),a(),i(5,"div",83)(6,"span",84),l(7),a(),i(8,"span",76),l(9),a()()()()),n&2){let t=d.$implicit,o=m(4);s(4),g(t.description),s(3),g(t.actionBy),s(2),g(o.formatFullDate(t.createdDate))}}function Wt(n,d){if(n&1&&(i(0,"div",78),w(1,Kt,10,3,"div",79,K),a()),n&2){let t=m(3);s(),S(t.history)}}function Ht(n,d){if(n&1&&(i(0,"div",31)(1,"div",33)(2,"div",34)(3,"h2"),l(4,"\u0130\u015Flem Ge\xE7mi\u015Fi"),a()(),i(5,"div",35),C(6,Gt,6,0,"div",67)(7,Wt,3,0),a()()()),n&2){let t=m(2);s(6),p(6,t.history.length===0?6:7)}}function $t(n,d){if(n&1){let t=v();i(0,"div",17)(1,"button",18),h("click",function(){u(t);let e=m();return f(e.activeTab="details")}),M(),i(2,"svg",19),x(3,"path",20)(4,"polyline",21)(5,"line",22)(6,"line",23)(7,"polyline",24),a(),l(8," Detaylar "),a(),k(),i(9,"button",18),h("click",function(){u(t);let e=m();return e.activeTab="comments",f(e.scrollToCommentsBottom())}),M(),i(10,"svg",19),x(11,"path",25),a(),l(12," Mesajlar "),C(13,ht,2,1,"span",26),a(),k(),i(14,"button",18),h("click",function(){u(t);let e=m();return f(e.activeTab="history")}),M(),i(15,"svg",19),x(16,"circle",14)(17,"polyline",27),a(),l(18," Ge\xE7mi\u015F "),C(19,bt,2,1,"span",26),a()(),k(),i(20,"div",28),C(21,Bt,91,18,"div",29)(22,At,15,4,"div",30)(23,Ht,8,1,"div",31),a()}if(n&2){let t=m();s(),T("active",t.activeTab==="details"),s(8),T("active",t.activeTab==="comments"),s(4),p(13,t.comments.length>0?13:-1),s(),T("active",t.activeTab==="history"),s(5),p(19,t.history.length>0?19:-1),s(2),p(21,t.activeTab==="details"?21:-1),s(),p(22,t.activeTab==="comments"?22:-1),s(),p(23,t.activeTab==="history"?23:-1)}}var se=(()=>{class n{constructor(t,o,e,r,c,_,y){this.route=t,this.router=o,this.ticketService=e,this.staffService=r,this.signalRService=c,this.paramSvc=_,this.shouldScrollToBottom=!1,this.lastCommentsLength=0,this.ticket=null,this.comments=[],this.history=[],this.loading=!0,this.saving=!1,this.error="",this.newComment="",this.addingComment=!1,this.selectedStaffId="",this.staffList=[],this.assigning=!1,this.loadingStaff=!1,this.activeTab="details",this.isSignalRConnected=!1,this.baseUrl=tt.baseUrl,this.showImagePreview=!1,this.selectedImagePath=null,this.showStatusOptions=!1,this.showPriorityOptions=!1,this.statusOptions=[],this.statusValueMap={1:1,2:2,3:3,4:4,5:5},this.statusDisplayMap={Open:"A\xE7\u0131k",Processing:"\u0130\u015Flemde",InProgress:"\u0130\u015Flemde",WaitingForCustomer:"M\xFC\u015Fteri Bekleniyor",Waiting:"M\xFC\u015Fteri Bekleniyor",Resolved:"\xC7\xF6z\xFCld\xFC",Closed:"Kapat\u0131ld\u0131",1:"A\xE7\u0131k",2:"\u0130\u015Flemde",3:"M\xFC\u015Fteri Bekleniyor",4:"\xC7\xF6z\xFCld\xFC",5:"Kapat\u0131ld\u0131"},this.priorityDisplayMap={Low:"D\xFC\u015F\xFCk",Medium:"Orta",High:"Y\xFCksek",Critical:"Kritik",1:"D\xFC\u015F\xFCk",2:"Orta",3:"Y\xFCksek",4:"Kritik"},this.priorityClassMap={Low:"low",Medium:"normal",High:"high",Critical:"critical",1:"low",2:"normal",3:"high",4:"critical"},this.priorityOptions=[{value:1,label:"D\xFC\u015F\xFCk",class:"low"},{value:2,label:"Orta",class:"medium"},{value:3,label:"Y\xFCksek",class:"high"},{value:4,label:"Kritik",class:"critical"}],this.priorityValueMap={1:1,2:2,3:3,4:4},this.statusStringToNumber={Open:1,Processing:2,WaitingForCustomer:3,Waiting:3,Resolved:4,Closed:5},this.priorityStringToNumber={Low:1,Medium:2,High:3,Critical:4},this.isBrowser=q(y)}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.loadTicket(t),this.isBrowser&&this.initSignalR(t),this.refreshInterval=setInterval(()=>{this.refreshCommentsAndHistory(t)},2e3)),this.loadStaff(),this.loadDynamicFilters()}loadDynamicFilters(){this.paramSvc.getByGroup("TicketStatus").subscribe({next:t=>{let o=t.data||t||[];o=o.slice().sort((e,r)=>{let c=e.sortOrder??null,_=r.sortOrder??null;if(c!==null&&_!==null)return c-_;if(c!==null)return-1;if(_!==null)return 1;let y=["Open","Processing","WaitingForCustomer","Resolved","Closed"],F=y.indexOf(e.key??e.Key??e.value??""),B=y.indexOf(r.key??r.Key??r.value??"");return F-B}),this.statusOptions=o.map((e,r)=>{let c=e.numericKey??(typeof e.key=="number"?e.key:Number.isFinite(Number(e.key))?Number(e.key):null),_=c!=null?Number(c):null;return{value:_,label:c!=null?e.value||e.key||e.description:"",class:this.getStatusClass(_??Number(e.sortOrder??r+1)),key:e.key,numericKey:c,color:c!=null?e.value2??e.color??null:null}}),this.reconcileTicketStatusPriority()},error:()=>{this.statusOptions=[]}}),this.paramSvc.getByGroup("TicketPriority").subscribe({next:t=>{let o=t.data||t||[];o=o.slice().sort((e,r)=>{let c=e.sortOrder??null,_=r.sortOrder??null;if(c!==null&&_!==null)return c-_;if(c!==null)return-1;if(_!==null)return 1;let y=["Low","Medium","High","Critical"],F=y.indexOf(e.key??e.Key??e.value??""),B=y.indexOf(r.key??r.Key??r.value??"");return F-B}),this.priorityOptions=o.map((e,r)=>{let c=e.numericKey??(typeof e.key=="number"?e.key:Number.isFinite(Number(e.key))?Number(e.key):null),_=c!=null?Number(c):null;return{value:_,label:c!=null?e.value||e.key||e.description:"",class:this.getPriorityClass(_??Number(e.sortOrder??r+1)),key:e.key,numericKey:c,color:c!=null?e.value2??e.color??null:null}}),this.reconcileTicketStatusPriority()},error:()=>{this.priorityOptions=[]}})}reconcileTicketStatusPriority(){if(this.ticket)try{let t=String(this.ticket.status??""),o=this.statusOptions.find(c=>String(c.value)===t||String(c.key)===t||c.label===t);o?this.ticket.status=o.value??o.numericKey??Number(o.sortOrder??o.id):typeof this.ticket.status=="string"&&(this.ticket.status=this.statusStringToNumber[t]??this.ticket.status);let e=String(this.ticket.priority??""),r=this.priorityOptions.find(c=>String(c.value)===e||String(c.key)===e||c.label===e);r?this.ticket.priority=r.value??r.numericKey??Number(r.sortOrder??r.id):typeof this.ticket.priority=="string"&&(this.ticket.priority=this.priorityStringToNumber[e]??this.ticket.priority)}catch{}}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval);let t=this.route.snapshot.paramMap.get("id");t&&this.signalRService.leaveTicketGroup(t),this.commentSubscription?.unsubscribe()}openImagePreview(t){this.selectedImagePath=t,this.showImagePreview=!0}ngAfterViewChecked(){this.shouldScrollToBottom&&this.activeTab==="comments"&&(this.scrollToBottom(),this.shouldScrollToBottom=!1)}scrollToBottom(){if(this.commentsContainer)try{setTimeout(()=>{this.commentsContainer.nativeElement.scrollTop=this.commentsContainer.nativeElement.scrollHeight},0)}catch{}}scrollToCommentsBottom(){setTimeout(()=>this.scrollToBottom(),0)}loadStaff(){this.loadingStaff=!0,this.staffService.getAllStaff(!0).subscribe({next:t=>{let o=t?.data?.$values||t?.data||t;this.staffList=Array.isArray(o)?o:[],this.loadingStaff=!1},error:()=>{this.loadingStaff=!1}})}loadTicket(t){this.loading=!0,this.ticketService.getTicketById(t).subscribe({next:o=>{let e=o?.data?.data||o?.data||o;typeof e.status=="string"&&(e.status=this.statusStringToNumber[e.status]||1),typeof e.priority=="string"&&(e.priority=this.priorityStringToNumber[e.priority]||1),this.ticket=e;let r=e.comments?.$values||e.comments||[];r=r.map(c=>c.isAdminReply&&c.authorName!=="Admin"?D(z({},c),{isStaff:!0}):c),this.history=e.history?.$values||e.history||[],this.loading=!1,this.comments.length!==r.length&&(this.shouldScrollToBottom=!0),this.comments=r,this.reconcileTicketStatusPriority()},error:()=>{this.error="Talep yuklenirken bir hata olustu",this.loading=!1}})}refreshCommentsAndHistory(t){this.ticketService.getTicketById(t).subscribe({next:o=>{let e=o?.data?.data||o?.data||o,r=e.comments?.$values||e.comments||[];r=r.map(c=>c.isAdminReply&&c.authorName!=="Admin"?D(z({},c),{isStaff:!0}):c),r.length!==this.comments.length&&(this.comments=r,this.shouldScrollToBottom=!0),this.history=e.history?.$values||e.history||[]}})}formatTicketId(t,o){if(o)return o;if(t==null)return"-";let e=typeof t=="number"?t:Number(t);return Number.isFinite(e)?`T${e.toString().padStart(5,"0")}`:String(t)}updateStatus(t){if(!this.ticket)return;this.saving=!0;let o=Number(t);console.log("TicketEdit.updateStatus -> sending",o,{statusOptions:this.statusOptions}),this.ticketService.updateTicketStatus(this.ticket.id,o).subscribe({next:()=>{this.ticket&&(this.ticket.status=t),this.saving=!1,this.showStatusOptions=!1,this.loadTicket(this.ticket.id)},error:()=>{this.saving=!1}})}updatePriority(t){if(!this.ticket)return;this.saving=!0;let o=Number(t);console.log("TicketEdit.updatePriority -> sending",o,{priorityOptions:this.priorityOptions}),this.ticketService.updateTicketPriority(this.ticket.id,o).subscribe({next:()=>{this.ticket&&(this.ticket.priority=t),this.saving=!1,this.showPriorityOptions=!1,this.loadTicket(this.ticket.id)},error:()=>{this.saving=!1}})}toggleStatusOptions(){this.showStatusOptions=!this.showStatusOptions}togglePriorityOptions(){this.showPriorityOptions=!this.showPriorityOptions}assignTicket(){if(!this.ticket||!this.selectedStaffId)return;let t=typeof this.selectedStaffId=="number"?this.selectedStaffId:Number(this.selectedStaffId),o=this.staffList.find(e=>Number(e.id)===t);o&&(this.assigning=!0,this.ticketService.assignTicket(this.ticket.id,t).subscribe({next:()=>{this.ticket&&(this.ticket.assignedPerson=o.fullName),this.assigning=!1,this.loadTicket(this.ticket.id)},error:()=>{this.assigning=!1}}))}addComment(){!this.ticket||!this.newComment.trim()||(this.addingComment=!0,this.ticketService.addAdminComment(this.ticket.id,this.newComment.trim(),"Admin",!0).subscribe({next:()=>{this.newComment="",this.addingComment=!1,this.shouldScrollToBottom=!0,this.ticket&&this.ticketService.getTicketById(this.ticket.id).subscribe({next:t=>{let o=t?.data?.data||t?.data||t;this.history=o.history?.$values||o.history||[]}})},error:()=>{this.addingComment=!1}}))}initSignalR(t){return L(this,null,function*(){if(!this.isBrowser){console.log("SignalR: Not in browser environment");return}let o=localStorage.getItem("token")||sessionStorage.getItem("token");if(!o){console.warn("SignalR: No token found. User may not be authenticated.");return}try{console.log("SignalR: Attempting to start connection with token"),yield this.signalRService.startConnection(o),console.log("SignalR: Joining ticket group",t),yield this.signalRService.joinTicketGroup(t),this.isSignalRConnected=!0,console.log("SignalR: Successfully connected and joined group"),this.commentSubscription=this.signalRService.commentReceived$.subscribe(e=>{console.log("Ticket-Edit: Received comment from SignalR:",e),String(e.ticketId)===String(t)&&(this.comments.some(c=>String(c.id)===String(e.id))?console.log("Ticket-Edit: Comment already exists, skipping"):(console.log("Ticket-Edit: Adding new comment to list"),this.comments=[...this.comments,e],this.shouldScrollToBottom=!0,this.ticketService.getTicketById(t).subscribe({next:c=>{let _=c?.data?.data||c?.data||c;this.history=_.history?.$values||_.history||[]}})))})}catch(e){console.error("SignalR: Connection failed:",e),this.isSignalRConnected=!1,console.warn("SignalR: Real-time updates disabled. Comments will appear after refresh.")}})}getStatusLabel(t){let o=Number(t),e=this.statusOptions.find(r=>Number(r.value)===o);return e?e.label:this.statusDisplayMap[t]??"Bilinmiyor"}getStatusClass(t){let o=Number(t),e=this.statusOptions.find(c=>Number(c.value)===o);return e&&e.class?e.class:{Open:"open",Processing:"processing",InProgress:"processing",WaitingForCustomer:"waiting",Waiting:"waiting",Resolved:"resolved",Closed:"closed",1:"open",2:"processing",3:"waiting",4:"resolved",5:"closed"}[t]??""}getPriorityLabel(t){let o=Number(t),e=this.priorityOptions.find(r=>Number(r.value)===o);return e?e.label:this.priorityDisplayMap[t]??"Normal"}getPriorityClass(t){let o=Number(t),e=this.priorityOptions.find(r=>Number(r.value)===o);return e&&e.class?e.class:this.priorityClassMap[t]??"normal"}getStatusColor(t){let o=Number(t);return this.statusOptions.find(r=>Number(r.value)===o||String(r.key)===String(t))?.color??null}getPriorityColor(t){let o=Number(t);return this.priorityOptions.find(r=>Number(r.value)===o||String(r.key)===String(t))?.color??null}formatDate(t){return t?new Date(t).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}):"-"}formatFullDate(t){return t?new Date(t).toLocaleString("tr-TR"):"-"}goBack(){this.router.navigate(["/admin/tickets"])}compareValues(t,o){return String(t)===String(o)}static{this.\u0275fac=function(o){return new(o||n)(P(J),P(X),P(mt),P(dt),P(st),P(ct),P(G))}}static{this.\u0275cmp=A({type:n,selectors:[["app-ticket-edit"]],viewQuery:function(o,e){if(o&1&&H(_t,5),o&2){let r;$(r=U())&&(e.commentsContainer=r.first)}},standalone:!0,features:[Y],decls:12,vars:3,consts:[["commentsContainer",""],[1,"ticket-edit-page"],[1,"page-header"],[1,"header-left"],[1,"back-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"ticket-info"],[1,"saving-indicator"],[1,"loading-container"],[1,"spinner"],[1,"loader"],[1,"error-container"],["width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["d","M12 8v4M12 16h.01"],[1,"btn","btn-primary",3,"click"],[1,"tabs"],[1,"tab",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["points","10 9 9 9 8 9"],["d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[1,"badge"],["points","12 6 12 12 16 14"],[1,"tab-content"],[1,"details-tab"],[1,"comments-tab"],[1,"history-tab"],[1,"main-content"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group"],[1,"value"],[1,"value","description"],[1,"form-row"],[1,"image-preview-overlay"],[1,"sidebar"],[1,"current-assignee"],[1,"loading-staff"],[1,"btn","btn-primary","full-width",3,"click","disabled"],[1,"spinner-sm"],[1,"status-options"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],["value",""],[3,"value"],[1,"priority-options"],[1,"image-grid"],["type","button",1,"image-tile"],["type","button",1,"image-tile",3,"click"],["alt","Ticket Image",3,"src"],[1,"image-overlay"],[1,"image-container"],["type","button",1,"image-tile","single",3,"click"],[1,"image-preview-overlay",3,"click"],[1,"preview-content",3,"click"],[1,"btn-close-preview",3,"click"],["alt","Buyuk Gorsel",3,"src"],[1,"assignee-info"],[1,"assignee-avatar"],[1,"no-staff"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"comments-list"],[1,"empty-state"],[1,"add-comment"],["placeholder","Mesaj yaz\u0131n...","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"comment",3,"admin","staff"],[1,"comment"],[1,"comment-header"],[1,"name"],[1,"admin-badge"],[1,"date"],[1,"comment-body"],[1,"timeline"],[1,"timeline-item"],[1,"timeline-dot"],[1,"timeline-content"],[1,"action"],[1,"meta"],[1,"by"]],template:function(o,e){o&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),h("click",function(){return e.goBack()}),M(),i(4,"svg",5),x(5,"path",6),a(),l(6," Geri "),a(),C(7,ut,7,17,"div",7),a(),C(8,ft,3,0,"div",8),a(),C(9,Ct,4,0,"div",9)(10,xt,8,1)(11,$t,24,11),a()),o&2&&(s(7),p(7,e.ticket?7:-1),s(),p(8,e.saving?8:-1),s(),p(9,e.loading?9:e.error?10:e.ticket?11:-1))},dependencies:[Q,Z,lt,at,rt,et,ot,nt,it],styles:[`.ticket-edit-page[_ngcontent-%COMP%]{padding:16px;max-width:1400px;margin:0 auto;overflow-x:hidden}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f1f5f9;border:none;border-radius:8px;color:#64748b;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#334155}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1e293b;margin:0}.page-header[_ngcontent-%COMP%]   .saving-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#0ea5e9;font-size:14px}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex-wrap:wrap}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:18px}}.status-badge[_ngcontent-%COMP%], .priority-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600}.status-badge.open[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.status-badge.processing[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.status-badge.pending[_ngcontent-%COMP%]{background:#e0e7ff;color:#4338ca}.status-badge.resolved[_ngcontent-%COMP%]{background:#d1fae5;color:#047857}.status-badge.closed[_ngcontent-%COMP%], .priority-badge.low[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.priority-badge.normal[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.priority-badge.high[_ngcontent-%COMP%]{background:#fed7aa;color:#c2410c}.priority-badge.critical[_ngcontent-%COMP%]{background:#fecaca;color:#b91c1c}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center;color:#64748b}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.loader[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid #e2e8f0;border-top-color:#0ea5e9;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.spinner-sm[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:6px}.tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px;border-bottom:1px solid #e2e8f0;padding-bottom:0}@media (max-width: 768px){.tabs[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:nowrap}}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 16px;background:none;border:none;border-bottom:2px solid transparent;color:#64748b;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;margin-bottom:-1px}@media (max-width: 768px){.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:0 0 auto;padding:10px 12px;font-size:13px}}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{color:#334155}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#0ea5e9;border-bottom-color:#0ea5e9}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#e2e8f0;color:#64748b;padding:2px 8px;border-radius:10px;font-size:12px}.tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#dbeafe;color:#0ea5e9}.tab-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.details-tab[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 300px;gap:16px}.details-tab[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{min-width:0}@media (max-width: 1024px){.details-tab[_ngcontent-%COMP%]{grid-template-columns:1fr}}.details-tab[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.details-tab[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a;overflow:hidden;min-width:0}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e2e8f0}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#1e293b;margin:0}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15px;color:#1e293b;margin:0;line-height:1.5}.form-group[_ngcontent-%COMP%]   .value.description[_ngcontent-%COMP%]{white-space:pre-wrap;background:#f8fafc;padding:12px 16px;border-radius:8px;border:1px solid #e2e8f0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}@media (max-width: 600px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;transition:all .2s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#0ea5e9;box-shadow:0 0 0 3px #0ea5e91a}.form-control[_ngcontent-%COMP%]::placeholder{color:#94a3b8}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.image-container[_ngcontent-%COMP%]   .image-tile.single[_ngcontent-%COMP%]{width:100%}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:400px;border-radius:8px;border:1px solid #e2e8f0;object-fit:contain}.image-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]{position:relative;width:100%;border:1px solid #e2e8f0;border-radius:8px;padding:0;background:#fff;overflow:hidden;cursor:zoom-in}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;display:block}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:600;background:#0009;padding:6px 12px;border-radius:20px}.image-grid[_ngcontent-%COMP%]   .image-tile[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.image-preview-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:2000;padding:40px;cursor:zoom-out}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{position:relative;max-width:95%;max-height:95%;display:flex;align-items:center;justify-content:center;cursor:default}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;border-radius:8px;box-shadow:0 0 30px #00000080}.image-preview-overlay[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .btn-close-preview[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;background:#ffffff1a;border:2px solid #fff;color:#fff;font-size:22px;width:40px;height:40px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}.status-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.status-options[_ngcontent-%COMP%]   .status-current[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;background:transparent;border:1px solid transparent;cursor:pointer;width:100%;justify-content:flex-start;border-radius:10px}.status-options[_ngcontent-%COMP%]   .status-current[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:auto;color:#94a3b8}.status-options[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.status-options[_ngcontent-%COMP%]   .status-btn[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:999px;background:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease;text-align:left;box-shadow:0 1px 2px #1018280a}.status-options[_ngcontent-%COMP%]   .status-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 6px 12px #10182814}.status-options[_ngcontent-%COMP%]   .status-btn.active[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 2px #0000000f}.status-options[_ngcontent-%COMP%]   .status-btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed;transform:none;box-shadow:none}.status-options[_ngcontent-%COMP%]   .status-btn.open[_ngcontent-%COMP%], .status-options[_ngcontent-%COMP%]   .status-btn.processing[_ngcontent-%COMP%], .status-options[_ngcontent-%COMP%]   .status-btn.pending[_ngcontent-%COMP%], .status-options[_ngcontent-%COMP%]   .status-btn.resolved[_ngcontent-%COMP%], .status-options[_ngcontent-%COMP%]   .status-btn.closed[_ngcontent-%COMP%]{color:#fff}.priority-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.priority-options[_ngcontent-%COMP%]   .priority-current[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;background:transparent;border:1px solid transparent;cursor:pointer;width:100%;justify-content:flex-start;border-radius:10px}.priority-options[_ngcontent-%COMP%]   .priority-current[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:auto;color:#94a3b8}.priority-options[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.priority-options[_ngcontent-%COMP%]   .priority-btn[_ngcontent-%COMP%]{padding:8px 12px;border:none;border-radius:999px;background:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease;text-align:left;box-shadow:0 1px 2px #1018280a}.priority-options[_ngcontent-%COMP%]   .priority-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 6px 12px #10182814}.priority-options[_ngcontent-%COMP%]   .priority-btn.active[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 2px #0000000f}.priority-options[_ngcontent-%COMP%]   .priority-btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed;transform:none;box-shadow:none}.priority-options[_ngcontent-%COMP%]   .priority-btn.low[_ngcontent-%COMP%], .priority-options[_ngcontent-%COMP%]   .priority-btn.medium[_ngcontent-%COMP%], .priority-options[_ngcontent-%COMP%]   .priority-btn.high[_ngcontent-%COMP%], .priority-options[_ngcontent-%COMP%]   .priority-btn.critical[_ngcontent-%COMP%]{color:#fff}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#0284c7,#0369a1);transform:translateY(-1px)}.full-width[_ngcontent-%COMP%]{width:100%}.comments-tab[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.comments-tab[_ngcontent-%COMP%]{max-width:100%}}.add-comment[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px;padding-top:16px;border-top:1px solid #e2e8f0}.add-comment[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{align-self:flex-end}.comments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-height:350px;overflow-y:auto}.comment[_ngcontent-%COMP%]{padding:12px;background:#f8fafc;border-radius:12px;border-left:3px solid #e2e8f0;display:flex;flex-direction:column;align-self:flex-start;max-width:70%}@media (max-width: 768px){.comment[_ngcontent-%COMP%]{max-width:100%}}.comment.admin[_ngcontent-%COMP%]{background:#f0f9ff;border-left-color:#0ea5e9;align-self:flex-end}.comment.staff[_ngcontent-%COMP%]{background:#f8fafc;border-left-color:#e2e8f0;align-self:flex-start}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:12px}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;color:#1e293b}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .admin-badge[_ngcontent-%COMP%]{font-size:11px;padding:2px 8px;background:#0ea5e9;color:#fff;border-radius:10px}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#94a3b8;margin-left:auto}.comment[_ngcontent-%COMP%]   .comment-body[_ngcontent-%COMP%]{color:#334155;line-height:1.6;white-space:pre-wrap}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:#94a3b8}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:14px}.history-tab[_ngcontent-%COMP%]{max-width:800px}@media (max-width: 768px){.history-tab[_ngcontent-%COMP%]{max-width:100%}}.timeline[_ngcontent-%COMP%]{position:relative;padding-left:24px}.timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;left:7px;top:0;bottom:0;width:2px;background:#e2e8f0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{position:relative;padding-bottom:16px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-dot[_ngcontent-%COMP%]{position:absolute;left:-20px;top:4px;width:12px;height:12px;border-radius:50%;background:#fff;border:3px solid #0ea5e9}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{background:#f8fafc;padding:10px 12px;border-radius:8px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{font-size:13px;color:#1e293b;margin:0 0 6px}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:11px;color:#94a3b8}.timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]{font-weight:500;color:#64748b}.current-assignee[_ngcontent-%COMP%]{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e2e8f0}.current-assignee[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.current-assignee[_ngcontent-%COMP%]   .assignee-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.current-assignee[_ngcontent-%COMP%]   .assignee-info[_ngcontent-%COMP%]   .assignee-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:600}.current-assignee[_ngcontent-%COMP%]   .assignee-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#1e293b}.loading-staff[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px;color:#64748b;font-size:14px}.no-staff[_ngcontent-%COMP%]{color:#94a3b8;font-size:14px;margin:0;padding:10px 0}select.form-control[_ngcontent-%COMP%]{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2364748b' d='M6 8L1 3h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:36px;cursor:pointer}@media (max-width: 768px){.ticket-edit-page[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:12px}.form-group[_ngcontent-%COMP%]   .value.description[_ngcontent-%COMP%]{padding:10px 12px}.current-assignee[_ngcontent-%COMP%]   .assignee-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{word-break:break-word}}@media (max-width: 480px){.ticket-edit-page[_ngcontent-%COMP%]{padding:10px;max-width:100%}.status-badge[_ngcontent-%COMP%], .priority-badge[_ngcontent-%COMP%]{font-size:11px;padding:3px 10px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{width:100%;gap:10px}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]{width:100%;gap:8px}.page-header[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:16px;width:100%;overflow-wrap:anywhere}.details-tab[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.details-tab[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%], .details-tab[_ngcontent-%COMP%]   .sidebar[_ngcontent-%COMP%]{width:100%;min-width:0}.card[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.tabs[_ngcontent-%COMP%]{white-space:normal;overflow:visible;flex-wrap:wrap;gap:6px}.tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{flex:1 1 calc(50% - 6px);justify-content:center;min-height:40px}.tab-content[_ngcontent-%COMP%]{min-width:0}.form-group[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   .value.description[_ngcontent-%COMP%], .current-assignee[_ngcontent-%COMP%]   .assignee-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow-wrap:anywhere;word-break:break-word}.image-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.image-preview-overlay[_ngcontent-%COMP%]{padding:16px}}`]})}}return n})();export{se as TicketEditComponent};
